var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};/*! modernizr 3.5.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-touchevents-setclasses !*/!function(e,n,t){function o(e,n){return(typeof e==="undefined"?"undefined":_typeof2(e))===n;}function s(){var e,n,t,s,a,i,r;for(var l in c){if(c.hasOwnProperty(l)){if(e=[],n=c[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++){e.push(n.options.aliases[t].toLowerCase());}for(s=o(n.fn,"function")?n.fn():n.fn,a=0;a<e.length;a++){i=e[a],r=i.split("."),1===r.length?Modernizr[r[0]]=s:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=s),f.push((s?"":"no-")+r.join("-"));}}}}function a(e){var n=u.className,t=Modernizr._config.classPrefix||"";if(p&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2");}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),p?u.className.baseVal=n:u.className=n);}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):p?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments);}function r(){var e=n.body;return e||(e=i(p?"svg":"body"),e.fake=!0),e;}function l(e,t,o,s){var a,l,f,c,d="modernizr",p=i("div"),h=r();if(parseInt(o,10))for(;o--;){f=i("div"),f.id=s?s[o]:d+(o+1),p.appendChild(f);}return a=i("style"),a.type="text/css",a.id="s"+d,(h.fake?h:p).appendChild(a),h.appendChild(p),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(n.createTextNode(e)),p.id=d,h.fake&&(h.style.background="",h.style.overflow="hidden",c=u.style.overflow,u.style.overflow="hidden",u.appendChild(h)),l=t(p,e),h.fake?(h.parentNode.removeChild(h),u.style.overflow=c,u.offsetHeight):p.parentNode.removeChild(p),!!l;}var f=[],c=[],d={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function on(e,n){var t=this;setTimeout(function(){n(t[e]);},0);},addTest:function addTest(e,n,t){c.push({name:e,fn:n,options:t});},addAsyncTest:function addAsyncTest(e){c.push({name:null,fn:e});}},Modernizr=function Modernizr(){};Modernizr.prototype=d,Modernizr=new Modernizr();var u=n.documentElement,p="svg"===u.nodeName.toLowerCase(),h=d._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];d._prefixes=h;var m=d.testStyles=l;Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",h.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");m(o,function(e){t=9===e.offsetTop;});}return t;}),s(),a(f),delete d.addTest,delete d.addAsyncTest;for(var v=0;v<Modernizr._q.length;v++){Modernizr._q[v]();}e.Modernizr=Modernizr;}(window,document);;// ==================================================
// fancyBox v3.2.10
//
// Licensed GPLv3 for open source use
// or fancyBox Commercial License for commercial use
//
// http://fancyapps.com/fancybox/
// Copyright 2017 fancyApps
//
// ==================================================
;(function(window,document,$,undefined){'use strict';// If there's no jQuery, fancyBox can't work
// =========================================
if(!$){return;}// Check if fancyBox is already initialized
// ========================================
if($.fn.fancybox){if('console'in window){console.log('fancyBox already initialized');}return;}// Private default settings
// ========================
var defaults={// Enable infinite gallery navigation
loop:false,// Space around image, ignored if zoomed-in or viewport width is smaller than 800px
margin:[44,0],// Horizontal space between slides
gutter:50,// Enable keyboard navigation
keyboard:true,// Should display navigation arrows at the screen edges
arrows:true,// Should display infobar (counter and arrows at the top)
infobar:true,// Should display toolbar (buttons at the top)
toolbar:true,// What buttons should appear in the top right corner.
// Buttons will be created using templates from `btnTpl` option
// and they will be placed into toolbar (class="fancybox-toolbar"` element)
buttons:['slideShow','fullScreen','thumbs','share',//'download',
//'zoom',
'close'],// Detect "idle" time in seconds
idleTime:3,// Should display buttons at top right corner of the content
// If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'
// Use template from `btnTpl.smallBtn` for customization
smallBtn:'auto',// Disable right-click and use simple image protection for images
protect:false,// Shortcut to make content "modal" - disable keyboard navigtion, hide buttons, etc
modal:false,image:{// Wait for images to load before displaying
// Requires predefined image dimensions
// If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found
preload:"auto"},ajax:{// Object containing settings for ajax request
settings:{// This helps to indicate that request comes from the modal
// Feel free to change naming
data:{fancybox:true}}},iframe:{// Iframe template
tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',// Preload iframe before displaying it
// This allows to calculate iframe content width and height
// (note: Due to "Same Origin Policy", you can't get cross domain data).
preload:true,// Custom CSS styling for iframe wrapping element
// You can use this to set custom iframe dimensions
css:{},// Iframe tag attributes
attr:{scrolling:'auto'}},// Default content type if cannot be detected automatically
defaultType:'image',// Open/close animation type
// Possible values:
//   false            - disable
//   "zoom"           - zoom images from/to thumbnail
//   "fade"
//   "zoom-in-out"
//
animationEffect:"zoom",// Duration in ms for open/close animation
animationDuration:500,// Should image change opacity while zooming
// If opacity is "auto", then opacity will be changed if image and thumbnail have different aspect ratios
zoomOpacity:"auto",// Transition effect between slides
//
// Possible values:
//   false            - disable
//   "fade'
//   "slide'
//   "circular'
//   "tube'
//   "zoom-in-out'
//   "rotate'
//
transitionEffect:"fade",// Duration in ms for transition animation
transitionDuration:366,// Custom CSS class for slide element
slideClass:'',// Custom CSS class for layout
baseClass:'',// Base template for layout
baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1">'+'<div class="fancybox-bg"></div>'+'<div class="fancybox-inner">'+'<div class="fancybox-infobar">'+'<span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span>'+'</div>'+'<div class="fancybox-toolbar">{{buttons}}</div>'+'<div class="fancybox-navigation">{{arrows}}</div>'+'<div class="fancybox-stage"></div>'+'<div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div>'+'</div>'+'</div>',// Loading indicator template
spinnerTpl:'<div class="fancybox-loading"></div>',// Error message template
errorTpl:'<div class="fancybox-error"><p>{{ERROR}}<p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}">'+'<svg viewBox="0 0 40 40">'+'<path d="M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28" />'+'</svg>'+'</a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}">'+'<svg viewBox="0 0 40 40">'+'<path d="M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23" />'+'</svg>'+'</button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}">'+'<svg viewBox="0 0 40 40">'+'<path d="M10,10 L30,30 M30,10 L10,30" />'+'</svg>'+'</button>',// This small close button will be appended to your html/inline/ajax content by default,
// if "smallBtn" option is not set to false
smallBtn:'<button data-fancybox-close class="fancybox-close-small" title="{{CLOSE}}"></button>',// Arrows
arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}">'+'<svg viewBox="0 0 40 40">'+'<path d="M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20"></path>'+'</svg>'+'</button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}">'+'<svg viewBox="0 0 40 40">'+'<path d="M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20"></path>'+'</svg>'+'</button>'},// Container is injected into this element
parentEl:'body',// Focus handling
// ==============
// Try to focus on the first focusable element after opening
autoFocus:false,// Put focus back to active element after closing
backFocus:true,// Do not let user to focus on element outside modal content
trapFocus:true,// Module specific options
// =======================
fullScreen:{autoStart:false},// Set `touch: false` to disable dragging/swiping
touch:{vertical:true,// Allow to drag content vertically
momentum:true// Continue movement after releasing mouse/touch when panning
},// Hash value when initializing manually,
// set `false` to disable hash change
hash:null,// Customize or add new media types
// Example:
/*
        media : {
            youtube : {
                params : {
                    autoplay : 0
                }
            }
        }
        */media:{},slideShow:{autoStart:false,speed:4000},thumbs:{autoStart:false,// Display thumbnails on opening
hideOnClose:true,// Hide thumbnail grid when closing animation starts
parentEl:'.fancybox-container',// Container is injected into this element
axis:'y'// Vertical (y) or horizontal (x) scrolling
},// Use mousewheel to navigate gallery
// If 'auto' - enabled for images only
wheel:'auto',// Callbacks
//==========
// See Documentation/API/Events for more information
// Example:
/*
            afterShow: function( instance, current ) {
                 console.info( 'Clicked element:' );
                 console.info( current.opts.$orig );
            }
        */onInit:$.noop,// When instance has been initialized
beforeLoad:$.noop,// Before the content of a slide is being loaded
afterLoad:$.noop,// When the content of a slide is done loading
beforeShow:$.noop,// Before open animation starts
afterShow:$.noop,// When content is done loading and animating
beforeClose:$.noop,// Before the instance attempts to close. Return false to cancel the close.
afterClose:$.noop,// After instance has been closed
onActivate:$.noop,// When instance is brought to front
onDeactivate:$.noop,// When other instance has been activated
// Interaction
// ===========
// Use options below to customize taken action when user clicks or double clicks on the fancyBox area,
// each option can be string or method that returns value.
//
// Possible values:
//   "close"           - close instance
//   "next"            - move to next gallery item
//   "nextOrClose"     - move to next gallery item or close if gallery has only one item
//   "toggleControls"  - show/hide controls
//   "zoom"            - zoom image (if loaded)
//   false             - do nothing
// Clicked on the content
clickContent:function clickContent(current,event){return current.type==='image'?'zoom':false;},// Clicked on the slide
clickSlide:'close',// Clicked on the background (backdrop) element
clickOutside:'close',// Same as previous two, but for double click
dblclickContent:false,dblclickSlide:false,dblclickOutside:false,// Custom options when mobile device is detected
// =============================================
mobile:{idleTime:false,margin:0,clickContent:function clickContent(current,event){return current.type==='image'?'toggleControls':false;},clickSlide:function clickSlide(current,event){return current.type==='image'?'toggleControls':'close';},dblclickContent:function dblclickContent(current,event){return current.type==='image'?'zoom':false;},dblclickSlide:function dblclickSlide(current,event){return current.type==='image'?'zoom':false;}},// Internationalization
// ============
lang:'en',i18n:{'en':{CLOSE:'Close',NEXT:'Next',PREV:'Previous',ERROR:'The requested content cannot be loaded. <br/> Please try again later.',PLAY_START:'Start slideshow',PLAY_STOP:'Pause slideshow',FULL_SCREEN:'Full screen',THUMBS:'Thumbnails',DOWNLOAD:'Download',SHARE:'Share',ZOOM:'Zoom'},'de':{CLOSE:'Schliessen',NEXT:'Weiter',PREV:'Zurück',ERROR:'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.',PLAY_START:'Diaschau starten',PLAY_STOP:'Diaschau beenden',FULL_SCREEN:'Vollbild',THUMBS:'Vorschaubilder',DOWNLOAD:'Herunterladen',SHARE:'Teilen',ZOOM:'Maßstab'}}};// Few useful variables and methods
// ================================
var $W=$(window);var $D=$(document);var called=0;// Check if an object is a jQuery object and not a native JavaScript object
// ========================================================================
var isQuery=function isQuery(obj){return obj&&obj.hasOwnProperty&&obj instanceof $;};// Handle multiple browsers for "requestAnimationFrame" and "cancelAnimationFrame"
// ===============================================================================
var requestAFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||// if all else fails, use setTimeout
function(callback){return window.setTimeout(callback,1000/60);};}();// Detect the supported transition-end event property name
// =======================================================
var transitionEnd=function(){var t,el=document.createElement("fakeelement");var transitions={"transition":"transitionend","OTransition":"oTransitionEnd","MozTransition":"transitionend","WebkitTransition":"webkitTransitionEnd"};for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}return'transitionend';}();// Force redraw on an element.
// This helps in cases where the browser doesn't redraw an updated element properly.
// =================================================================================
var forceRedraw=function forceRedraw($el){return $el&&$el.length&&$el[0].offsetHeight;};// Class definition
// ================
var FancyBox=function FancyBox(content,opts,index){var self=this;self.opts=$.extend(true,{index:index},$.fancybox.defaults,opts||{});if($.fancybox.isMobile){self.opts=$.extend(true,{},self.opts,self.opts.mobile);}// Exclude buttons option from deep merging
if(opts&&$.isArray(opts.buttons)){self.opts.buttons=opts.buttons;}self.id=self.opts.id||++called;self.group=[];self.currIndex=parseInt(self.opts.index,10)||0;self.prevIndex=null;self.prevPos=null;self.currPos=0;self.firstRun=null;// Create group elements from original item collection
self.createGroup(content);if(!self.group.length){return;}// Save last active element and current scroll position
self.$lastFocus=$(document.activeElement).blur();// Collection of gallery objects
self.slides={};self.init();};$.extend(FancyBox.prototype,{// Create DOM structure
// ====================
init:function init(){var self=this,firstItem=self.group[self.currIndex],firstItemOpts=firstItem.opts,scrollbarWidth=$.fancybox.scrollbarWidth,$scrollDiv,$container,buttonStr;self.scrollTop=$D.scrollTop();self.scrollLeft=$D.scrollLeft();// Hide scrollbars
// ===============
if(!$.fancybox.getInstance()){$('body').addClass('fancybox-active');// iOS hack
if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){// iOS has problems for input elements inside fixed containers,
// the workaround is to apply `position: fixed` to `<body>` element,
// unfortunately, this makes it lose the scrollbars and forces address bar to appear.
if(firstItem.type!=='image'){$('body').css('top',$('body').scrollTop()*-1).addClass('fancybox-iosfix');}}else if(!$.fancybox.isMobile&&document.body.scrollHeight>window.innerHeight){if(scrollbarWidth===undefined){$scrollDiv=$('<div style="width:50px;height:50px;overflow:scroll;" />').appendTo('body');scrollbarWidth=$.fancybox.scrollbarWidth=$scrollDiv[0].offsetWidth-$scrollDiv[0].clientWidth;$scrollDiv.remove();}$('head').append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar { margin-right: '+scrollbarWidth+'px; }</style>');$('body').addClass('compensate-for-scrollbar');}}// Build html markup and set references
// ====================================
// Build html code for buttons and insert into main template
buttonStr='';$.each(firstItemOpts.buttons,function(index,value){buttonStr+=firstItemOpts.btnTpl[value]||'';});// Create markup from base template, it will be initially hidden to
// avoid unnecessary work like painting while initializing is not complete
$container=$(self.translate(self,firstItemOpts.baseTpl.replace('\{\{buttons\}\}',buttonStr).replace('\{\{arrows\}\}',firstItemOpts.btnTpl.arrowLeft+firstItemOpts.btnTpl.arrowRight))).attr('id','fancybox-container-'+self.id).addClass('fancybox-is-hidden').addClass(firstItemOpts.baseClass).data('FancyBox',self).appendTo(firstItemOpts.parentEl);// Create object holding references to jQuery wrapped nodes
self.$refs={container:$container};['bg','inner','infobar','toolbar','stage','caption','navigation'].forEach(function(item){self.$refs[item]=$container.find('.fancybox-'+item);});self.trigger('onInit');// Enable events, deactive previous instances
self.activate();// Build slides, load and reveal content
self.jumpTo(self.currIndex);},// Simple i18n support - replaces object keys found in template
// with corresponding values
// ============================================================
translate:function translate(obj,str){var arr=obj.opts.i18n[obj.opts.lang];return str.replace(/\{\{(\w+)\}\}/g,function(match,n){var value=arr[n];if(value===undefined){return match;}return value;});},// Create array of gally item objects
// Check if each object has valid type and content
// ===============================================
createGroup:function createGroup(content){var self=this;var items=$.makeArray(content);$.each(items,function(i,item){var obj={},opts={},$item,type,found,src,srcParts;// Step 1 - Make sure we have an object
// ====================================
if($.isPlainObject(item)){// We probably have manual usage here, something like
// $.fancybox.open( [ { src : "image.jpg", type : "image" } ] )
obj=item;opts=item.opts||item;}else if($.type(item)==='object'&&$(item).length){// Here we probably have jQuery collection returned by some selector
$item=$(item);opts=$item.data();opts=$.extend({},opts,opts.options||{});// Here we store clicked element
opts.$orig=$item;obj.src=opts.src||$item.attr('href');// Assume that simple syntax is used, for example:
//   `$.fancybox.open( $("#test"), {} );`
if(!obj.type&&!obj.src){obj.type='inline';obj.src=item;}}else{// Assume we have a simple html code, for example:
//   $.fancybox.open( '<div><h1>Hi!</h1></div>' );
obj={type:'html',src:item+''};}// Each gallery object has full collection of options
obj.opts=$.extend(true,{},self.opts,opts);// Do not merge buttons array
if($.isArray(opts.buttons)){obj.opts.buttons=opts.buttons;}// Step 2 - Make sure we have content type, if not - try to guess
// ==============================================================
type=obj.type||obj.opts.type;src=obj.src||'';if(!type&&src){if(src.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)){type='image';}else if(src.match(/\.(pdf)((\?|#).*)?$/i)){type='pdf';}else if(found=src.match(/\.(mp4|mov|ogv)((\?|#).*)?$/i)){type='video';if(!obj.opts.videoFormat){obj.opts.videoFormat='video/'+(found[1]==='ogv'?'ogg':found[1]);}}else if(src.charAt(0)==='#'){type='inline';}}if(type){obj.type=type;}else{self.trigger('objectNeedsType',obj);}// Step 3 - Some adjustments
// =========================
obj.index=self.group.length;// Check if $orig and $thumb objects exist
if(obj.opts.$orig&&!obj.opts.$orig.length){delete obj.opts.$orig;}if(!obj.opts.$thumb&&obj.opts.$orig){obj.opts.$thumb=obj.opts.$orig.find('img:first');}if(obj.opts.$thumb&&!obj.opts.$thumb.length){delete obj.opts.$thumb;}// "caption" is a "special" option, it can be used to customize caption per gallery item ..
if($.type(obj.opts.caption)==='function'){obj.opts.caption=obj.opts.caption.apply(item,[self,obj]);}if($.type(self.opts.caption)==='function'){obj.opts.caption=self.opts.caption.apply(item,[self,obj]);}// Make sure we have caption as a string or jQuery object
if(!(obj.opts.caption instanceof $)){obj.opts.caption=obj.opts.caption===undefined?'':obj.opts.caption+'';}// Check if url contains "filter" used to filter the content
// Example: "ajax.html #something"
if(type==='ajax'){srcParts=src.split(/\s+/,2);if(srcParts.length>1){obj.src=srcParts.shift();obj.opts.filter=srcParts.shift();}}if(obj.opts.smallBtn=='auto'){if($.inArray(type,['html','inline','ajax'])>-1){obj.opts.toolbar=false;obj.opts.smallBtn=true;}else{obj.opts.smallBtn=false;}}// If the type is "pdf", then simply load file into iframe
if(type==='pdf'){obj.type='iframe';obj.opts.iframe.preload=false;}// Hide all buttons and disable interactivity for modal items
if(obj.opts.modal){obj.opts=$.extend(true,obj.opts,{// Remove buttons
infobar:0,toolbar:0,smallBtn:0,// Disable keyboard navigation
keyboard:0,// Disable some modules
slideShow:0,fullScreen:0,thumbs:0,touch:0,// Disable click event handlers
clickContent:false,clickSlide:false,clickOutside:false,dblclickContent:false,dblclickSlide:false,dblclickOutside:false});}// Step 4 - Add processed object to group
// ======================================
self.group.push(obj);});},// Attach an event handler functions for:
//   - navigation buttons
//   - browser scrolling, resizing;
//   - focusing
//   - keyboard
//   - detect idle
// ======================================
addEvents:function addEvents(){var self=this;self.removeEvents();// Make navigation elements clickable
self.$refs.container.on('click.fb-close','[data-fancybox-close]',function(e){e.stopPropagation();e.preventDefault();self.close(e);}).on('click.fb-prev touchend.fb-prev','[data-fancybox-prev]',function(e){e.stopPropagation();e.preventDefault();self.previous();}).on('click.fb-next touchend.fb-next','[data-fancybox-next]',function(e){e.stopPropagation();e.preventDefault();self.next();}).on('click.fb','[data-fancybox-zoom]',function(e){// Click handler for zoom button
self[self.isScaledDown()?'scaleToActual':'scaleToFit']();});// Handle page scrolling and browser resizing
$W.on('orientationchange.fb resize.fb',function(e){if(e&&e.originalEvent&&e.originalEvent.type==="resize"){requestAFrame(function(){self.update();});}else{self.$refs.stage.hide();setTimeout(function(){self.$refs.stage.show();self.update();},600);}});// Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal
// (a.k.a. "escaping the modal")
$D.on('focusin.fb',function(e){var instance=$.fancybox?$.fancybox.getInstance():null;if(instance.isClosing||!instance.current||!instance.current.opts.trapFocus||$(e.target).hasClass('fancybox-container')||$(e.target).is(document)){return;}if(instance&&$(e.target).css('position')!=='fixed'&&!instance.$refs.container.has(e.target).length){e.stopPropagation();instance.focus();// Sometimes page gets scrolled, set it back
$W.scrollTop(self.scrollTop).scrollLeft(self.scrollLeft);}});// Enable keyboard navigation
$D.on('keydown.fb',function(e){var current=self.current,keycode=e.keyCode||e.which;if(!current||!current.opts.keyboard){return;}if($(e.target).is('input')||$(e.target).is('textarea')){return;}// Backspace and Esc keys
if(keycode===8||keycode===27){e.preventDefault();self.close(e);return;}// Left arrow and Up arrow
if(keycode===37||keycode===38){e.preventDefault();self.previous();return;}// Righ arrow and Down arrow
if(keycode===39||keycode===40){e.preventDefault();self.next();return;}self.trigger('afterKeydown',e,keycode);});// Hide controls after some inactivity period
if(self.group[self.currIndex].opts.idleTime){self.idleSecondsCounter=0;$D.on('mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle',function(e){self.idleSecondsCounter=0;if(self.isIdle){self.showControls();}self.isIdle=false;});self.idleInterval=window.setInterval(function(){self.idleSecondsCounter++;if(self.idleSecondsCounter>=self.group[self.currIndex].opts.idleTime&&!self.isDragging){self.isIdle=true;self.idleSecondsCounter=0;self.hideControls();}},1000);}},// Remove events added by the core
// ===============================
removeEvents:function removeEvents(){var self=this;$W.off('orientationchange.fb resize.fb');$D.off('focusin.fb keydown.fb .fb-idle');this.$refs.container.off('.fb-close .fb-prev .fb-next');if(self.idleInterval){window.clearInterval(self.idleInterval);self.idleInterval=null;}},// Change to previous gallery item
// ===============================
previous:function previous(duration){return this.jumpTo(this.currPos-1,duration);},// Change to next gallery item
// ===========================
next:function next(duration){return this.jumpTo(this.currPos+1,duration);},// Switch to selected gallery item
// ===============================
jumpTo:function jumpTo(pos,duration,slide){var self=this,firstRun,loop,current,previous,canvasWidth,currentPos,transitionProps;var groupLen=self.group.length;if(self.isDragging||self.isClosing||self.isAnimating&&self.firstRun){return;}pos=parseInt(pos,10);loop=self.current?self.current.opts.loop:self.opts.loop;if(!loop&&(pos<0||pos>=groupLen)){return false;}firstRun=self.firstRun=self.firstRun===null;if(groupLen<2&&!firstRun&&!!self.isDragging){return;}previous=self.current;self.prevIndex=self.currIndex;self.prevPos=self.currPos;// Create slides
current=self.createSlide(pos);if(groupLen>1){if(loop||current.index>0){self.createSlide(pos-1);}if(loop||current.index<groupLen-1){self.createSlide(pos+1);}}self.current=current;self.currIndex=current.index;self.currPos=current.pos;self.trigger('beforeShow',firstRun);self.updateControls();currentPos=$.fancybox.getTranslate(current.$slide);current.isMoved=(currentPos.left!==0||currentPos.top!==0)&&!current.$slide.hasClass('fancybox-animated');current.forcedDuration=undefined;if($.isNumeric(duration)){current.forcedDuration=duration;}else{duration=current.opts[firstRun?'animationDuration':'transitionDuration'];}duration=parseInt(duration,10);// Fresh start - reveal container, current slide and start loading content
if(firstRun){if(current.opts.animationEffect&&duration){self.$refs.container.css('transition-duration',duration+'ms');}self.$refs.container.removeClass('fancybox-is-hidden');forceRedraw(self.$refs.container);self.$refs.container.addClass('fancybox-is-open');// Make first slide visible (to display loading icon, if needed)
current.$slide.addClass('fancybox-slide--current');self.loadSlide(current);self.preload('image');return;}// Clean up
$.each(self.slides,function(index,slide){$.fancybox.stop(slide.$slide);});// Make current that slide is visible even if content is still loading
current.$slide.removeClass('fancybox-slide--next fancybox-slide--previous').addClass('fancybox-slide--current');// If slides have been dragged, animate them to correct position
if(current.isMoved){canvasWidth=Math.round(current.$slide.width());$.each(self.slides,function(index,slide){var pos=slide.pos-current.pos;$.fancybox.animate(slide.$slide,{top:0,left:pos*canvasWidth+pos*slide.opts.gutter},duration,function(){slide.$slide.removeAttr('style').removeClass('fancybox-slide--next fancybox-slide--previous');if(slide.pos===self.currPos){current.isMoved=false;self.complete();}});});}else{self.$refs.stage.children().removeAttr('style');}// Start transition that reveals current content
// or wait when it will be loaded
if(current.isLoaded){self.revealContent(current);}else{self.loadSlide(current);}self.preload('image');if(previous.pos===current.pos){return;}// Handle previous slide
// =====================
transitionProps='fancybox-slide--'+(previous.pos>current.pos?'next':'previous');previous.$slide.removeClass('fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous');previous.isComplete=false;if(!duration||!current.isMoved&&!current.opts.transitionEffect){return;}if(current.isMoved){previous.$slide.addClass(transitionProps);}else{transitionProps='fancybox-animated '+transitionProps+' fancybox-fx-'+current.opts.transitionEffect;$.fancybox.animate(previous.$slide,transitionProps,duration,function(){previous.$slide.removeClass(transitionProps).removeAttr('style');});}},// Create new "slide" element
// These are gallery items  that are actually added to DOM
// =======================================================
createSlide:function createSlide(pos){var self=this;var $slide;var index;index=pos%self.group.length;index=index<0?self.group.length+index:index;if(!self.slides[pos]&&self.group[index]){$slide=$('<div class="fancybox-slide"></div>').appendTo(self.$refs.stage);self.slides[pos]=$.extend(true,{},self.group[index],{pos:pos,$slide:$slide,isLoaded:false});self.updateSlide(self.slides[pos]);}return self.slides[pos];},// Scale image to the actual size of the image
// ===========================================
scaleToActual:function scaleToActual(x,y,duration){var self=this;var current=self.current;var $what=current.$content;var imgPos,posX,posY,scaleX,scaleY;var canvasWidth=parseInt(current.$slide.width(),10);var canvasHeight=parseInt(current.$slide.height(),10);var newImgWidth=current.width;var newImgHeight=current.height;if(!(current.type=='image'&&!current.hasError)||!$what||self.isAnimating){return;}$.fancybox.stop($what);self.isAnimating=true;x=x===undefined?canvasWidth*0.5:x;y=y===undefined?canvasHeight*0.5:y;imgPos=$.fancybox.getTranslate($what);scaleX=newImgWidth/imgPos.width;scaleY=newImgHeight/imgPos.height;// Get center position for original image
posX=canvasWidth*0.5-newImgWidth*0.5;posY=canvasHeight*0.5-newImgHeight*0.5;// Make sure image does not move away from edges
if(newImgWidth>canvasWidth){posX=imgPos.left*scaleX-(x*scaleX-x);if(posX>0){posX=0;}if(posX<canvasWidth-newImgWidth){posX=canvasWidth-newImgWidth;}}if(newImgHeight>canvasHeight){posY=imgPos.top*scaleY-(y*scaleY-y);if(posY>0){posY=0;}if(posY<canvasHeight-newImgHeight){posY=canvasHeight-newImgHeight;}}self.updateCursor(newImgWidth,newImgHeight);$.fancybox.animate($what,{top:posY,left:posX,scaleX:scaleX,scaleY:scaleY},duration||330,function(){self.isAnimating=false;});// Stop slideshow
if(self.SlideShow&&self.SlideShow.isActive){self.SlideShow.stop();}},// Scale image to fit inside parent element
// ========================================
scaleToFit:function scaleToFit(duration){var self=this;var current=self.current;var $what=current.$content;var end;if(!(current.type=='image'&&!current.hasError)||!$what||self.isAnimating){return;}$.fancybox.stop($what);self.isAnimating=true;end=self.getFitPos(current);self.updateCursor(end.width,end.height);$.fancybox.animate($what,{top:end.top,left:end.left,scaleX:end.width/$what.width(),scaleY:end.height/$what.height()},duration||330,function(){self.isAnimating=false;});},// Calculate image size to fit inside viewport
// ===========================================
getFitPos:function getFitPos(slide){var self=this;var $what=slide.$content;var imgWidth=slide.width;var imgHeight=slide.height;var margin=slide.opts.margin;var canvasWidth,canvasHeight,minRatio,width,height;if(!$what||!$what.length||!imgWidth&&!imgHeight){return false;}// Convert "margin to CSS style: [ top, right, bottom, left ]
if($.type(margin)==="number"){margin=[margin,margin];}if(margin.length==2){margin=[margin[0],margin[1],margin[0],margin[1]];}// We can not use $slide width here, because it can have different diemensions while in transiton
canvasWidth=parseInt(self.$refs.stage.width(),10)-(margin[1]+margin[3]);canvasHeight=parseInt(self.$refs.stage.height(),10)-(margin[0]+margin[2]);minRatio=Math.min(1,canvasWidth/imgWidth,canvasHeight/imgHeight);width=Math.floor(minRatio*imgWidth);height=Math.floor(minRatio*imgHeight);// Use floor rounding to make sure it really fits
return{top:Math.floor((canvasHeight-height)*0.5)+margin[0],left:Math.floor((canvasWidth-width)*0.5)+margin[3],width:width,height:height};},// Update content size and position for all slides
// ==============================================
update:function update(){var self=this;$.each(self.slides,function(key,slide){self.updateSlide(slide);});},// Update slide content position and size
// ======================================
updateSlide:function updateSlide(slide,duration){var self=this,$what=slide&&slide.$content;if($what&&(slide.width||slide.height)){self.isAnimating=false;$.fancybox.stop($what);$.fancybox.setTranslate($what,self.getFitPos(slide));if(slide.pos===self.currPos){self.updateCursor();}}slide.$slide.trigger('refresh');self.trigger('onUpdate',slide);},// Horizontally center slide
// =========================
centerSlide:function centerSlide(slide,duration){var self=this,canvasWidth,pos;if(self.current){canvasWidth=Math.round(slide.$slide.width());pos=slide.pos-self.current.pos;$.fancybox.animate(slide.$slide,{top:0,left:pos*canvasWidth+pos*slide.opts.gutter,opacity:1},duration===undefined?0:duration,null,false);}},// Update cursor style depending if content can be zoomed
// ======================================================
updateCursor:function updateCursor(nextWidth,nextHeight){var self=this;var isScaledDown;var $container=self.$refs.container.removeClass('fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut');if(!self.current||self.isClosing){return;}if(self.isZoomable()){$container.addClass('fancybox-is-zoomable');if(nextWidth!==undefined&&nextHeight!==undefined){isScaledDown=nextWidth<self.current.width&&nextHeight<self.current.height;}else{isScaledDown=self.isScaledDown();}if(isScaledDown){// If image is scaled down, then, obviously, it can be zoomed to full size
$container.addClass('fancybox-can-zoomIn');}else{if(self.current.opts.touch){// If image size ir largen than available available and touch module is not disable,
// then user can do panning
$container.addClass('fancybox-can-drag');}else{$container.addClass('fancybox-can-zoomOut');}}}else if(self.current.opts.touch){$container.addClass('fancybox-can-drag');}},// Check if current slide is zoomable
// ==================================
isZoomable:function isZoomable(){var self=this;var current=self.current;var fitPos;if(!current||self.isClosing){return;}// Assume that slide is zoomable if
//   - image is loaded successfuly
//   - click action is "zoom"
//   - actual size of the image is smaller than available area
if(current.type==='image'&&current.isLoaded&&!current.hasError&&(current.opts.clickContent==='zoom'||$.isFunction(current.opts.clickContent)&&current.opts.clickContent(current)==="zoom")){fitPos=self.getFitPos(current);if(current.width>fitPos.width||current.height>fitPos.height){return true;}}return false;},// Check if current image dimensions are smaller than actual
// =========================================================
isScaledDown:function isScaledDown(){var self=this;var current=self.current;var $what=current.$content;var rez=false;if($what){rez=$.fancybox.getTranslate($what);rez=rez.width<current.width||rez.height<current.height;}return rez;},// Check if image dimensions exceed parent element
// ===============================================
canPan:function canPan(){var self=this;var current=self.current;var $what=current.$content;var rez=false;if($what){rez=self.getFitPos(current);rez=Math.abs($what.width()-rez.width)>1||Math.abs($what.height()-rez.height)>1;}return rez;},// Load content into the slide
// ===========================
loadSlide:function loadSlide(slide){var self=this,type,$slide;var ajaxLoad;if(slide.isLoading){return;}if(slide.isLoaded){return;}slide.isLoading=true;self.trigger('beforeLoad',slide);type=slide.type;$slide=slide.$slide;$slide.off('refresh').trigger('onReset').addClass('fancybox-slide--'+(type||'unknown')).addClass(slide.opts.slideClass);// Create content depending on the type
switch(type){case'image':self.setImage(slide);break;case'iframe':self.setIframe(slide);break;case'html':self.setContent(slide,slide.src||slide.content);break;case'inline':if($(slide.src).length){self.setContent(slide,$(slide.src));}else{self.setError(slide);}break;case'ajax':self.showLoading(slide);ajaxLoad=$.ajax($.extend({},slide.opts.ajax.settings,{url:slide.src,success:function success(data,textStatus){if(textStatus==='success'){self.setContent(slide,data);}},error:function error(jqXHR,textStatus){if(jqXHR&&textStatus!=='abort'){self.setError(slide);}}}));$slide.one('onReset',function(){ajaxLoad.abort();});break;case'video':self.setContent(slide,'<video controls>'+'<source src="'+slide.src+'" type="'+slide.opts.videoFormat+'">'+'Your browser doesn\'t support HTML5 video'+'</video>');break;default:self.setError(slide);break;}return true;},// Use thumbnail image, if possible
// ================================
setImage:function setImage(slide){var self=this;var srcset=slide.opts.srcset||slide.opts.image.srcset;var found,temp,pxRatio,windowWidth;// If we have "srcset", then we need to find matching "src" value.
// This is necessary, because when you set an src attribute, the browser will preload the image
// before any javascript or even CSS is applied.
if(srcset){pxRatio=window.devicePixelRatio||1;windowWidth=window.innerWidth*pxRatio;temp=srcset.split(',').map(function(el){var ret={};el.trim().split(/\s+/).forEach(function(el,i){var value=parseInt(el.substring(0,el.length-1),10);if(i===0){return ret.url=el;}if(value){ret.value=value;ret.postfix=el[el.length-1];}});return ret;});// Sort by value
temp.sort(function(a,b){return a.value-b.value;});// Ok, now we have an array of all srcset values
for(var j=0;j<temp.length;j++){var el=temp[j];if(el.postfix==='w'&&el.value>=windowWidth||el.postfix==='x'&&el.value>=pxRatio){found=el;break;}}// If not found, take the last one
if(!found&&temp.length){found=temp[temp.length-1];}if(found){slide.src=found.url;// If we have default width/height values, we can calculate height for matching source
if(slide.width&&slide.height&&found.postfix=='w'){slide.height=slide.width/slide.height*found.value;slide.width=found.value;}}}// This will be wrapper containing both ghost and actual image
slide.$content=$('<div class="fancybox-image-wrap"></div>').addClass('fancybox-is-hidden').appendTo(slide.$slide);// If we have a thumbnail, we can display it while actual image is loading
// Users will not stare at black screen and actual image will appear gradually
if(slide.opts.preload!==false&&slide.opts.width&&slide.opts.height&&(slide.opts.thumb||slide.opts.$thumb)){slide.width=slide.opts.width;slide.height=slide.opts.height;slide.$ghost=$('<img />').one('error',function(){$(this).remove();slide.$ghost=null;self.setBigImage(slide);}).one('load',function(){self.afterLoad(slide);self.setBigImage(slide);}).addClass('fancybox-image').appendTo(slide.$content).attr('src',slide.opts.thumb||slide.opts.$thumb.attr('src'));}else{self.setBigImage(slide);}},// Create full-size image
// ======================
setBigImage:function setBigImage(slide){var self=this;var $img=$('<img />');slide.$image=$img.one('error',function(){self.setError(slide);}).one('load',function(){// Clear timeout that checks if loading icon needs to be displayed
clearTimeout(slide.timouts);slide.timouts=null;if(self.isClosing){return;}slide.width=slide.opts.width||this.naturalWidth;slide.height=slide.opts.height||this.naturalHeight;if(slide.opts.image.srcset){$img.attr('sizes','100vw').attr('srcset',slide.opts.image.srcset);}self.hideLoading(slide);if(slide.$ghost){slide.timouts=setTimeout(function(){slide.timouts=null;slide.$ghost.hide();},Math.min(300,Math.max(1000,slide.height/1600)));}else{self.afterLoad(slide);}}).addClass('fancybox-image').attr('src',slide.src).appendTo(slide.$content);if(($img[0].complete||$img[0].readyState=="complete")&&$img[0].naturalWidth&&$img[0].naturalHeight){$img.trigger('load');}else if($img[0].error){$img.trigger('error');}else{slide.timouts=setTimeout(function(){if(!$img[0].complete&&!slide.hasError){self.showLoading(slide);}},100);}},// Create iframe wrapper, iframe and bindings
// ==========================================
setIframe:function setIframe(slide){var self=this,opts=slide.opts.iframe,$slide=slide.$slide,$iframe;slide.$content=$('<div class="fancybox-content'+(opts.preload?' fancybox-is-hidden':'')+'"></div>').css(opts.css).appendTo($slide);$iframe=$(opts.tpl.replace(/\{rnd\}/g,new Date().getTime())).attr(opts.attr).appendTo(slide.$content);if(opts.preload){self.showLoading(slide);// Unfortunately, it is not always possible to determine if iframe is successfully loaded
// (due to browser security policy)
$iframe.on('load.fb error.fb',function(e){this.isReady=1;slide.$slide.trigger('refresh');self.afterLoad(slide);});// Recalculate iframe content size
// ===============================
$slide.on('refresh.fb',function(){var $wrap=slide.$content,frameWidth=opts.css.width,frameHeight=opts.css.height,scrollWidth,$contents,$body;if($iframe[0].isReady!==1){return;}// Check if content is accessible,
// it will fail if frame is not with the same origin
try{$contents=$iframe.contents();$body=$contents.find('body');}catch(ignore){}// Calculate dimensions for the wrapper
if($body&&$body.length){if(frameWidth===undefined){scrollWidth=$iframe[0].contentWindow.document.documentElement.scrollWidth;frameWidth=Math.ceil($body.outerWidth(true)+($wrap.width()-scrollWidth));frameWidth+=$wrap.outerWidth()-$wrap.innerWidth();}if(frameHeight===undefined){frameHeight=Math.ceil($body.outerHeight(true));frameHeight+=$wrap.outerHeight()-$wrap.innerHeight();}// Resize wrapper to fit iframe content
if(frameWidth){$wrap.width(frameWidth);}if(frameHeight){$wrap.height(frameHeight);}}$wrap.removeClass('fancybox-is-hidden');});}else{this.afterLoad(slide);}$iframe.attr('src',slide.src);if(slide.opts.smallBtn===true){slide.$content.prepend(self.translate(slide,slide.opts.btnTpl.smallBtn));}// Remove iframe if closing or changing gallery item
$slide.one('onReset',function(){// This helps IE not to throw errors when closing
try{$(this).find('iframe').hide().attr('src','//about:blank');}catch(ignore){}$(this).empty();slide.isLoaded=false;});},// Wrap and append content to the slide
// ======================================
setContent:function setContent(slide,content){var self=this;if(self.isClosing){return;}self.hideLoading(slide);slide.$slide.empty();if(isQuery(content)&&content.parent().length){// If content is a jQuery object, then it will be moved to the slide.
// The placeholder is created so we will know where to put it back.
// If user is navigating gallery fast, then the content might be already inside fancyBox
// =====================================================================================
// Make sure content is not already moved to fancyBox
content.parent('.fancybox-slide--inline').trigger('onReset');// Create temporary element marking original place of the content
slide.$placeholder=$('<div></div>').hide().insertAfter(content);// Make sure content is visible
content.css('display','inline-block');}else if(!slide.hasError){// If content is just a plain text, try to convert it to html
if($.type(content)==='string'){content=$('<div>').append($.trim(content)).contents();// If we have text node, then add wrapping element to make vertical alignment work
if(content[0].nodeType===3){content=$('<div>').html(content);}}// If "filter" option is provided, then filter content
if(slide.opts.filter){content=$('<div>').html(content).find(slide.opts.filter);}}slide.$slide.one('onReset',function(){// Pause all html5 video/audio
$(this).find('video,audio').trigger('pause');// Put content back
if(slide.$placeholder){slide.$placeholder.after(content.hide()).remove();slide.$placeholder=null;}// Remove custom close button
if(slide.$smallBtn){slide.$smallBtn.remove();slide.$smallBtn=null;}// Remove content and mark slide as not loaded
if(!slide.hasError){$(this).empty();slide.isLoaded=false;}});slide.$content=$(content).appendTo(slide.$slide);this.afterLoad(slide);},// Display error message
// =====================
setError:function setError(slide){slide.hasError=true;slide.$slide.removeClass('fancybox-slide--'+slide.type);this.setContent(slide,this.translate(slide,slide.opts.errorTpl));},// Show loading icon inside the slide
// ==================================
showLoading:function showLoading(slide){var self=this;slide=slide||self.current;if(slide&&!slide.$spinner){slide.$spinner=$(self.opts.spinnerTpl).appendTo(slide.$slide);}},// Remove loading icon from the slide
// ==================================
hideLoading:function hideLoading(slide){var self=this;slide=slide||self.current;if(slide&&slide.$spinner){slide.$spinner.remove();delete slide.$spinner;}},// Adjustments after slide content has been loaded
// ===============================================
afterLoad:function afterLoad(slide){var self=this;if(self.isClosing){return;}slide.isLoading=false;slide.isLoaded=true;self.trigger('afterLoad',slide);self.hideLoading(slide);if(slide.opts.smallBtn&&!slide.$smallBtn){slide.$smallBtn=$(self.translate(slide,slide.opts.btnTpl.smallBtn)).appendTo(slide.$content.filter('div,form').first());}if(slide.opts.protect&&slide.$content&&!slide.hasError){// Disable right click
slide.$content.on('contextmenu.fb',function(e){if(e.button==2){e.preventDefault();}return true;});// Add fake element on top of the image
// This makes a bit harder for user to select image
if(slide.type==='image'){$('<div class="fancybox-spaceball"></div>').appendTo(slide.$content);}}self.revealContent(slide);},// Make content visible
// This method is called right after content has been loaded or
// user navigates gallery and transition should start
// ============================================================
revealContent:function revealContent(slide){var self=this;var $slide=slide.$slide;var effect,effectClassName,duration,opacity,end,start=false;effect=slide.opts[self.firstRun?'animationEffect':'transitionEffect'];duration=slide.opts[self.firstRun?'animationDuration':'transitionDuration'];duration=parseInt(slide.forcedDuration===undefined?duration:slide.forcedDuration,10);if(slide.isMoved||slide.pos!==self.currPos||!duration){effect=false;}// Check if can zoom
if(effect==='zoom'&&!(slide.pos===self.currPos&&duration&&slide.type==='image'&&!slide.hasError&&(start=self.getThumbPos(slide)))){effect='fade';}// Zoom animation
// ==============
if(effect==='zoom'){end=self.getFitPos(slide);end.scaleX=end.width/start.width;end.scaleY=end.height/start.height;delete end.width;delete end.height;// Check if we need to animate opacity
opacity=slide.opts.zoomOpacity;if(opacity=='auto'){opacity=Math.abs(slide.width/slide.height-start.width/start.height)>0.1;}if(opacity){start.opacity=0.1;end.opacity=1;}// Draw image at start position
$.fancybox.setTranslate(slide.$content.removeClass('fancybox-is-hidden'),start);forceRedraw(slide.$content);// Start animation
$.fancybox.animate(slide.$content,end,duration,function(){self.complete();});return;}self.updateSlide(slide);// Simply show content
// ===================
if(!effect){forceRedraw($slide);slide.$content.removeClass('fancybox-is-hidden');if(slide.pos===self.currPos){self.complete();}return;}$.fancybox.stop($slide);effectClassName='fancybox-animated fancybox-slide--'+(slide.pos>=self.prevPos?'next':'previous')+' fancybox-fx-'+effect;$slide.removeAttr('style').removeClass('fancybox-slide--current fancybox-slide--next fancybox-slide--previous').addClass(effectClassName);slide.$content.removeClass('fancybox-is-hidden');//Force reflow for CSS3 transitions
forceRedraw($slide);$.fancybox.animate($slide,'fancybox-slide--current',duration,function(e){$slide.removeClass(effectClassName).removeAttr('style');if(slide.pos===self.currPos){self.complete();}},true);},// Check if we can and have to zoom from thumbnail
//================================================
getThumbPos:function getThumbPos(slide){var self=this;var rez=false;// Check if element is inside the viewport by at least 1 pixel
var isElementVisible=function isElementVisible($el){var element=$el[0];var elementRect=element.getBoundingClientRect();var parentRects=[];var visibleInAllParents;while(element.parentElement!==null){if($(element.parentElement).css('overflow')==='hidden'||$(element.parentElement).css('overflow')==='auto'){parentRects.push(element.parentElement.getBoundingClientRect());}element=element.parentElement;}visibleInAllParents=parentRects.every(function(parentRect){var visiblePixelX=Math.min(elementRect.right,parentRect.right)-Math.max(elementRect.left,parentRect.left);var visiblePixelY=Math.min(elementRect.bottom,parentRect.bottom)-Math.max(elementRect.top,parentRect.top);return visiblePixelX>0&&visiblePixelY>0;});return visibleInAllParents&&elementRect.bottom>0&&elementRect.right>0&&elementRect.left<$(window).width()&&elementRect.top<$(window).height();};var $thumb=slide.opts.$thumb;var thumbPos=$thumb?$thumb.offset():0;var slidePos;if(thumbPos&&$thumb[0].ownerDocument===document&&isElementVisible($thumb)){slidePos=self.$refs.stage.offset();rez={top:thumbPos.top-slidePos.top+parseFloat($thumb.css("border-top-width")||0),left:thumbPos.left-slidePos.left+parseFloat($thumb.css("border-left-width")||0),width:$thumb.width(),height:$thumb.height(),scaleX:1,scaleY:1};}return rez;},// Final adjustments after current gallery item is moved to position
// and it`s content is loaded
// ==================================================================
complete:function complete(){var self=this,current=self.current,slides={},promise;if(current.isMoved||!current.isLoaded||current.isComplete){return;}current.isComplete=true;current.$slide.siblings().trigger('onReset');self.preload('inline');// Trigger any CSS3 transiton inside the slide
forceRedraw(current.$slide);current.$slide.addClass('fancybox-slide--complete');// Remove unnecessary slides
$.each(self.slides,function(key,slide){if(slide.pos>=self.currPos-1&&slide.pos<=self.currPos+1){slides[slide.pos]=slide;}else if(slide){$.fancybox.stop(slide.$slide);slide.$slide.off().remove();}});self.slides=slides;self.updateCursor();self.trigger('afterShow');// Play first html5 video/audio
current.$slide.find('video,audio').first().trigger('play');// Try to focus on the first focusable element
if($(document.activeElement).is('[disabled]')||current.opts.autoFocus&&!(current.type=='image'||current.type==='iframe')){self.focus();}},// Preload next and previous slides
// ================================
preload:function preload(type){var self=this,next=self.slides[self.currPos+1],prev=self.slides[self.currPos-1];if(next&&next.type===type){self.loadSlide(next);}if(prev&&prev.type===type){self.loadSlide(prev);}},// Try to find and focus on the first focusable element
// ====================================================
focus:function focus(){var current=this.current;var $el;if(this.isClosing){return;}if(current&&current.isComplete){// Look for first input with autofocus attribute
$el=current.$slide.find('input[autofocus]:enabled:visible:first');if(!$el.length){$el=current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');}}$el=$el&&$el.length?$el:this.$refs.container;$el.focus();},// Activates current instance - brings container to the front and enables keyboard,
// notifies other instances about deactivating
// =================================================================================
activate:function activate(){var self=this;// Deactivate all instances
$('.fancybox-container').each(function(){var instance=$(this).data('FancyBox');// Skip self and closing instances
if(instance&&instance.id!==self.id&&!instance.isClosing){instance.trigger('onDeactivate');instance.removeEvents();instance.isVisible=false;}});self.isVisible=true;if(self.current||self.isIdle){self.update();self.updateControls();}self.trigger('onActivate');self.addEvents();},// Start closing procedure
// This will start "zoom-out" animation if needed and clean everything up afterwards
// =================================================================================
close:function close(e,d){var self=this;var current=self.current;var effect,duration;var $what,opacity,start,end;var done=function done(){self.cleanUp(e);};if(self.isClosing){return false;}self.isClosing=true;// If beforeClose callback prevents closing, make sure content is centered
if(self.trigger('beforeClose',e)===false){self.isClosing=false;requestAFrame(function(){self.update();});return false;}// Remove all events
// If there are multiple instances, they will be set again by "activate" method
self.removeEvents();if(current.timouts){clearTimeout(current.timouts);}$what=current.$content;effect=current.opts.animationEffect;duration=$.isNumeric(d)?d:effect?current.opts.animationDuration:0;// Remove other slides
current.$slide.off(transitionEnd).removeClass('fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated');current.$slide.siblings().trigger('onReset').remove();// Trigger animations
if(duration){self.$refs.container.removeClass('fancybox-is-open').addClass('fancybox-is-closing');}// Clean up
self.hideLoading(current);self.hideControls();self.updateCursor();// Check if possible to zoom-out
if(effect==='zoom'&&!(e!==true&&$what&&duration&&current.type==='image'&&!current.hasError&&(end=self.getThumbPos(current)))){effect='fade';}if(effect==='zoom'){$.fancybox.stop($what);start=$.fancybox.getTranslate($what);start.width=start.width*start.scaleX;start.height=start.height*start.scaleY;// Check if we need to animate opacity
opacity=current.opts.zoomOpacity;if(opacity=='auto'){opacity=Math.abs(current.width/current.height-end.width/end.height)>0.1;}if(opacity){end.opacity=0;}start.scaleX=start.width/end.width;start.scaleY=start.height/end.height;start.width=end.width;start.height=end.height;$.fancybox.setTranslate(current.$content,start);forceRedraw(current.$content);$.fancybox.animate(current.$content,end,duration,done);return true;}if(effect&&duration){// If skip animation
if(e===true){setTimeout(done,duration);}else{$.fancybox.animate(current.$slide.removeClass('fancybox-slide--current'),'fancybox-animated fancybox-slide--previous fancybox-fx-'+effect,duration,done);}}else{done();}return true;},// Final adjustments after removing the instance
// =============================================
cleanUp:function cleanUp(e){var self=this,$body=$('body'),instance,offset;self.current.$slide.trigger('onReset');self.$refs.container.empty().remove();self.trigger('afterClose',e);// Place back focus
if(self.$lastFocus&&!!self.current.opts.backFocus){self.$lastFocus.focus();}self.current=null;// Check if there are other instances
instance=$.fancybox.getInstance();if(instance){instance.activate();}else{$W.scrollTop(self.scrollTop).scrollLeft(self.scrollLeft);$body.removeClass('fancybox-active compensate-for-scrollbar');if($body.hasClass('fancybox-iosfix')){offset=parseInt(document.body.style.top,10);$body.removeClass('fancybox-iosfix').css('top','').scrollTop(offset*-1);}$('#fancybox-style-noscroll').remove();}},// Call callback and trigger an event
// ==================================
trigger:function trigger(name,slide){var args=Array.prototype.slice.call(arguments,1),self=this,obj=slide&&slide.opts?slide:self.current,rez;if(obj){args.unshift(obj);}else{obj=self;}args.unshift(self);if($.isFunction(obj.opts[name])){rez=obj.opts[name].apply(obj,args);}if(rez===false){return rez;}if(name==='afterClose'||!self.$refs){$D.trigger(name+'.fb',args);}else{self.$refs.container.trigger(name+'.fb',args);}},// Update infobar values, navigation button states and reveal caption
// ==================================================================
updateControls:function updateControls(force){var self=this;var current=self.current,index=current.index,caption=current.opts.caption,$container=self.$refs.container,$caption=self.$refs.caption;// Recalculate content dimensions
current.$slide.trigger('refresh');self.$caption=caption&&caption.length?$caption.html(caption):null;if(!self.isHiddenControls&&!self.isIdle){self.showControls();}// Update info and navigation elements
$container.find('[data-fancybox-count]').html(self.group.length);$container.find('[data-fancybox-index]').html(index+1);$container.find('[data-fancybox-prev]').prop('disabled',!current.opts.loop&&index<=0);$container.find('[data-fancybox-next]').prop('disabled',!current.opts.loop&&index>=self.group.length-1);if(current.type==='image'){// Update download button source
$container.find('[data-fancybox-download]').attr('href',current.opts.image.src||current.src).show();}else{$container.find('[data-fancybox-download],[data-fancybox-zoom]').hide();}},// Hide toolbar and caption
// ========================
hideControls:function hideControls(){this.isHiddenControls=true;this.$refs.container.removeClass('fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav');},showControls:function showControls(){var self=this;var opts=self.current?self.current.opts:self.opts;var $container=self.$refs.container;self.isHiddenControls=false;self.idleSecondsCounter=0;$container.toggleClass('fancybox-show-toolbar',!!(opts.toolbar&&opts.buttons)).toggleClass('fancybox-show-infobar',!!(opts.infobar&&self.group.length>1)).toggleClass('fancybox-show-nav',!!(opts.arrows&&self.group.length>1)).toggleClass('fancybox-is-modal',!!opts.modal);if(self.$caption){$container.addClass('fancybox-show-caption ');}else{$container.removeClass('fancybox-show-caption');}},// Toggle toolbar and caption
// ==========================
toggleControls:function toggleControls(){if(this.isHiddenControls){this.showControls();}else{this.hideControls();}}});$.fancybox={version:"3.2.10",defaults:defaults,// Get current instance and execute a command.
//
// Examples of usage:
//
//   $instance = $.fancybox.getInstance();
//   $.fancybox.getInstance().jumpTo( 1 );
//   $.fancybox.getInstance( 'jumpTo', 1 );
//   $.fancybox.getInstance( function() {
//       console.info( this.currIndex );
//   });
// ======================================================
getInstance:function getInstance(command){var instance=$('.fancybox-container:not(".fancybox-is-closing"):last').data('FancyBox');var args=Array.prototype.slice.call(arguments,1);if(instance instanceof FancyBox){if($.type(command)==='string'){instance[command].apply(instance,args);}else if($.type(command)==='function'){command.apply(instance,args);}return instance;}return false;},// Create new instance
// ===================
open:function open(items,opts,index){return new FancyBox(items,opts,index);},// Close current or all instances
// ==============================
close:function close(all){var instance=this.getInstance();if(instance){instance.close();// Try to find and close next instance
if(all===true){this.close();}}},// Close instances and unbind all events
// ==============================
destroy:function destroy(){this.close(true);$D.off('click.fb-start');},// Try to detect mobile devices
// ============================
isMobile:document.createTouch!==undefined&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),// Detect if 'translate3d' support is available
// ============================================
use3d:function(){var div=document.createElement('div');return window.getComputedStyle&&window.getComputedStyle(div).getPropertyValue('transform')&&!(document.documentMode&&document.documentMode<11);}(),// Helper function to get current visual state of an element
// returns array[ top, left, horizontal-scale, vertical-scale, opacity ]
// =====================================================================
getTranslate:function getTranslate($el){var matrix;if(!$el||!$el.length){return false;}matrix=$el.eq(0).css('transform');if(matrix&&matrix.indexOf('matrix')!==-1){matrix=matrix.split('(')[1];matrix=matrix.split(')')[0];matrix=matrix.split(',');}else{matrix=[];}if(matrix.length){// If IE
if(matrix.length>10){matrix=[matrix[13],matrix[12],matrix[0],matrix[5]];}else{matrix=[matrix[5],matrix[4],matrix[0],matrix[3]];}matrix=matrix.map(parseFloat);}else{matrix=[0,0,1,1];var transRegex=/\.*translate\((.*)px,(.*)px\)/i;var transRez=transRegex.exec($el.eq(0).attr('style'));if(transRez){matrix[0]=parseFloat(transRez[2]);matrix[1]=parseFloat(transRez[1]);}}return{top:matrix[0],left:matrix[1],scaleX:matrix[2],scaleY:matrix[3],opacity:parseFloat($el.css('opacity')),width:$el.width(),height:$el.height()};},// Shortcut for setting "translate3d" properties for element
// Can set be used to set opacity, too
// ========================================================
setTranslate:function setTranslate($el,props){var str='';var css={};if(!$el||!props){return;}if(props.left!==undefined||props.top!==undefined){str=(props.left===undefined?$el.position().left:props.left)+'px, '+(props.top===undefined?$el.position().top:props.top)+'px';if(this.use3d){str='translate3d('+str+', 0px)';}else{str='translate('+str+')';}}if(props.scaleX!==undefined&&props.scaleY!==undefined){str=(str.length?str+' ':'')+'scale('+props.scaleX+', '+props.scaleY+')';}if(str.length){css.transform=str;}if(props.opacity!==undefined){css.opacity=props.opacity;}if(props.width!==undefined){css.width=props.width;}if(props.height!==undefined){css.height=props.height;}return $el.css(css);},// Simple CSS transition handler
// =============================
animate:function animate($el,to,duration,callback,leaveAnimationName){if($.isFunction(duration)){callback=duration;duration=null;}if(!$.isPlainObject(to)){$el.removeAttr('style');}$el.on(transitionEnd,function(e){// Skip events from child elements and z-index change
if(e&&e.originalEvent&&(!$el.is(e.originalEvent.target)||e.originalEvent.propertyName=='z-index')){return;}$.fancybox.stop($el);if($.isPlainObject(to)){if(to.scaleX!==undefined&&to.scaleY!==undefined){$el.css('transition-duration','');to.width=Math.round($el.width()*to.scaleX);to.height=Math.round($el.height()*to.scaleY);to.scaleX=1;to.scaleY=1;$.fancybox.setTranslate($el,to);}if(leaveAnimationName===false){$el.removeAttr('style');}}else if(leaveAnimationName!==true){$el.removeClass(to);}if($.isFunction(callback)){callback(e);}});if($.isNumeric(duration)){$el.css('transition-duration',duration+'ms');}if($.isPlainObject(to)){$.fancybox.setTranslate($el,to);}else{$el.addClass(to);}if(to.scaleX&&$el.hasClass('fancybox-image-wrap')){$el.parent().addClass('fancybox-is-scaling');}// Make sure that `transitionend` callback gets fired
$el.data("timer",setTimeout(function(){$el.trigger('transitionend');},duration+16));},stop:function stop($el){clearTimeout($el.data("timer"));$el.off('transitionend').css('transition-duration','');if($el.hasClass('fancybox-image-wrap')){$el.parent().removeClass('fancybox-is-scaling');}}};// Default click handler for "fancyboxed" links
// ============================================
function _run(e){var $target=$(e.currentTarget),opts=e.data?e.data.options:{},value=$target.attr('data-fancybox')||'',index=0,items=[];// Avoid opening multiple times
if(e.isDefaultPrevented()){return;}e.preventDefault();// Get all related items and find index for clicked one
if(value){items=opts.selector?$(opts.selector):e.data?e.data.items:[];items=items.length?items.filter('[data-fancybox="'+value+'"]'):$('[data-fancybox="'+value+'"]');index=items.index($target);// Sometimes current item can not be found
// (for example, when slider clones items)
if(index<0){index=0;}}else{items=[$target];}$.fancybox.open(items,opts,index);}// Create a jQuery plugin
// ======================
$.fn.fancybox=function(options){var selector;options=options||{};selector=options.selector||false;if(selector){$('body').off('click.fb-start',selector).on('click.fb-start',selector,{options:options},_run);}else{this.off('click.fb-start').on('click.fb-start',{items:this,options:options},_run);}return this;};// Self initializing plugin
// ========================
$D.on('click.fb-start','[data-fancybox]',_run);})(window,document,window.jQuery||jQuery);// ==========================================================================
//
// Media
// Adds additional media type support
//
// ==========================================================================
;(function($){'use strict';// Formats matching url to final form
var format=function format(url,rez,params){if(!url){return;}params=params||'';if($.type(params)==="object"){params=$.param(params,true);}$.each(rez,function(key,value){url=url.replace('$'+key,value||'');});if(params.length){url+=(url.indexOf('?')>0?'&':'?')+params;}return url;};// Object containing properties for each media type
var defaults={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:'transparent',enablejsapi:1,html5:1},paramPlace:8,type:'iframe',url:'//www.youtube.com/embed/$4',thumb:'//img.youtube.com/vi/$4/hqdefault.jpg'},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1},paramPlace:3,type:'iframe',url:'//player.vimeo.com/video/$2'},metacafe:{matcher:/metacafe.com\/watch\/(\d+)\/(.*)?/,type:'iframe',url:'//www.metacafe.com/embed/$1/?ap=1'},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:'iframe',url:'//www.dailymotion.com/embed/video/$1'},vine:{matcher:/vine.co\/v\/([a-zA-Z0-9\?\=\-]+)/,type:'iframe',url:'//vine.co/v/$1/embed/simple'},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:'image',url:'//$1/p/$2/media/?size=l'},// Examples:
// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16
// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z
// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572
gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:'iframe',url:function url(rez){return'//maps.google.'+rez[2]+'/?ll='+(rez[9]?rez[9]+'&z='+Math.floor(rez[10])+(rez[12]?rez[12].replace(/^\//,"&"):''):rez[12])+'&output='+(rez[12]&&rez[12].indexOf('layer=c')>0?'svembed':'embed');}},// Examples:
// https://www.google.com/maps/search/Empire+State+Building/
// https://www.google.com/maps/search/?api=1&query=centurylink+field
// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393
gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:'iframe',url:function url(rez){return'//maps.google.'+rez[2]+'/maps?q='+rez[5].replace('query=','q=').replace('api=1','')+'&output=embed';}}};$(document).on('objectNeedsType.fb',function(e,instance,item){var url=item.src||'',type=false,media,thumb,rez,params,urlParams,paramObj,provider;media=$.extend(true,{},defaults,item.opts.media);// Look for any matching media type
$.each(media,function(providerName,providerOpts){rez=url.match(providerOpts.matcher);if(!rez){return;}type=providerOpts.type;paramObj={};if(providerOpts.paramPlace&&rez[providerOpts.paramPlace]){urlParams=rez[providerOpts.paramPlace];if(urlParams[0]=='?'){urlParams=urlParams.substring(1);}urlParams=urlParams.split('&');for(var m=0;m<urlParams.length;++m){var p=urlParams[m].split('=',2);if(p.length==2){paramObj[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "));}}}params=$.extend(true,{},providerOpts.params,item.opts[providerName],paramObj);url=$.type(providerOpts.url)==="function"?providerOpts.url.call(this,rez,params,item):format(providerOpts.url,rez,params);thumb=$.type(providerOpts.thumb)==="function"?providerOpts.thumb.call(this,rez,params,item):format(providerOpts.thumb,rez);if(providerName==='vimeo'){url=url.replace('&%23','#');}return false;});// If it is found, then change content type and update the url
if(type){item.src=url;item.type=type;if(!item.opts.thumb&&!(item.opts.$thumb&&item.opts.$thumb.length)){item.opts.thumb=thumb;}if(type==='iframe'){$.extend(true,item.opts,{iframe:{preload:false,attr:{scrolling:"no"}}});item.contentProvider=provider;item.opts.slideClass+=' fancybox-slide--'+(provider=='gmap_place'||provider=='gmap_search'?'map':'video');}}else if(url){item.type=item.opts.defaultType;}});})(window.jQuery||jQuery);// ==========================================================================
//
// Guestures
// Adds touch guestures, handles click and tap events
//
// ==========================================================================
;(function(window,document,$){'use strict';var requestAFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||// if all else fails, use setTimeout
function(callback){return window.setTimeout(callback,1000/60);};}();var cancelAFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(id){window.clearTimeout(id);};}();var pointers=function pointers(e){var result=[];e=e.originalEvent||e||window.e;e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var key in e){if(e[key].pageX){result.push({x:e[key].pageX,y:e[key].pageY});}else if(e[key].clientX){result.push({x:e[key].clientX,y:e[key].clientY});}}return result;};var distance=function distance(point2,point1,what){if(!point1||!point2){return 0;}if(what==='x'){return point2.x-point1.x;}else if(what==='y'){return point2.y-point1.y;}return Math.sqrt(Math.pow(point2.x-point1.x,2)+Math.pow(point2.y-point1.y,2));};var isClickable=function isClickable($el){if($el.is('a,area,button,[role="button"],input,label,select,summary,textarea')||$.isFunction($el.get(0).onclick)||$el.data('selectable')){return true;}// Check for attributes like data-fancybox-next or data-fancybox-close
for(var i=0,atts=$el[0].attributes,n=atts.length;i<n;i++){if(atts[i].nodeName.substr(0,14)==='data-fancybox-'){return true;}}return false;};var hasScrollbars=function hasScrollbars(el){var overflowY=window.getComputedStyle(el)['overflow-y'];var overflowX=window.getComputedStyle(el)['overflow-x'];var vertical=(overflowY==='scroll'||overflowY==='auto')&&el.scrollHeight>el.clientHeight;var horizontal=(overflowX==='scroll'||overflowX==='auto')&&el.scrollWidth>el.clientWidth;return vertical||horizontal;};var isScrollable=function isScrollable($el){var rez=false;while(true){rez=hasScrollbars($el.get(0));if(rez){break;}$el=$el.parent();if(!$el.length||$el.hasClass('fancybox-stage')||$el.is('body')){break;}}return rez;};var Guestures=function Guestures(instance){var self=this;self.instance=instance;self.$bg=instance.$refs.bg;self.$stage=instance.$refs.stage;self.$container=instance.$refs.container;self.destroy();self.$container.on('touchstart.fb.touch mousedown.fb.touch',$.proxy(self,'ontouchstart'));};Guestures.prototype.destroy=function(){this.$container.off('.fb.touch');};Guestures.prototype.ontouchstart=function(e){var self=this;var $target=$(e.target);var instance=self.instance;var current=instance.current;var $content=current.$content;var isTouchDevice=e.type=='touchstart';// Do not respond to both (touch and mouse) events
if(isTouchDevice){self.$container.off('mousedown.fb.touch');}// Ignore right click
if(e.originalEvent&&e.originalEvent.button==2){return;}// Ignore taping on links, buttons, input elements
if(!$target.length||isClickable($target)||isClickable($target.parent())){return;}// Ignore clicks on the scrollbar
if(!$target.is('img')&&e.originalEvent.clientX>$target[0].clientWidth+$target.offset().left){return;}// Ignore clicks while zooming or closing
if(!current||self.instance.isAnimating||self.instance.isClosing){e.stopPropagation();e.preventDefault();return;}self.realPoints=self.startPoints=pointers(e);if(!self.startPoints){return;}e.stopPropagation();self.startEvent=e;self.canTap=true;self.$target=$target;self.$content=$content;self.opts=current.opts.touch;self.isPanning=false;self.isSwiping=false;self.isZooming=false;self.isScrolling=false;self.sliderStartPos=self.sliderLastPos||{top:0,left:0};self.contentStartPos=$.fancybox.getTranslate(self.$content);self.contentLastPos=null;self.startTime=new Date().getTime();self.distanceX=self.distanceY=self.distance=0;self.canvasWidth=Math.round(current.$slide[0].clientWidth);self.canvasHeight=Math.round(current.$slide[0].clientHeight);$(document).off('.fb.touch').on(isTouchDevice?'touchend.fb.touch touchcancel.fb.touch':'mouseup.fb.touch mouseleave.fb.touch',$.proxy(self,"ontouchend")).on(isTouchDevice?'touchmove.fb.touch':'mousemove.fb.touch',$.proxy(self,"ontouchmove"));if($.fancybox.isMobile){document.addEventListener('scroll',self.onscroll,true);}if(!(self.opts||instance.canPan())||!($target.is(self.$stage)||self.$stage.find($target).length)){// Prevent image ghosting while dragging
if($target.is('img')){e.preventDefault();}return;}if(!($.fancybox.isMobile&&(isScrollable($target)||isScrollable($target.parent())))){e.preventDefault();}if(self.startPoints.length===1){if(current.type==='image'&&(self.contentStartPos.width>self.canvasWidth+1||self.contentStartPos.height>self.canvasHeight+1)){$.fancybox.stop(self.$content);self.$content.css('transition-duration','');self.isPanning=true;}else{self.isSwiping=true;}self.$container.addClass('fancybox-controls--isGrabbing');}if(self.startPoints.length===2&&!instance.isAnimating&&!current.hasError&&current.type==='image'&&(current.isLoaded||current.$ghost)){self.canTap=false;self.isSwiping=false;self.isPanning=false;self.isZooming=true;$.fancybox.stop(self.$content);self.$content.css('transition-duration','');self.centerPointStartX=(self.startPoints[0].x+self.startPoints[1].x)*0.5-$(window).scrollLeft();self.centerPointStartY=(self.startPoints[0].y+self.startPoints[1].y)*0.5-$(window).scrollTop();self.percentageOfImageAtPinchPointX=(self.centerPointStartX-self.contentStartPos.left)/self.contentStartPos.width;self.percentageOfImageAtPinchPointY=(self.centerPointStartY-self.contentStartPos.top)/self.contentStartPos.height;self.startDistanceBetweenFingers=distance(self.startPoints[0],self.startPoints[1]);}};Guestures.prototype.onscroll=function(e){self.isScrolling=true;};Guestures.prototype.ontouchmove=function(e){var self=this,$target=$(e.target);if(self.isScrolling||!($target.is(self.$stage)||self.$stage.find($target).length)){self.canTap=false;return;}self.newPoints=pointers(e);if(!(self.opts||self.instance.canPan())||!self.newPoints||!self.newPoints.length){return;}if(!(self.isSwiping&&self.isSwiping===true)){e.preventDefault();}self.distanceX=distance(self.newPoints[0],self.startPoints[0],'x');self.distanceY=distance(self.newPoints[0],self.startPoints[0],'y');self.distance=distance(self.newPoints[0],self.startPoints[0]);// Skip false ontouchmove events (Chrome)
if(self.distance>0){if(self.isSwiping){self.onSwipe(e);}else if(self.isPanning){self.onPan();}else if(self.isZooming){self.onZoom();}}};Guestures.prototype.onSwipe=function(e){var self=this,swiping=self.isSwiping,left=self.sliderStartPos.left||0,angle;// If direction is not yet determined
if(swiping===true){// We need at least 10px distance to correctly calculate an angle
if(Math.abs(self.distance)>10){self.canTap=false;if(self.instance.group.length<2&&self.opts.vertical){self.isSwiping='y';}else if(self.instance.isDragging||self.opts.vertical===false||self.opts.vertical==='auto'&&$(window).width()>800){self.isSwiping='x';}else{angle=Math.abs(Math.atan2(self.distanceY,self.distanceX)*180/Math.PI);self.isSwiping=angle>45&&angle<135?'y':'x';}self.canTap=false;if(self.isSwiping==='y'&&$.fancybox.isMobile&&(isScrollable(self.$target)||isScrollable(self.$target.parent()))){self.isScrolling=true;return;}self.instance.isDragging=self.isSwiping;// Reset points to avoid jumping, because we dropped first swipes to calculate the angle
self.startPoints=self.newPoints;$.each(self.instance.slides,function(index,slide){$.fancybox.stop(slide.$slide);slide.$slide.css('transition-duration','');slide.inTransition=false;if(slide.pos===self.instance.current.pos){self.sliderStartPos.left=$.fancybox.getTranslate(slide.$slide).left;}});// Stop slideshow
if(self.instance.SlideShow&&self.instance.SlideShow.isActive){self.instance.SlideShow.stop();}}return;}// Sticky edges
if(swiping=='x'){if(self.distanceX>0&&(self.instance.group.length<2||self.instance.current.index===0&&!self.instance.current.opts.loop)){left=left+Math.pow(self.distanceX,0.8);}else if(self.distanceX<0&&(self.instance.group.length<2||self.instance.current.index===self.instance.group.length-1&&!self.instance.current.opts.loop)){left=left-Math.pow(-self.distanceX,0.8);}else{left=left+self.distanceX;}}self.sliderLastPos={top:swiping=='x'?0:self.sliderStartPos.top+self.distanceY,left:left};if(self.requestId){cancelAFrame(self.requestId);self.requestId=null;}self.requestId=requestAFrame(function(){if(self.sliderLastPos){$.each(self.instance.slides,function(index,slide){var pos=slide.pos-self.instance.currPos;$.fancybox.setTranslate(slide.$slide,{top:self.sliderLastPos.top,left:self.sliderLastPos.left+pos*self.canvasWidth+pos*slide.opts.gutter});});self.$container.addClass('fancybox-is-sliding');}});};Guestures.prototype.onPan=function(){var self=this;// Sometimes, when tapping causally, image can move a bit and that breaks double tapping
if(distance(self.newPoints[0],self.realPoints[0])<($.fancybox.isMobile?10:5)){self.startPoints=self.newPoints;return;}self.canTap=false;self.contentLastPos=self.limitMovement();if(self.requestId){cancelAFrame(self.requestId);self.requestId=null;}self.requestId=requestAFrame(function(){$.fancybox.setTranslate(self.$content,self.contentLastPos);});};// Make panning sticky to the edges
Guestures.prototype.limitMovement=function(){var self=this;var canvasWidth=self.canvasWidth;var canvasHeight=self.canvasHeight;var distanceX=self.distanceX;var distanceY=self.distanceY;var contentStartPos=self.contentStartPos;var currentOffsetX=contentStartPos.left;var currentOffsetY=contentStartPos.top;var currentWidth=contentStartPos.width;var currentHeight=contentStartPos.height;var minTranslateX,minTranslateY,maxTranslateX,maxTranslateY,newOffsetX,newOffsetY;if(currentWidth>canvasWidth){newOffsetX=currentOffsetX+distanceX;}else{newOffsetX=currentOffsetX;}newOffsetY=currentOffsetY+distanceY;// Slow down proportionally to traveled distance
minTranslateX=Math.max(0,canvasWidth*0.5-currentWidth*0.5);minTranslateY=Math.max(0,canvasHeight*0.5-currentHeight*0.5);maxTranslateX=Math.min(canvasWidth-currentWidth,canvasWidth*0.5-currentWidth*0.5);maxTranslateY=Math.min(canvasHeight-currentHeight,canvasHeight*0.5-currentHeight*0.5);if(currentWidth>canvasWidth){//   ->
if(distanceX>0&&newOffsetX>minTranslateX){newOffsetX=minTranslateX-1+Math.pow(-minTranslateX+currentOffsetX+distanceX,0.8)||0;}//    <-
if(distanceX<0&&newOffsetX<maxTranslateX){newOffsetX=maxTranslateX+1-Math.pow(maxTranslateX-currentOffsetX-distanceX,0.8)||0;}}if(currentHeight>canvasHeight){//   \/
if(distanceY>0&&newOffsetY>minTranslateY){newOffsetY=minTranslateY-1+Math.pow(-minTranslateY+currentOffsetY+distanceY,0.8)||0;}//   /\
if(distanceY<0&&newOffsetY<maxTranslateY){newOffsetY=maxTranslateY+1-Math.pow(maxTranslateY-currentOffsetY-distanceY,0.8)||0;}}return{top:newOffsetY,left:newOffsetX,scaleX:contentStartPos.scaleX,scaleY:contentStartPos.scaleY};};Guestures.prototype.limitPosition=function(newOffsetX,newOffsetY,newWidth,newHeight){var self=this;var canvasWidth=self.canvasWidth;var canvasHeight=self.canvasHeight;if(newWidth>canvasWidth){newOffsetX=newOffsetX>0?0:newOffsetX;newOffsetX=newOffsetX<canvasWidth-newWidth?canvasWidth-newWidth:newOffsetX;}else{// Center horizontally
newOffsetX=Math.max(0,canvasWidth/2-newWidth/2);}if(newHeight>canvasHeight){newOffsetY=newOffsetY>0?0:newOffsetY;newOffsetY=newOffsetY<canvasHeight-newHeight?canvasHeight-newHeight:newOffsetY;}else{// Center vertically
newOffsetY=Math.max(0,canvasHeight/2-newHeight/2);}return{top:newOffsetY,left:newOffsetX};};Guestures.prototype.onZoom=function(){var self=this;// Calculate current distance between points to get pinch ratio and new width and height
var currentWidth=self.contentStartPos.width;var currentHeight=self.contentStartPos.height;var currentOffsetX=self.contentStartPos.left;var currentOffsetY=self.contentStartPos.top;var endDistanceBetweenFingers=distance(self.newPoints[0],self.newPoints[1]);var pinchRatio=endDistanceBetweenFingers/self.startDistanceBetweenFingers;var newWidth=Math.floor(currentWidth*pinchRatio);var newHeight=Math.floor(currentHeight*pinchRatio);// This is the translation due to pinch-zooming
var translateFromZoomingX=(currentWidth-newWidth)*self.percentageOfImageAtPinchPointX;var translateFromZoomingY=(currentHeight-newHeight)*self.percentageOfImageAtPinchPointY;//Point between the two touches
var centerPointEndX=(self.newPoints[0].x+self.newPoints[1].x)/2-$(window).scrollLeft();var centerPointEndY=(self.newPoints[0].y+self.newPoints[1].y)/2-$(window).scrollTop();// And this is the translation due to translation of the centerpoint
// between the two fingers
var translateFromTranslatingX=centerPointEndX-self.centerPointStartX;var translateFromTranslatingY=centerPointEndY-self.centerPointStartY;// The new offset is the old/current one plus the total translation
var newOffsetX=currentOffsetX+(translateFromZoomingX+translateFromTranslatingX);var newOffsetY=currentOffsetY+(translateFromZoomingY+translateFromTranslatingY);var newPos={top:newOffsetY,left:newOffsetX,scaleX:self.contentStartPos.scaleX*pinchRatio,scaleY:self.contentStartPos.scaleY*pinchRatio};self.canTap=false;self.newWidth=newWidth;self.newHeight=newHeight;self.contentLastPos=newPos;if(self.requestId){cancelAFrame(self.requestId);self.requestId=null;}self.requestId=requestAFrame(function(){$.fancybox.setTranslate(self.$content,self.contentLastPos);});};Guestures.prototype.ontouchend=function(e){var self=this;var dMs=Math.max(new Date().getTime()-self.startTime,1);var swiping=self.isSwiping;var panning=self.isPanning;var zooming=self.isZooming;var scrolling=self.isScrolling;self.endPoints=pointers(e);self.$container.removeClass('fancybox-controls--isGrabbing');$(document).off('.fb.touch');document.removeEventListener('scroll',self.onscroll,true);if(self.requestId){cancelAFrame(self.requestId);self.requestId=null;}self.isSwiping=false;self.isPanning=false;self.isZooming=false;self.isScrolling=false;self.instance.isDragging=false;if(self.canTap){return self.onTap(e);}self.speed=366;// Speed in px/ms
self.velocityX=self.distanceX/dMs*0.5;self.velocityY=self.distanceY/dMs*0.5;self.speedX=Math.max(self.speed*0.5,Math.min(self.speed*1.5,1/Math.abs(self.velocityX)*self.speed));if(panning){self.endPanning();}else if(zooming){self.endZooming();}else{self.endSwiping(swiping,scrolling);}return;};Guestures.prototype.endSwiping=function(swiping,scrolling){var self=this,ret=false,len=self.instance.group.length;self.sliderLastPos=null;// Close if swiped vertically / navigate if horizontally
if(swiping=='y'&&!scrolling&&Math.abs(self.distanceY)>50){// Continue vertical movement
$.fancybox.animate(self.instance.current.$slide,{top:self.sliderStartPos.top+self.distanceY+self.velocityY*150,opacity:0},150);ret=self.instance.close(true,300);}else if(swiping=='x'&&self.distanceX>50&&len>1){ret=self.instance.previous(self.speedX);}else if(swiping=='x'&&self.distanceX<-50&&len>1){ret=self.instance.next(self.speedX);}if(ret===false&&(swiping=='x'||swiping=='y')){if(scrolling||len<2){self.instance.centerSlide(self.instance.current,150);}else{self.instance.jumpTo(self.instance.current.index);}}self.$container.removeClass('fancybox-is-sliding');};// Limit panning from edges
// ========================
Guestures.prototype.endPanning=function(){var self=this;var newOffsetX,newOffsetY,newPos;if(!self.contentLastPos){return;}if(self.opts.momentum===false){newOffsetX=self.contentLastPos.left;newOffsetY=self.contentLastPos.top;}else{// Continue movement
newOffsetX=self.contentLastPos.left+self.velocityX*self.speed;newOffsetY=self.contentLastPos.top+self.velocityY*self.speed;}newPos=self.limitPosition(newOffsetX,newOffsetY,self.contentStartPos.width,self.contentStartPos.height);newPos.width=self.contentStartPos.width;newPos.height=self.contentStartPos.height;$.fancybox.animate(self.$content,newPos,330);};Guestures.prototype.endZooming=function(){var self=this;var current=self.instance.current;var newOffsetX,newOffsetY,newPos,reset;var newWidth=self.newWidth;var newHeight=self.newHeight;if(!self.contentLastPos){return;}newOffsetX=self.contentLastPos.left;newOffsetY=self.contentLastPos.top;reset={top:newOffsetY,left:newOffsetX,width:newWidth,height:newHeight,scaleX:1,scaleY:1};// Reset scalex/scaleY values; this helps for perfomance and does not break animation
$.fancybox.setTranslate(self.$content,reset);if(newWidth<self.canvasWidth&&newHeight<self.canvasHeight){self.instance.scaleToFit(150);}else if(newWidth>current.width||newHeight>current.height){self.instance.scaleToActual(self.centerPointStartX,self.centerPointStartY,150);}else{newPos=self.limitPosition(newOffsetX,newOffsetY,newWidth,newHeight);// Switch from scale() to width/height or animation will not work correctly
$.fancybox.setTranslate(self.content,$.fancybox.getTranslate(self.$content));$.fancybox.animate(self.$content,newPos,150);}};Guestures.prototype.onTap=function(e){var self=this;var $target=$(e.target);var instance=self.instance;var current=instance.current;var endPoints=e&&pointers(e)||self.startPoints;var tapX=endPoints[0]?endPoints[0].x-self.$stage.offset().left:0;var tapY=endPoints[0]?endPoints[0].y-self.$stage.offset().top:0;var where;var process=function process(prefix){var action=current.opts[prefix];if($.isFunction(action)){action=action.apply(instance,[current,e]);}if(!action){return;}switch(action){case"close":instance.close(self.startEvent);break;case"toggleControls":instance.toggleControls(true);break;case"next":instance.next();break;case"nextOrClose":if(instance.group.length>1){instance.next();}else{instance.close(self.startEvent);}break;case"zoom":if(current.type=='image'&&(current.isLoaded||current.$ghost)){if(instance.canPan()){instance.scaleToFit();}else if(instance.isScaledDown()){instance.scaleToActual(tapX,tapY);}else if(instance.group.length<2){instance.close(self.startEvent);}}break;}};// Ignore right click
if(e.originalEvent&&e.originalEvent.button==2){return;}// Skip if clicked on the scrollbar
if(!$target.is('img')&&tapX>$target[0].clientWidth+$target.offset().left){return;}// Check where is clicked
if($target.is('.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container')){where='Outside';}else if($target.is('.fancybox-slide')){where='Slide';}else if(instance.current.$content&&instance.current.$content.find($target).addBack().filter($target).length){where='Content';}else{return;}// Check if this is a double tap
if(self.tapped){// Stop previously created single tap
clearTimeout(self.tapped);self.tapped=null;// Skip if distance between taps is too big
if(Math.abs(tapX-self.tapX)>50||Math.abs(tapY-self.tapY)>50){return this;}// OK, now we assume that this is a double-tap
process('dblclick'+where);}else{// Single tap will be processed if user has not clicked second time within 300ms
// or there is no need to wait for double-tap
self.tapX=tapX;self.tapY=tapY;if(current.opts['dblclick'+where]&&current.opts['dblclick'+where]!==current.opts['click'+where]){self.tapped=setTimeout(function(){self.tapped=null;process('click'+where);},500);}else{process('click'+where);}}return this;};$(document).on('onActivate.fb',function(e,instance){if(instance&&!instance.Guestures){instance.Guestures=new Guestures(instance);}});})(window,document,window.jQuery||jQuery);// ==========================================================================
//
// SlideShow
// Enables slideshow functionality
//
// Example of usage:
// $.fancybox.getInstance().SlideShow.start()
//
// ==========================================================================
;(function(document,$){'use strict';$.extend(true,$.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}">'+'<svg viewBox="0 0 40 40">'+'<path d="M13,12 L27,20 L13,27 Z" />'+'<path d="M15,10 v19 M23,10 v19" />'+'</svg>'+'</button>'},slideShow:{autoStart:false,speed:3000}});var SlideShow=function SlideShow(instance){this.instance=instance;this.init();};$.extend(SlideShow.prototype,{timer:null,isActive:false,$button:null,init:function init(){var self=this;self.$button=self.instance.$refs.toolbar.find('[data-fancybox-play]').on('click',function(){self.toggle();});if(self.instance.group.length<2||!self.instance.group[self.instance.currIndex].opts.slideShow){self.$button.hide();}},set:function set(force){var self=this;// Check if reached last element
if(self.instance&&self.instance.current&&(force===true||self.instance.current.opts.loop||self.instance.currIndex<self.instance.group.length-1)){self.timer=setTimeout(function(){if(self.isActive){self.instance.jumpTo((self.instance.currIndex+1)%self.instance.group.length);}},self.instance.current.opts.slideShow.speed);}else{self.stop();self.instance.idleSecondsCounter=0;self.instance.showControls();}},clear:function clear(){var self=this;clearTimeout(self.timer);self.timer=null;},start:function start(){var self=this;var current=self.instance.current;if(current){self.isActive=true;self.$button.attr('title',current.opts.i18n[current.opts.lang].PLAY_STOP).removeClass('fancybox-button--play').addClass('fancybox-button--pause');self.set(true);}},stop:function stop(){var self=this;var current=self.instance.current;self.clear();self.$button.attr('title',current.opts.i18n[current.opts.lang].PLAY_START).removeClass('fancybox-button--pause').addClass('fancybox-button--play');self.isActive=false;},toggle:function toggle(){var self=this;if(self.isActive){self.stop();}else{self.start();}}});$(document).on({'onInit.fb':function onInitFb(e,instance){if(instance&&!instance.SlideShow){instance.SlideShow=new SlideShow(instance);}},'beforeShow.fb':function beforeShowFb(e,instance,current,firstRun){var SlideShow=instance&&instance.SlideShow;if(firstRun){if(SlideShow&&current.opts.slideShow.autoStart){SlideShow.start();}}else if(SlideShow&&SlideShow.isActive){SlideShow.clear();}},'afterShow.fb':function afterShowFb(e,instance,current){var SlideShow=instance&&instance.SlideShow;if(SlideShow&&SlideShow.isActive){SlideShow.set();}},'afterKeydown.fb':function afterKeydownFb(e,instance,current,keypress,keycode){var SlideShow=instance&&instance.SlideShow;// "P" or Spacebar
if(SlideShow&&current.opts.slideShow&&(keycode===80||keycode===32)&&!$(document.activeElement).is('button,a,input')){keypress.preventDefault();SlideShow.toggle();}},'beforeClose.fb onDeactivate.fb':function beforeCloseFbOnDeactivateFb(e,instance){var SlideShow=instance&&instance.SlideShow;if(SlideShow){SlideShow.stop();}}});// Page Visibility API to pause slideshow when window is not active
$(document).on("visibilitychange",function(){var instance=$.fancybox.getInstance();var SlideShow=instance&&instance.SlideShow;if(SlideShow&&SlideShow.isActive){if(document.hidden){SlideShow.clear();}else{SlideShow.set();}}});})(document,window.jQuery||jQuery);// ==========================================================================
//
// FullScreen
// Adds fullscreen functionality
//
// ==========================================================================
;(function(document,$){'use strict';// Collection of methods supported by user browser
var fn=function(){var fnMap=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror'],// new WebKit
['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror'],// old WebKit (Safari 5.1)
['webkitRequestFullScreen','webkitCancelFullScreen','webkitCurrentFullScreenElement','webkitCancelFullScreen','webkitfullscreenchange','webkitfullscreenerror'],['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror'],['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError']];var val;var ret={};var i,j;for(i=0;i<fnMap.length;i++){val=fnMap[i];if(val&&val[1]in document){for(j=0;j<val.length;j++){ret[fnMap[0][j]]=val[j];}return ret;}}return false;}();// If browser does not have Full Screen API, then simply unset default button template and stop
if(!fn){if($&&$.fancybox){$.fancybox.defaults.btnTpl.fullScreen=false;}return;}var FullScreen={request:function request(elem){elem=elem||document.documentElement;elem[fn.requestFullscreen](elem.ALLOW_KEYBOARD_INPUT);},exit:function exit(){document[fn.exitFullscreen]();},toggle:function toggle(elem){elem=elem||document.documentElement;if(this.isFullscreen()){this.exit();}else{this.request(elem);}},isFullscreen:function isFullscreen(){return Boolean(document[fn.fullscreenElement]);},enabled:function enabled(){return Boolean(document[fn.fullscreenEnabled]);}};$.extend(true,$.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="{{FULL_SCREEN}}">'+'<svg viewBox="0 0 40 40">'+'<path d="M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z" />'+'</svg>'+'</button>'},fullScreen:{autoStart:false}});$(document).on({'onInit.fb':function onInitFb(e,instance){var $container;if(instance&&instance.group[instance.currIndex].opts.fullScreen){$container=instance.$refs.container;$container.on('click.fb-fullscreen','[data-fancybox-fullscreen]',function(e){e.stopPropagation();e.preventDefault();FullScreen.toggle($container[0]);});if(instance.opts.fullScreen&&instance.opts.fullScreen.autoStart===true){FullScreen.request($container[0]);}// Expose API
instance.FullScreen=FullScreen;}else if(instance){instance.$refs.toolbar.find('[data-fancybox-fullscreen]').hide();}},'afterKeydown.fb':function afterKeydownFb(e,instance,current,keypress,keycode){// "P" or Spacebar
if(instance&&instance.FullScreen&&keycode===70){keypress.preventDefault();instance.FullScreen.toggle(instance.$refs.container[0]);}},'beforeClose.fb':function beforeCloseFb(instance){if(instance&&instance.FullScreen){FullScreen.exit();}}});$(document).on(fn.fullscreenchange,function(){var isFullscreen=FullScreen.isFullscreen(),instance=$.fancybox.getInstance();if(instance){// If image is zooming, then force to stop and reposition properly
if(instance.current&&instance.current.type==='image'&&instance.isAnimating){instance.current.$content.css('transition','none');instance.isAnimating=false;instance.update(true,true,0);}instance.trigger('onFullscreenChange',isFullscreen);instance.$refs.container.toggleClass('fancybox-is-fullscreen',isFullscreen);}});})(document,window.jQuery||jQuery);// ==========================================================================
//
// Thumbs
// Displays thumbnails in a grid
//
// ==========================================================================
;(function(document,$){'use strict';// Make sure there are default values
$.fancybox.defaults=$.extend(true,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}">'+'<svg viewBox="0 0 120 120">'+'<path d="M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z" />'+'</svg>'+'</button>'},thumbs:{autoStart:false,// Display thumbnails on opening
hideOnClose:true,// Hide thumbnail grid when closing animation starts
parentEl:'.fancybox-container',// Container is injected into this element
axis:'y'// Vertical (y) or horizontal (x) scrolling
}},$.fancybox.defaults);var FancyThumbs=function FancyThumbs(instance){this.init(instance);};$.extend(FancyThumbs.prototype,{$button:null,$grid:null,$list:null,isVisible:false,isActive:false,init:function init(instance){var self=this;self.instance=instance;instance.Thumbs=self;// Enable thumbs if at least two group items have thumbnails
var first=instance.group[0],second=instance.group[1];self.opts=instance.group[instance.currIndex].opts.thumbs;self.$button=instance.$refs.toolbar.find('[data-fancybox-thumbs]');if(self.opts&&first&&second&&(first.type=='image'||first.opts.thumb||first.opts.$thumb)&&(second.type=='image'||second.opts.thumb||second.opts.$thumb)){self.$button.show().on('click',function(){self.toggle();});self.isActive=true;}else{self.$button.hide();}},create:function create(){var self=this,instance=self.instance,parentEl=self.opts.parentEl,list,src;self.$grid=$('<div class="fancybox-thumbs fancybox-thumbs-'+self.opts.axis+'"></div>').appendTo(instance.$refs.container.find(parentEl).addBack().filter(parentEl));// Build list HTML
list='<ul>';$.each(instance.group,function(i,item){src=item.opts.thumb||(item.opts.$thumb?item.opts.$thumb.attr('src'):null);if(!src&&item.type==='image'){src=item.src;}if(src&&src.length){list+='<li data-index="'+i+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+src+'" /></li>';}});list+='</ul>';self.$list=$(list).appendTo(self.$grid).on('click','li',function(){instance.jumpTo($(this).data('index'));});self.$list.find('img').hide().one('load',function(){var $parent=$(this).parent().removeClass('fancybox-thumbs-loading'),thumbWidth=$parent.outerWidth(),thumbHeight=$parent.outerHeight(),width,height,widthRatio,heightRatio;width=this.naturalWidth||this.width;height=this.naturalHeight||this.height;// Calculate thumbnail dimensions; center vertically and horizontally
widthRatio=width/thumbWidth;heightRatio=height/thumbHeight;if(widthRatio>=1&&heightRatio>=1){if(widthRatio>heightRatio){width=width/heightRatio;height=thumbHeight;}else{width=thumbWidth;height=height/widthRatio;}}$(this).css({width:Math.floor(width),height:Math.floor(height),'margin-top':height>thumbHeight?Math.floor(thumbHeight*0.3-height*0.3):Math.floor(thumbHeight*0.5-height*0.5),'margin-left':Math.floor(thumbWidth*0.5-width*0.5)}).show();}).each(function(){this.src=$(this).data('src');});if(self.opts.axis==='x'){self.$list.width(parseInt(self.$grid.css("padding-right"))+instance.group.length*self.$list.children().eq(0).outerWidth(true)+'px');}},focus:function focus(duration){var self=this,$list=self.$list,thumb,thumbPos;if(self.instance.current){thumb=$list.children().removeClass('fancybox-thumbs-active').filter('[data-index="'+self.instance.current.index+'"]').addClass('fancybox-thumbs-active');thumbPos=thumb.position();// Check if need to scroll to make current thumb visible
if(self.opts.axis==='y'&&(thumbPos.top<0||thumbPos.top>$list.height()-thumb.outerHeight())){$list.stop().animate({'scrollTop':$list.scrollTop()+thumbPos.top},duration);}else if(self.opts.axis==='x'&&(thumbPos.left<$list.parent().scrollLeft()||thumbPos.left>$list.parent().scrollLeft()+($list.parent().width()-thumb.outerWidth()))){$list.parent().stop().animate({'scrollLeft':thumbPos.left},duration);}}},update:function update(){this.instance.$refs.container.toggleClass('fancybox-show-thumbs',this.isVisible);if(this.isVisible){if(!this.$grid){this.create();}this.instance.trigger('onThumbsShow');this.focus(0);}else if(this.$grid){this.instance.trigger('onThumbsHide');}// Update content position
this.instance.update();},hide:function hide(){this.isVisible=false;this.update();},show:function show(){this.isVisible=true;this.update();},toggle:function toggle(){this.isVisible=!this.isVisible;this.update();}});$(document).on({'onInit.fb':function onInitFb(e,instance){var Thumbs;if(instance&&!instance.Thumbs){Thumbs=new FancyThumbs(instance);if(Thumbs.isActive&&Thumbs.opts.autoStart===true){Thumbs.show();}}},'beforeShow.fb':function beforeShowFb(e,instance,item,firstRun){var Thumbs=instance&&instance.Thumbs;if(Thumbs&&Thumbs.isVisible){Thumbs.focus(firstRun?0:250);}},'afterKeydown.fb':function afterKeydownFb(e,instance,current,keypress,keycode){var Thumbs=instance&&instance.Thumbs;// "G"
if(Thumbs&&Thumbs.isActive&&keycode===71){keypress.preventDefault();Thumbs.toggle();}},'beforeClose.fb':function beforeCloseFb(e,instance){var Thumbs=instance&&instance.Thumbs;if(Thumbs&&Thumbs.isVisible&&Thumbs.opts.hideOnClose!==false){Thumbs.$grid.hide();}}});})(document,window.jQuery);//// ==========================================================================
//
// Share
// Displays simple form for sharing current url
//
// ==========================================================================
;(function(document,$){'use strict';$.extend(true,$.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}">'+'<svg viewBox="0 0 40 40">'+'<path d="M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z">'+'</svg>'+'</button>'},share:{tpl:'<div class="fancybox-share">'+'<h1>{{SHARE}}</h1>'+'<p class="fancybox-share__links">'+'<a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}">'+'<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg>'+'<span>Facebook</span>'+'</a>'+'<a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}">'+'<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg>'+'<span>Pinterest</span>'+'</a>'+'<a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}">'+'<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg>'+'<span>Twitter</span>'+'</a>'+'</p>'+'<p><input class="fancybox-share__input" type="text" value="{{url_raw}}" /></p>'+'</div>'}});function escapeHtml(string){var entityMap={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'};return String(string).replace(/[&<>"'`=\/]/g,function(s){return entityMap[s];});}$(document).on('click','[data-fancybox-share]',function(){var f=$.fancybox.getInstance(),url,tpl;if(f){url=f.current.opts.hash===false?f.current.src:window.location;tpl=f.current.opts.share.tpl.replace(/\{\{media\}\}/g,f.current.type==='image'?encodeURIComponent(f.current.src):'').replace(/\{\{url\}\}/g,encodeURIComponent(url)).replace(/\{\{url_raw\}\}/g,escapeHtml(url)).replace(/\{\{descr\}\}/g,f.$caption?encodeURIComponent(f.$caption.text()):'');$.fancybox.open({src:f.translate(f,tpl),type:'html',opts:{animationEffect:"fade",animationDuration:250,afterLoad:function afterLoad(instance,current){// Opening links in a popup window
current.$content.find('.fancybox-share__links a').click(function(){window.open(this.href,"Share","width=550, height=450");return false;});}}});}});})(document,window.jQuery||jQuery);// ==========================================================================
//
// Hash
// Enables linking to each modal
//
// ==========================================================================
;(function(document,window,$){'use strict';// Simple $.escapeSelector polyfill (for jQuery prior v3)
if(!$.escapeSelector){$.escapeSelector=function(sel){var rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;var fcssescape=function fcssescape(ch,asCodePoint){if(asCodePoint){// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
if(ch==="\0"){return"\uFFFD";}// Control characters and (dependent upon position) numbers get escaped as code points
return ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ";}// Other potentially-special ASCII characters get backslash-escaped
return"\\"+ch;};return(sel+"").replace(rcssescape,fcssescape);};}// Create new history entry only once
var shouldCreateHistory=true;// Variable containing last hash value set by fancyBox
// It will be used to determine if fancyBox needs to close after hash change is detected
var currentHash=null;// Throttling the history change
var timerID=null;// Get info about gallery name and current index from url
function parseUrl(){var hash=window.location.hash.substr(1);var rez=hash.split('-');var index=rez.length>1&&/^\+?\d+$/.test(rez[rez.length-1])?parseInt(rez.pop(-1),10)||1:1;var gallery=rez.join('-');// Index is starting from 1
if(index<1){index=1;}return{hash:hash,index:index,gallery:gallery};}// Trigger click evnt on links to open new fancyBox instance
function triggerFromUrl(url){var $el;if(url.gallery!==''){// If we can find element matching 'data-fancybox' atribute, then trigger click event for that ..
$el=$("[data-fancybox='"+$.escapeSelector(url.gallery)+"']").eq(url.index-1);if(!$el.length){// .. if not, try finding element by ID
$el=$("#"+$.escapeSelector(url.gallery)+"");}if($el.length){shouldCreateHistory=false;$el.trigger('click');}}}// Get gallery name from current instance
function getGalleryID(instance){var opts;if(!instance){return false;}opts=instance.current?instance.current.opts:instance.opts;return opts.hash||(opts.$orig?opts.$orig.data('fancybox'):'');}// Start when DOM becomes ready
$(function(){// Check if user has disabled this module
if($.fancybox.defaults.hash===false){return;}// Update hash when opening/closing fancyBox
$(document).on({'onInit.fb':function onInitFb(e,instance){var url,gallery;if(instance.group[instance.currIndex].opts.hash===false){return;}url=parseUrl();gallery=getGalleryID(instance);// Make sure gallery start index matches index from hash
if(gallery&&url.gallery&&gallery==url.gallery){instance.currIndex=url.index-1;}},'beforeShow.fb':function beforeShowFb(e,instance,current){var gallery;if(!current||current.opts.hash===false){return;}gallery=getGalleryID(instance);// Update window hash
if(gallery&&gallery!==''){if(window.location.hash.indexOf(gallery)<0){instance.opts.origHash=window.location.hash;}currentHash=gallery+(instance.group.length>1?'-'+(current.index+1):'');if('replaceState'in window.history){if(timerID){clearTimeout(timerID);}timerID=setTimeout(function(){window.history[shouldCreateHistory?'pushState':'replaceState']({},document.title,window.location.pathname+window.location.search+'#'+currentHash);timerID=null;shouldCreateHistory=false;},300);}else{window.location.hash=currentHash;}}},'beforeClose.fb':function beforeCloseFb(e,instance,current){var gallery,origHash;if(timerID){clearTimeout(timerID);}if(current.opts.hash===false){return;}gallery=getGalleryID(instance);origHash=instance&&instance.opts.origHash?instance.opts.origHash:'';// Remove hash from location bar
if(gallery&&gallery!==''){if('replaceState'in history){window.history.replaceState({},document.title,window.location.pathname+window.location.search+origHash);}else{window.location.hash=origHash;// Keep original scroll position
$(window).scrollTop(instance.scrollTop).scrollLeft(instance.scrollLeft);}}currentHash=null;}});// Check if need to close after url has changed
$(window).on('hashchange.fb',function(){var url=parseUrl();if($.fancybox.getInstance()){if(currentHash&&currentHash!==url.gallery+'-'+url.index&&!(url.index===1&&currentHash==url.gallery)){currentHash=null;$.fancybox.close();}}else if(url.gallery!==''){triggerFromUrl(url);}});// Check current hash and trigger click event on matching element to start fancyBox, if needed
setTimeout(function(){triggerFromUrl(parseUrl());},50);});})(document,window,window.jQuery||jQuery);;(function(document,$){'use strict';var prevTime=new Date().getTime();$(document).on({'onInit.fb':function onInitFb(e,instance,current){instance.$refs.stage.on('mousewheel DOMMouseScroll wheel MozMousePixelScroll',function(e){var current=instance.current,currTime=new Date().getTime();if(instance.group.length<1||current.opts.wheel===false||current.opts.wheel==='auto'&&current.type!=='image'){return;}e.preventDefault();e.stopPropagation();if(current.$slide.hasClass('fancybox-animated')){return;}e=e.originalEvent||e;if(currTime-prevTime<250){return;}prevTime=currTime;instance[(-e.deltaY||-e.deltaX||e.wheelDelta||-e.detail)<0?'next':'previous']();});}});})(document,window.jQuery||jQuery);;/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */(function(factory){if(typeof define==='function'&&define.amd){// AMD. Register as an anonymous module.
define(['jquery'],factory);}else if((typeof exports==="undefined"?"undefined":_typeof2(exports))==='object'){// Node/CommonJS style for Browserify
module.exports=factory;}else{// Browser globals
factory(jQuery);}})(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind='onwheel'in document||document.documentMode>=9?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}var special=$.event.special.mousewheel={version:'3.1.12',setup:function setup(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}// Store the line height and page height for this particular element
$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this));},teardown:function teardown(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}// Clean up the data we added to the element
$.removeData(this,'mousewheel-line-height');$.removeData(this,'mousewheel-page-height');},getLineHeight:function getLineHeight(elem){var $elem=$(elem),$parent=$elem['offsetParent'in $.fn?'offsetParent':'parent']();if(!$parent.length){$parent=$('body');}return parseInt($parent.css('fontSize'),10)||parseInt($elem.css('fontSize'),10)||16;},getPageHeight:function getPageHeight(elem){return $(elem).height();},settings:{adjustOldDeltas:true,// see shouldAdjustOldDeltas() below
normalizeOffset:true// calls getBoundingClientRect for each event
}};$.fn.extend({mousewheel:function mousewheel(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel');},unmousewheel:function unmousewheel(fn){return this.unbind('mousewheel',fn);}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type='mousewheel';// Old school scrollwheel delta
if('detail'in orgEvent){deltaY=orgEvent.detail*-1;}if('wheelDelta'in orgEvent){deltaY=orgEvent.wheelDelta;}if('wheelDeltaY'in orgEvent){deltaY=orgEvent.wheelDeltaY;}if('wheelDeltaX'in orgEvent){deltaX=orgEvent.wheelDeltaX*-1;}// Firefox < 17 horizontal scrolling related to DOMMouseScroll event
if('axis'in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0;}// Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
delta=deltaY===0?deltaX:deltaY;// New school wheel delta (wheel event)
if('deltaY'in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY;}if('deltaX'in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1;}}// No change actually happened, no reason to go any further
if(deltaY===0&&deltaX===0){return;}// Need to convert lines and pages to pixels if we aren't already in pixels
// There are three delta modes:
//   * deltaMode 0 is by pixels, nothing to do
//   * deltaMode 1 is by lines
//   * deltaMode 2 is by pages
if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight;}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight;}// Store lowest absolute delta to normalize the delta values
absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;// Adjust older deltas if necessary
if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40;}}// Adjust older deltas if necessary
if(shouldAdjustOldDeltas(orgEvent,absDelta)){// Divide all the things by 40!
delta/=40;deltaX/=40;deltaY/=40;}// Get a whole, normalized value for the deltas
delta=Math[delta>=1?'floor':'ceil'](delta/lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX/lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY/lowestDelta);// Normalise offsetX and offsetY properties
if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top;}// Add information to the event object
event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;// Go ahead and set deltaMode to 0 since we converted to pixels
// Although this is a little odd since we overwrite the deltaX/Y
// properties with normalized deltas.
event.deltaMode=0;// Add event and delta to the front of the arguments
args.unshift(event,delta,deltaX,deltaY);// Clearout lowestDelta after sometime to better
// handle multiple device types that give different
// a different lowestDelta
// Ex: trackpad = 3 and mouse wheel = 120
if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout);}nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args);}function nullLowestDelta(){lowestDelta=null;}function shouldAdjustOldDeltas(orgEvent,absDelta){// If this is an older event and the delta is divisable by 120,
// then we are assuming that the browser is treating this as an
// older mouse wheel event and that we should divide the deltas
// by 40 to try and get a more usable deltaFactor.
// Side note, this actually impacts the reported scroll distance
// in older browsers and can cause scrolling to be slower than native.
// Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0;}});;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};(function(global,factory){(typeof exports==='undefined'?'undefined':_typeof(exports))==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.LazyLoad=factory();})(this,function(){'use strict';var defaultSettings={elements_selector:"img",container:document,threshold:300,data_src:"src",data_srcset:"srcset",class_loading:"loading",class_loaded:"loaded",class_error:"error",callback_load:null,callback_error:null,callback_set:null,callback_enter:null};var dataPrefix="data-";var getData=function getData(element,attribute){return element.getAttribute(dataPrefix+attribute);};var setData=function setData(element,attribute,value){return element.setAttribute(dataPrefix+attribute,value);};var purgeElements=function purgeElements(elements){return elements.filter(function(element){return!getData(element,"was-processed");});};/* Creates instance and notifies it through the window element */var createInstance=function createInstance(classObj,options){var event;var eventString="LazyLoad::Initialized";var instance=new classObj(options);try{// Works in modern browsers
event=new CustomEvent(eventString,{detail:{instance:instance}});}catch(err){// Works in Internet Explorer (all versions)
event=document.createEvent("CustomEvent");event.initCustomEvent(eventString,false,false,{instance:instance});}window.dispatchEvent(event);};/* Auto initialization of one or more instances of lazyload, depending on the 
        options passed in (plain object or an array) */var autoInitialize=function autoInitialize(classObj,options){if(!options.length){// Plain object
createInstance(classObj,options);}else{// Array of objects
for(var i=0,optionsItem;optionsItem=options[i];i+=1){createInstance(classObj,optionsItem);}}};var setSourcesForPicture=function setSourcesForPicture(element,settings){var dataSrcSet=settings.data_srcset;var parent=element.parentNode;if(parent.tagName!=="PICTURE"){return;}for(var i=0,pictureChild;pictureChild=parent.children[i];i+=1){if(pictureChild.tagName==="SOURCE"){var sourceSrcset=getData(pictureChild,dataSrcSet);if(sourceSrcset){pictureChild.setAttribute("srcset",sourceSrcset);}}}};var setSources=function setSources(element,settings){var dataSrc=settings.data_src,dataSrcSet=settings.data_srcset;var tagName=element.tagName;var elementSrc=getData(element,dataSrc);if(tagName==="IMG"){setSourcesForPicture(element,settings);var imgSrcset=getData(element,dataSrcSet);if(imgSrcset){element.setAttribute("srcset",imgSrcset);}if(elementSrc){element.setAttribute("src",elementSrc);}return;}if(tagName==="IFRAME"){if(elementSrc){element.setAttribute("src",elementSrc);}return;}if(elementSrc){element.style.backgroundImage='url("'+elementSrc+'")';}};var supportsClassList="classList"in document.createElement("p");var addClass=function addClass(element,className){if(supportsClassList){element.classList.add(className);return;}element.className+=(element.className?" ":"")+className;};var removeClass=function removeClass(element,className){if(supportsClassList){element.classList.remove(className);return;}element.className=element.className.replace(new RegExp("(^|\\s+)"+className+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"");};var callCallback=function callCallback(callback,argument){if(callback){callback(argument);}};var loadString="load";var errorString="error";var removeListeners=function removeListeners(element,loadHandler,errorHandler){element.removeEventListener(loadString,loadHandler);element.removeEventListener(errorString,errorHandler);};var addOneShotListeners=function addOneShotListeners(element,settings){var onLoad=function onLoad(event){onEvent(event,true,settings);removeListeners(element,onLoad,onError);};var onError=function onError(event){onEvent(event,false,settings);removeListeners(element,onLoad,onError);};element.addEventListener(loadString,onLoad);element.addEventListener(errorString,onError);};var onEvent=function onEvent(event,success,settings){var element=event.target;removeClass(element,settings.class_loading);addClass(element,success?settings.class_loaded:settings.class_error);// Setting loaded or error class
callCallback(success?settings.callback_load:settings.callback_error,element);// Calling loaded or error callback
};var revealElement=function revealElement(element,settings){callCallback(settings.callback_enter,element);if(["IMG","IFRAME"].indexOf(element.tagName)>-1){addOneShotListeners(element,settings);addClass(element,settings.class_loading);}setSources(element,settings);setData(element,"was-processed",true);callCallback(settings.callback_set,element);};var LazyLoad=function LazyLoad(instanceSettings,elements){this._settings=_extends({},defaultSettings,instanceSettings);this._setObserver();this.update(elements);};LazyLoad.prototype={_setObserver:function _setObserver(){var _this=this;if(!("IntersectionObserver"in window)){return;}var settings=this._settings;var onIntersection=function onIntersection(entries){entries.forEach(function(entry){// entry.isIntersecting is null on some versions of MS Edge
// entry.intersectionRatio can be 0 on some intersecting elements
if(entry.isIntersecting||entry.intersectionRatio>0){var element=entry.target;revealElement(element,settings);_this._observer.unobserve(element);}});_this._elements=purgeElements(_this._elements);};this._observer=new IntersectionObserver(onIntersection,{root:settings.container===document?null:settings.container,rootMargin:settings.threshold+"px"});},update:function update(elements){var _this2=this;var settings=this._settings;var nodeSet=elements||settings.container.querySelectorAll(settings.elements_selector);this._elements=purgeElements(Array.prototype.slice.call(nodeSet));// nodeset to array for IE compatibility
if(this._observer){this._elements.forEach(function(element){_this2._observer.observe(element);});return;}// Fallback: load all elements at once
this._elements.forEach(function(element){revealElement(element,settings);});this._elements=purgeElements(this._elements);},destroy:function destroy(){var _this3=this;if(this._observer){purgeElements(this._elements).forEach(function(element){_this3._observer.unobserve(element);});this._observer=null;}this._elements=null;this._settings=null;}};/* Automatic instances creation if required (useful for async script loading!) */var autoInitOptions=window.lazyLoadOptions;if(autoInitOptions){autoInitialize(LazyLoad,autoInitOptions);}return LazyLoad;});;/**
 * Owl Carousel v2.2.1
 * Copyright 2013-2017 David Deutsch
 * Licensed under  ()
 *//**
 * Owl carousel
 * @version 2.1.6
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 * @todo Lazy Load Icon
 * @todo prevent animationend bubling
 * @todo itemsScaleUp
 * @todo Test Zepto
 * @todo stagePadding calculate wrong active classes
 */;(function($,window,document,undefined){/**
	 * Creates a carousel.
	 * @class The Owl Carousel.
	 * @public
	 * @param {HTMLElement|jQuery} element - The element to create the carousel for.
	 * @param {Object} [options] - The options
	 */function Owl(element,options){/**
		 * Current settings for the carousel.
		 * @public
		 */this.settings=null;/**
		 * Current options set by the caller including defaults.
		 * @public
		 */this.options=$.extend({},Owl.Defaults,options);/**
		 * Plugin element.
		 * @public
		 */this.$element=$(element);/**
		 * Proxied event handlers.
		 * @protected
		 */this._handlers={};/**
		 * References to the running plugins of this carousel.
		 * @protected
		 */this._plugins={};/**
		 * Currently suppressed events to prevent them from beeing retriggered.
		 * @protected
		 */this._supress={};/**
		 * Absolute current position.
		 * @protected
		 */this._current=null;/**
		 * Animation speed in milliseconds.
		 * @protected
		 */this._speed=null;/**
		 * Coordinates of all items in pixel.
		 * @todo The name of this member is missleading.
		 * @protected
		 */this._coordinates=[];/**
		 * Current breakpoint.
		 * @todo Real media queries would be nice.
		 * @protected
		 */this._breakpoint=null;/**
		 * Current width of the plugin element.
		 */this._width=null;/**
		 * All real items.
		 * @protected
		 */this._items=[];/**
		 * All cloned items.
		 * @protected
		 */this._clones=[];/**
		 * Merge values of all items.
		 * @todo Maybe this could be part of a plugin.
		 * @protected
		 */this._mergers=[];/**
		 * Widths of all items.
		 */this._widths=[];/**
		 * Invalidated parts within the update process.
		 * @protected
		 */this._invalidated={};/**
		 * Ordered list of workers for the update process.
		 * @protected
		 */this._pipe=[];/**
		 * Current state information for the drag operation.
		 * @todo #261
		 * @protected
		 */this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null};/**
		 * Current state information and their tags.
		 * @type {Object}
		 * @protected
		 */this._states={current:{},tags:{'initializing':['busy'],'animating':['busy'],'dragging':['interacting']}};$.each(['onResize','onThrottledResize'],$.proxy(function(i,handler){this._handlers[handler]=$.proxy(this[handler],this);},this));$.each(Owl.Plugins,$.proxy(function(key,plugin){this._plugins[key.charAt(0).toLowerCase()+key.slice(1)]=new plugin(this);},this));$.each(Owl.Workers,$.proxy(function(priority,worker){this._pipe.push({'filter':worker.filter,'run':$.proxy(worker.run,this)});},this));this.setup();this.initialize();}/**
	 * Default options for the carousel.
	 * @public
	 */Owl.Defaults={items:3,loop:false,center:false,rewind:false,mouseDrag:true,touchDrag:true,pullDrag:true,freeDrag:false,margin:0,stagePadding:0,merge:false,mergeFit:true,autoWidth:false,startPosition:0,rtl:false,smartSpeed:250,fluidSpeed:false,dragEndSpeed:false,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:window,fallbackEasing:'swing',info:false,nestedItemSelector:false,itemElement:'div',stageElement:'div',refreshClass:'owl-refresh',loadedClass:'owl-loaded',loadingClass:'owl-loading',rtlClass:'owl-rtl',responsiveClass:'owl-responsive',dragClass:'owl-drag',itemClass:'owl-item',stageClass:'owl-stage',stageOuterClass:'owl-stage-outer',grabClass:'owl-grab'};/**
	 * Enumeration for width.
	 * @public
	 * @readonly
	 * @enum {String}
	 */Owl.Width={Default:'default',Inner:'inner',Outer:'outer'};/**
	 * Enumeration for types.
	 * @public
	 * @readonly
	 * @enum {String}
	 */Owl.Type={Event:'event',State:'state'};/**
	 * Contains all registered plugins.
	 * @public
	 */Owl.Plugins={};/**
	 * List of workers involved in the update process.
	 */Owl.Workers=[{filter:['width','settings'],run:function run(){this._width=this.$element.width();}},{filter:['width','items','settings'],run:function run(cache){cache.current=this._items&&this._items[this.relative(this._current)];}},{filter:['items','settings'],run:function run(){this.$stage.children('.cloned').remove();}},{filter:['width','items','settings'],run:function run(cache){var margin=this.settings.margin||'',grid=!this.settings.autoWidth,rtl=this.settings.rtl,css={'width':'auto','margin-left':rtl?margin:'','margin-right':rtl?'':margin};!grid&&this.$stage.children().css(css);cache.css=css;}},{filter:['width','items','settings'],run:function run(cache){var width=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,merge=null,iterator=this._items.length,grid=!this.settings.autoWidth,widths=[];cache.items={merge:false,width:width};while(iterator--){merge=this._mergers[iterator];merge=this.settings.mergeFit&&Math.min(merge,this.settings.items)||merge;cache.items.merge=merge>1||cache.items.merge;widths[iterator]=!grid?this._items[iterator].width():width*merge;}this._widths=widths;}},{filter:['items','settings'],run:function run(){var clones=[],items=this._items,settings=this.settings,// TODO: Should be computed from number of min width items in stage
view=Math.max(settings.items*2,4),size=Math.ceil(items.length/2)*2,repeat=settings.loop&&items.length?settings.rewind?view:Math.max(view,size):0,append='',prepend='';repeat/=2;while(repeat--){// Switch to only using appended clones
clones.push(this.normalize(clones.length/2,true));append=append+items[clones[clones.length-1]][0].outerHTML;clones.push(this.normalize(items.length-1-(clones.length-1)/2,true));prepend=items[clones[clones.length-1]][0].outerHTML+prepend;}this._clones=clones;$(append).addClass('cloned').appendTo(this.$stage);$(prepend).addClass('cloned').prependTo(this.$stage);}},{filter:['width','items','settings'],run:function run(){var rtl=this.settings.rtl?1:-1,size=this._clones.length+this._items.length,iterator=-1,previous=0,current=0,coordinates=[];while(++iterator<size){previous=coordinates[iterator-1]||0;current=this._widths[this.relative(iterator)]+this.settings.margin;coordinates.push(previous+current*rtl);}this._coordinates=coordinates;}},{filter:['width','items','settings'],run:function run(){var padding=this.settings.stagePadding,coordinates=this._coordinates,css={'width':Math.ceil(Math.abs(coordinates[coordinates.length-1]))+padding*2,'padding-left':padding||'','padding-right':padding||''};this.$stage.css(css);}},{filter:['width','items','settings'],run:function run(cache){var iterator=this._coordinates.length,grid=!this.settings.autoWidth,items=this.$stage.children();if(grid&&cache.items.merge){while(iterator--){cache.css.width=this._widths[this.relative(iterator)];items.eq(iterator).css(cache.css);}}else if(grid){cache.css.width=cache.items.width;items.css(cache.css);}}},{filter:['items'],run:function run(){this._coordinates.length<1&&this.$stage.removeAttr('style');}},{filter:['width','items','settings'],run:function run(cache){cache.current=cache.current?this.$stage.children().index(cache.current):0;cache.current=Math.max(this.minimum(),Math.min(this.maximum(),cache.current));this.reset(cache.current);}},{filter:['position'],run:function run(){this.animate(this.coordinates(this._current));}},{filter:['width','position','items','settings'],run:function run(){var rtl=this.settings.rtl?1:-1,padding=this.settings.stagePadding*2,begin=this.coordinates(this.current())+padding,end=begin+this.width()*rtl,inner,outer,matches=[],i,n;for(i=0,n=this._coordinates.length;i<n;i++){inner=this._coordinates[i-1]||0;outer=Math.abs(this._coordinates[i])+padding*rtl;if(this.op(inner,'<=',begin)&&this.op(inner,'>',end)||this.op(outer,'<',begin)&&this.op(outer,'>',end)){matches.push(i);}}this.$stage.children('.active').removeClass('active');this.$stage.children(':eq('+matches.join('), :eq(')+')').addClass('active');if(this.settings.center){this.$stage.children('.center').removeClass('center');this.$stage.children().eq(this.current()).addClass('center');}}}];/**
	 * Initializes the carousel.
	 * @protected
	 */Owl.prototype.initialize=function(){this.enter('initializing');this.trigger('initialize');this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl);if(this.settings.autoWidth&&!this.is('pre-loading')){var imgs,nestedSelector,width;imgs=this.$element.find('img');nestedSelector=this.settings.nestedItemSelector?'.'+this.settings.nestedItemSelector:undefined;width=this.$element.children(nestedSelector).width();if(imgs.length&&width<=0){this.preloadAutoWidthImages(imgs);}}this.$element.addClass(this.options.loadingClass);// create stage
this.$stage=$('<'+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>');// append stage
this.$element.append(this.$stage.parent());// append content
this.replace(this.$element.children().not(this.$stage.parent()));// check visibility
if(this.$element.is(':visible')){// update view
this.refresh();}else{// invalidate width
this.invalidate('width');}this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass);// register event handlers
this.registerEventHandlers();this.leave('initializing');this.trigger('initialized');};/**
	 * Setups the current settings.
	 * @todo Remove responsive classes. Why should adaptive designs be brought into IE8?
	 * @todo Support for media queries by using `matchMedia` would be nice.
	 * @public
	 */Owl.prototype.setup=function(){var viewport=this.viewport(),overwrites=this.options.responsive,match=-1,settings=null;if(!overwrites){settings=$.extend({},this.options);}else{$.each(overwrites,function(breakpoint){if(breakpoint<=viewport&&breakpoint>match){match=Number(breakpoint);}});settings=$.extend({},this.options,overwrites[match]);if(typeof settings.stagePadding==='function'){settings.stagePadding=settings.stagePadding();}delete settings.responsive;// responsive class
if(settings.responsiveClass){this.$element.attr('class',this.$element.attr('class').replace(new RegExp('('+this.options.responsiveClass+'-)\\S+\\s','g'),'$1'+match));}}this.trigger('change',{property:{name:'settings',value:settings}});this._breakpoint=match;this.settings=settings;this.invalidate('settings');this.trigger('changed',{property:{name:'settings',value:this.settings}});};/**
	 * Updates option logic if necessery.
	 * @protected
	 */Owl.prototype.optionsLogic=function(){if(this.settings.autoWidth){this.settings.stagePadding=false;this.settings.merge=false;}};/**
	 * Prepares an item before add.
	 * @todo Rename event parameter `content` to `item`.
	 * @protected
	 * @returns {jQuery|HTMLElement} - The item container.
	 */Owl.prototype.prepare=function(item){var event=this.trigger('prepare',{content:item});if(!event.data){event.data=$('<'+this.settings.itemElement+'/>').addClass(this.options.itemClass).append(item);}this.trigger('prepared',{content:event.data});return event.data;};/**
	 * Updates the view.
	 * @public
	 */Owl.prototype.update=function(){var i=0,n=this._pipe.length,filter=$.proxy(function(p){return this[p];},this._invalidated),cache={};while(i<n){if(this._invalidated.all||$.grep(this._pipe[i].filter,filter).length>0){this._pipe[i].run(cache);}i++;}this._invalidated={};!this.is('valid')&&this.enter('valid');};/**
	 * Gets the width of the view.
	 * @public
	 * @param {Owl.Width} [dimension=Owl.Width.Default] - The dimension to return.
	 * @returns {Number} - The width of the view in pixel.
	 */Owl.prototype.width=function(dimension){dimension=dimension||Owl.Width.Default;switch(dimension){case Owl.Width.Inner:case Owl.Width.Outer:return this._width;default:return this._width-this.settings.stagePadding*2+this.settings.margin;}};/**
	 * Refreshes the carousel primarily for adaptive purposes.
	 * @public
	 */Owl.prototype.refresh=function(){this.enter('refreshing');this.trigger('refresh');this.setup();this.optionsLogic();this.$element.addClass(this.options.refreshClass);this.update();this.$element.removeClass(this.options.refreshClass);this.leave('refreshing');this.trigger('refreshed');};/**
	 * Checks window `resize` event.
	 * @protected
	 */Owl.prototype.onThrottledResize=function(){window.clearTimeout(this.resizeTimer);this.resizeTimer=window.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate);};/**
	 * Checks window `resize` event.
	 * @protected
	 */Owl.prototype.onResize=function(){if(!this._items.length){return false;}if(this._width===this.$element.width()){return false;}if(!this.$element.is(':visible')){return false;}this.enter('resizing');if(this.trigger('resize').isDefaultPrevented()){this.leave('resizing');return false;}this.invalidate('width');this.refresh();this.leave('resizing');this.trigger('resized');};/**
	 * Registers event handlers.
	 * @todo Check `msPointerEnabled`
	 * @todo #261
	 * @protected
	 */Owl.prototype.registerEventHandlers=function(){if($.support.transition){this.$stage.on($.support.transition.end+'.owl.core',$.proxy(this.onTransitionEnd,this));}if(this.settings.responsive!==false){this.on(window,'resize',this._handlers.onThrottledResize);}if(this.settings.mouseDrag){this.$element.addClass(this.options.dragClass);this.$stage.on('mousedown.owl.core',$.proxy(this.onDragStart,this));this.$stage.on('dragstart.owl.core selectstart.owl.core',function(){return false;});}if(this.settings.touchDrag){this.$stage.on('touchstart.owl.core',$.proxy(this.onDragStart,this));this.$stage.on('touchcancel.owl.core',$.proxy(this.onDragEnd,this));}};/**
	 * Handles `touchstart` and `mousedown` events.
	 * @todo Horizontal swipe threshold as option
	 * @todo #261
	 * @protected
	 * @param {Event} event - The event arguments.
	 */Owl.prototype.onDragStart=function(event){var stage=null;if(event.which===3){return;}if($.support.transform){stage=this.$stage.css('transform').replace(/.*\(|\)| /g,'').split(',');stage={x:stage[stage.length===16?12:4],y:stage[stage.length===16?13:5]};}else{stage=this.$stage.position();stage={x:this.settings.rtl?stage.left+this.$stage.width()-this.width()+this.settings.margin:stage.left,y:stage.top};}if(this.is('animating')){$.support.transform?this.animate(stage.x):this.$stage.stop();this.invalidate('position');}this.$element.toggleClass(this.options.grabClass,event.type==='mousedown');this.speed(0);this._drag.time=new Date().getTime();this._drag.target=$(event.target);this._drag.stage.start=stage;this._drag.stage.current=stage;this._drag.pointer=this.pointer(event);$(document).on('mouseup.owl.core touchend.owl.core',$.proxy(this.onDragEnd,this));$(document).one('mousemove.owl.core touchmove.owl.core',$.proxy(function(event){var delta=this.difference(this._drag.pointer,this.pointer(event));$(document).on('mousemove.owl.core touchmove.owl.core',$.proxy(this.onDragMove,this));if(Math.abs(delta.x)<Math.abs(delta.y)&&this.is('valid')){return;}event.preventDefault();this.enter('dragging');this.trigger('drag');},this));};/**
	 * Handles the `touchmove` and `mousemove` events.
	 * @todo #261
	 * @protected
	 * @param {Event} event - The event arguments.
	 */Owl.prototype.onDragMove=function(event){var minimum=null,maximum=null,pull=null,delta=this.difference(this._drag.pointer,this.pointer(event)),stage=this.difference(this._drag.stage.start,delta);if(!this.is('dragging')){return;}event.preventDefault();if(this.settings.loop){minimum=this.coordinates(this.minimum());maximum=this.coordinates(this.maximum()+1)-minimum;stage.x=((stage.x-minimum)%maximum+maximum)%maximum+minimum;}else{minimum=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum());maximum=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum());pull=this.settings.pullDrag?-1*delta.x/5:0;stage.x=Math.max(Math.min(stage.x,minimum+pull),maximum+pull);}this._drag.stage.current=stage;this.animate(stage.x);};/**
	 * Handles the `touchend` and `mouseup` events.
	 * @todo #261
	 * @todo Threshold for click event
	 * @protected
	 * @param {Event} event - The event arguments.
	 */Owl.prototype.onDragEnd=function(event){var delta=this.difference(this._drag.pointer,this.pointer(event)),stage=this._drag.stage.current,direction=delta.x>0^this.settings.rtl?'left':'right';$(document).off('.owl.core');this.$element.removeClass(this.options.grabClass);if(delta.x!==0&&this.is('dragging')||!this.is('valid')){this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed);this.current(this.closest(stage.x,delta.x!==0?direction:this._drag.direction));this.invalidate('position');this.update();this._drag.direction=direction;if(Math.abs(delta.x)>3||new Date().getTime()-this._drag.time>300){this._drag.target.one('click.owl.core',function(){return false;});}}if(!this.is('dragging')){return;}this.leave('dragging');this.trigger('dragged');};/**
	 * Gets absolute position of the closest item for a coordinate.
	 * @todo Setting `freeDrag` makes `closest` not reusable. See #165.
	 * @protected
	 * @param {Number} coordinate - The coordinate in pixel.
	 * @param {String} direction - The direction to check for the closest item. Ether `left` or `right`.
	 * @return {Number} - The absolute position of the closest item.
	 */Owl.prototype.closest=function(coordinate,direction){var position=-1,pull=30,width=this.width(),coordinates=this.coordinates();if(!this.settings.freeDrag){// check closest item
$.each(coordinates,$.proxy(function(index,value){// on a left pull, check on current index
if(direction==='left'&&coordinate>value-pull&&coordinate<value+pull){position=index;// on a right pull, check on previous index
// to do so, subtract width from value and set position = index + 1
}else if(direction==='right'&&coordinate>value-width-pull&&coordinate<value-width+pull){position=index+1;}else if(this.op(coordinate,'<',value)&&this.op(coordinate,'>',coordinates[index+1]||value-width)){position=direction==='left'?index+1:index;}return position===-1;},this));}if(!this.settings.loop){// non loop boundries
if(this.op(coordinate,'>',coordinates[this.minimum()])){position=coordinate=this.minimum();}else if(this.op(coordinate,'<',coordinates[this.maximum()])){position=coordinate=this.maximum();}}return position;};/**
	 * Animates the stage.
	 * @todo #270
	 * @public
	 * @param {Number} coordinate - The coordinate in pixels.
	 */Owl.prototype.animate=function(coordinate){var animate=this.speed()>0;this.is('animating')&&this.onTransitionEnd();if(animate){this.enter('animating');this.trigger('translate');}if($.support.transform3d&&$.support.transition){this.$stage.css({transform:'translate3d('+coordinate+'px,0px,0px)',transition:this.speed()/1000+'s'});}else if(animate){this.$stage.animate({left:coordinate+'px'},this.speed(),this.settings.fallbackEasing,$.proxy(this.onTransitionEnd,this));}else{this.$stage.css({left:coordinate+'px'});}};/**
	 * Checks whether the carousel is in a specific state or not.
	 * @param {String} state - The state to check.
	 * @returns {Boolean} - The flag which indicates if the carousel is busy.
	 */Owl.prototype.is=function(state){return this._states.current[state]&&this._states.current[state]>0;};/**
	 * Sets the absolute position of the current item.
	 * @public
	 * @param {Number} [position] - The new absolute position or nothing to leave it unchanged.
	 * @returns {Number} - The absolute position of the current item.
	 */Owl.prototype.current=function(position){if(position===undefined){return this._current;}if(this._items.length===0){return undefined;}position=this.normalize(position);if(this._current!==position){var event=this.trigger('change',{property:{name:'position',value:position}});if(event.data!==undefined){position=this.normalize(event.data);}this._current=position;this.invalidate('position');this.trigger('changed',{property:{name:'position',value:this._current}});}return this._current;};/**
	 * Invalidates the given part of the update routine.
	 * @param {String} [part] - The part to invalidate.
	 * @returns {Array.<String>} - The invalidated parts.
	 */Owl.prototype.invalidate=function(part){if($.type(part)==='string'){this._invalidated[part]=true;this.is('valid')&&this.leave('valid');}return $.map(this._invalidated,function(v,i){return i;});};/**
	 * Resets the absolute position of the current item.
	 * @public
	 * @param {Number} position - The absolute position of the new item.
	 */Owl.prototype.reset=function(position){position=this.normalize(position);if(position===undefined){return;}this._speed=0;this._current=position;this.suppress(['translate','translated']);this.animate(this.coordinates(position));this.release(['translate','translated']);};/**
	 * Normalizes an absolute or a relative position of an item.
	 * @public
	 * @param {Number} position - The absolute or relative position to normalize.
	 * @param {Boolean} [relative=false] - Whether the given position is relative or not.
	 * @returns {Number} - The normalized position.
	 */Owl.prototype.normalize=function(position,relative){var n=this._items.length,m=relative?0:this._clones.length;if(!this.isNumeric(position)||n<1){position=undefined;}else if(position<0||position>=n+m){position=((position-m/2)%n+n)%n+m/2;}return position;};/**
	 * Converts an absolute position of an item into a relative one.
	 * @public
	 * @param {Number} position - The absolute position to convert.
	 * @returns {Number} - The converted position.
	 */Owl.prototype.relative=function(position){position-=this._clones.length/2;return this.normalize(position,true);};/**
	 * Gets the maximum position for the current item.
	 * @public
	 * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
	 * @returns {Number}
	 */Owl.prototype.maximum=function(relative){var settings=this.settings,maximum=this._coordinates.length,iterator,reciprocalItemsWidth,elementWidth;if(settings.loop){maximum=this._clones.length/2+this._items.length-1;}else if(settings.autoWidth||settings.merge){iterator=this._items.length;reciprocalItemsWidth=this._items[--iterator].width();elementWidth=this.$element.width();while(iterator--){reciprocalItemsWidth+=this._items[iterator].width()+this.settings.margin;if(reciprocalItemsWidth>elementWidth){break;}}maximum=iterator+1;}else if(settings.center){maximum=this._items.length-1;}else{maximum=this._items.length-settings.items;}if(relative){maximum-=this._clones.length/2;}return Math.max(maximum,0);};/**
	 * Gets the minimum position for the current item.
	 * @public
	 * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
	 * @returns {Number}
	 */Owl.prototype.minimum=function(relative){return relative?0:this._clones.length/2;};/**
	 * Gets an item at the specified relative position.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
	 */Owl.prototype.items=function(position){if(position===undefined){return this._items.slice();}position=this.normalize(position,true);return this._items[position];};/**
	 * Gets an item at the specified relative position.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
	 */Owl.prototype.mergers=function(position){if(position===undefined){return this._mergers.slice();}position=this.normalize(position,true);return this._mergers[position];};/**
	 * Gets the absolute positions of clones for an item.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @returns {Array.<Number>} - The absolute positions of clones for the item or all if no position was given.
	 */Owl.prototype.clones=function(position){var odd=this._clones.length/2,even=odd+this._items.length,map=function map(index){return index%2===0?even+index/2:odd-(index+1)/2;};if(position===undefined){return $.map(this._clones,function(v,i){return map(i);});}return $.map(this._clones,function(v,i){return v===position?map(i):null;});};/**
	 * Sets the current animation speed.
	 * @public
	 * @param {Number} [speed] - The animation speed in milliseconds or nothing to leave it unchanged.
	 * @returns {Number} - The current animation speed in milliseconds.
	 */Owl.prototype.speed=function(speed){if(speed!==undefined){this._speed=speed;}return this._speed;};/**
	 * Gets the coordinate of an item.
	 * @todo The name of this method is missleanding.
	 * @public
	 * @param {Number} position - The absolute position of the item within `minimum()` and `maximum()`.
	 * @returns {Number|Array.<Number>} - The coordinate of the item in pixel or all coordinates.
	 */Owl.prototype.coordinates=function(position){var multiplier=1,newPosition=position-1,coordinate;if(position===undefined){return $.map(this._coordinates,$.proxy(function(coordinate,index){return this.coordinates(index);},this));}if(this.settings.center){if(this.settings.rtl){multiplier=-1;newPosition=position+1;}coordinate=this._coordinates[position];coordinate+=(this.width()-coordinate+(this._coordinates[newPosition]||0))/2*multiplier;}else{coordinate=this._coordinates[newPosition]||0;}coordinate=Math.ceil(coordinate);return coordinate;};/**
	 * Calculates the speed for a translation.
	 * @protected
	 * @param {Number} from - The absolute position of the start item.
	 * @param {Number} to - The absolute position of the target item.
	 * @param {Number} [factor=undefined] - The time factor in milliseconds.
	 * @returns {Number} - The time in milliseconds for the translation.
	 */Owl.prototype.duration=function(from,to,factor){if(factor===0){return 0;}return Math.min(Math.max(Math.abs(to-from),1),6)*Math.abs(factor||this.settings.smartSpeed);};/**
	 * Slides to the specified item.
	 * @public
	 * @param {Number} position - The position of the item.
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */Owl.prototype.to=function(position,speed){var current=this.current(),revert=null,distance=position-this.relative(current),direction=(distance>0)-(distance<0),items=this._items.length,minimum=this.minimum(),maximum=this.maximum();if(this.settings.loop){if(!this.settings.rewind&&Math.abs(distance)>items/2){distance+=direction*-1*items;}position=current+distance;revert=((position-minimum)%items+items)%items+minimum;if(revert!==position&&revert-distance<=maximum&&revert-distance>0){current=revert-distance;position=revert;this.reset(current);}}else if(this.settings.rewind){maximum+=1;position=(position%maximum+maximum)%maximum;}else{position=Math.max(minimum,Math.min(maximum,position));}this.speed(this.duration(current,position,speed));this.current(position);if(this.$element.is(':visible')){this.update();}};/**
	 * Slides to the next item.
	 * @public
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */Owl.prototype.next=function(speed){speed=speed||false;this.to(this.relative(this.current())+1,speed);};/**
	 * Slides to the previous item.
	 * @public
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */Owl.prototype.prev=function(speed){speed=speed||false;this.to(this.relative(this.current())-1,speed);};/**
	 * Handles the end of an animation.
	 * @protected
	 * @param {Event} event - The event arguments.
	 */Owl.prototype.onTransitionEnd=function(event){// if css2 animation then event object is undefined
if(event!==undefined){event.stopPropagation();// Catch only owl-stage transitionEnd event
if((event.target||event.srcElement||event.originalTarget)!==this.$stage.get(0)){return false;}}this.leave('animating');this.trigger('translated');};/**
	 * Gets viewport width.
	 * @protected
	 * @return {Number} - The width in pixel.
	 */Owl.prototype.viewport=function(){var width;if(this.options.responsiveBaseElement!==window){width=$(this.options.responsiveBaseElement).width();}else if(window.innerWidth){width=window.innerWidth;}else if(document.documentElement&&document.documentElement.clientWidth){width=document.documentElement.clientWidth;}else{console.warn('Can not detect viewport width.');}return width;};/**
	 * Replaces the current content.
	 * @public
	 * @param {HTMLElement|jQuery|String} content - The new content.
	 */Owl.prototype.replace=function(content){this.$stage.empty();this._items=[];if(content){content=content instanceof jQuery?content:$(content);}if(this.settings.nestedItemSelector){content=content.find('.'+this.settings.nestedItemSelector);}content.filter(function(){return this.nodeType===1;}).each($.proxy(function(index,item){item=this.prepare(item);this.$stage.append(item);this._items.push(item);this._mergers.push(item.find('[data-merge]').addBack('[data-merge]').attr('data-merge')*1||1);},this));this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0);this.invalidate('items');};/**
	 * Adds an item.
	 * @todo Use `item` instead of `content` for the event arguments.
	 * @public
	 * @param {HTMLElement|jQuery|String} content - The item content to add.
	 * @param {Number} [position] - The relative position at which to insert the item otherwise the item will be added to the end.
	 */Owl.prototype.add=function(content,position){var current=this.relative(this._current);position=position===undefined?this._items.length:this.normalize(position,true);content=content instanceof jQuery?content:$(content);this.trigger('add',{content:content,position:position});content=this.prepare(content);if(this._items.length===0||position===this._items.length){this._items.length===0&&this.$stage.append(content);this._items.length!==0&&this._items[position-1].after(content);this._items.push(content);this._mergers.push(content.find('[data-merge]').addBack('[data-merge]').attr('data-merge')*1||1);}else{this._items[position].before(content);this._items.splice(position,0,content);this._mergers.splice(position,0,content.find('[data-merge]').addBack('[data-merge]').attr('data-merge')*1||1);}this._items[current]&&this.reset(this._items[current].index());this.invalidate('items');this.trigger('added',{content:content,position:position});};/**
	 * Removes an item by its position.
	 * @todo Use `item` instead of `content` for the event arguments.
	 * @public
	 * @param {Number} position - The relative position of the item to remove.
	 */Owl.prototype.remove=function(position){position=this.normalize(position,true);if(position===undefined){return;}this.trigger('remove',{content:this._items[position],position:position});this._items[position].remove();this._items.splice(position,1);this._mergers.splice(position,1);this.invalidate('items');this.trigger('removed',{content:null,position:position});};/**
	 * Preloads images with auto width.
	 * @todo Replace by a more generic approach
	 * @protected
	 */Owl.prototype.preloadAutoWidthImages=function(images){images.each($.proxy(function(i,element){this.enter('pre-loading');element=$(element);$(new Image()).one('load',$.proxy(function(e){element.attr('src',e.target.src);element.css('opacity',1);this.leave('pre-loading');!this.is('pre-loading')&&!this.is('initializing')&&this.refresh();},this)).attr('src',element.attr('src')||element.attr('data-src')||element.attr('data-src-retina'));},this));};/**
	 * Destroys the carousel.
	 * @public
	 */Owl.prototype.destroy=function(){this.$element.off('.owl.core');this.$stage.off('.owl.core');$(document).off('.owl.core');if(this.settings.responsive!==false){window.clearTimeout(this.resizeTimer);this.off(window,'resize',this._handlers.onThrottledResize);}for(var i in this._plugins){this._plugins[i].destroy();}this.$stage.children('.cloned').remove();this.$stage.unwrap();this.$stage.children().contents().unwrap();this.$stage.children().unwrap();this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr('class',this.$element.attr('class').replace(new RegExp(this.options.responsiveClass+'-\\S+\\s','g'),'')).removeData('owl.carousel');};/**
	 * Operators to calculate right-to-left and left-to-right.
	 * @protected
	 * @param {Number} [a] - The left side operand.
	 * @param {String} [o] - The operator.
	 * @param {Number} [b] - The right side operand.
	 */Owl.prototype.op=function(a,o,b){var rtl=this.settings.rtl;switch(o){case'<':return rtl?a>b:a<b;case'>':return rtl?a<b:a>b;case'>=':return rtl?a<=b:a>=b;case'<=':return rtl?a>=b:a<=b;default:break;}};/**
	 * Attaches to an internal event.
	 * @protected
	 * @param {HTMLElement} element - The event source.
	 * @param {String} event - The event name.
	 * @param {Function} listener - The event handler to attach.
	 * @param {Boolean} capture - Wether the event should be handled at the capturing phase or not.
	 */Owl.prototype.on=function(element,event,listener,capture){if(element.addEventListener){element.addEventListener(event,listener,capture);}else if(element.attachEvent){element.attachEvent('on'+event,listener);}};/**
	 * Detaches from an internal event.
	 * @protected
	 * @param {HTMLElement} element - The event source.
	 * @param {String} event - The event name.
	 * @param {Function} listener - The attached event handler to detach.
	 * @param {Boolean} capture - Wether the attached event handler was registered as a capturing listener or not.
	 */Owl.prototype.off=function(element,event,listener,capture){if(element.removeEventListener){element.removeEventListener(event,listener,capture);}else if(element.detachEvent){element.detachEvent('on'+event,listener);}};/**
	 * Triggers a public event.
	 * @todo Remove `status`, `relatedTarget` should be used instead.
	 * @protected
	 * @param {String} name - The event name.
	 * @param {*} [data=null] - The event data.
	 * @param {String} [namespace=carousel] - The event namespace.
	 * @param {String} [state] - The state which is associated with the event.
	 * @param {Boolean} [enter=false] - Indicates if the call enters the specified state or not.
	 * @returns {Event} - The event arguments.
	 */Owl.prototype.trigger=function(name,data,namespace,state,enter){var status={item:{count:this._items.length,index:this.current()}},handler=$.camelCase($.grep(['on',name,namespace],function(v){return v;}).join('-').toLowerCase()),event=$.Event([name,'owl',namespace||'carousel'].join('.').toLowerCase(),$.extend({relatedTarget:this},status,data));if(!this._supress[name]){$.each(this._plugins,function(name,plugin){if(plugin.onTrigger){plugin.onTrigger(event);}});this.register({type:Owl.Type.Event,name:name});this.$element.trigger(event);if(this.settings&&typeof this.settings[handler]==='function'){this.settings[handler].call(this,event);}}return event;};/**
	 * Enters a state.
	 * @param name - The state name.
	 */Owl.prototype.enter=function(name){$.each([name].concat(this._states.tags[name]||[]),$.proxy(function(i,name){if(this._states.current[name]===undefined){this._states.current[name]=0;}this._states.current[name]++;},this));};/**
	 * Leaves a state.
	 * @param name - The state name.
	 */Owl.prototype.leave=function(name){$.each([name].concat(this._states.tags[name]||[]),$.proxy(function(i,name){this._states.current[name]--;},this));};/**
	 * Registers an event or state.
	 * @public
	 * @param {Object} object - The event or state to register.
	 */Owl.prototype.register=function(object){if(object.type===Owl.Type.Event){if(!$.event.special[object.name]){$.event.special[object.name]={};}if(!$.event.special[object.name].owl){var _default=$.event.special[object.name]._default;$.event.special[object.name]._default=function(e){if(_default&&_default.apply&&(!e.namespace||e.namespace.indexOf('owl')===-1)){return _default.apply(this,arguments);}return e.namespace&&e.namespace.indexOf('owl')>-1;};$.event.special[object.name].owl=true;}}else if(object.type===Owl.Type.State){if(!this._states.tags[object.name]){this._states.tags[object.name]=object.tags;}else{this._states.tags[object.name]=this._states.tags[object.name].concat(object.tags);}this._states.tags[object.name]=$.grep(this._states.tags[object.name],$.proxy(function(tag,i){return $.inArray(tag,this._states.tags[object.name])===i;},this));}};/**
	 * Suppresses events.
	 * @protected
	 * @param {Array.<String>} events - The events to suppress.
	 */Owl.prototype.suppress=function(events){$.each(events,$.proxy(function(index,event){this._supress[event]=true;},this));};/**
	 * Releases suppressed events.
	 * @protected
	 * @param {Array.<String>} events - The events to release.
	 */Owl.prototype.release=function(events){$.each(events,$.proxy(function(index,event){delete this._supress[event];},this));};/**
	 * Gets unified pointer coordinates from event.
	 * @todo #261
	 * @protected
	 * @param {Event} - The `mousedown` or `touchstart` event.
	 * @returns {Object} - Contains `x` and `y` coordinates of current pointer position.
	 */Owl.prototype.pointer=function(event){var result={x:null,y:null};event=event.originalEvent||event||window.event;event=event.touches&&event.touches.length?event.touches[0]:event.changedTouches&&event.changedTouches.length?event.changedTouches[0]:event;if(event.pageX){result.x=event.pageX;result.y=event.pageY;}else{result.x=event.clientX;result.y=event.clientY;}return result;};/**
	 * Determines if the input is a Number or something that can be coerced to a Number
	 * @protected
	 * @param {Number|String|Object|Array|Boolean|RegExp|Function|Symbol} - The input to be tested
	 * @returns {Boolean} - An indication if the input is a Number or can be coerced to a Number
	 */Owl.prototype.isNumeric=function(number){return!isNaN(parseFloat(number));};/**
	 * Gets the difference of two vectors.
	 * @todo #261
	 * @protected
	 * @param {Object} - The first vector.
	 * @param {Object} - The second vector.
	 * @returns {Object} - The difference.
	 */Owl.prototype.difference=function(first,second){return{x:first.x-second.x,y:first.y-second.y};};/**
	 * The jQuery Plugin for the Owl Carousel
	 * @todo Navigation plugin `next` and `prev`
	 * @public
	 */$.fn.owlCarousel=function(option){var args=Array.prototype.slice.call(arguments,1);return this.each(function(){var $this=$(this),data=$this.data('owl.carousel');if(!data){data=new Owl(this,(typeof option==="undefined"?"undefined":_typeof2(option))=='object'&&option);$this.data('owl.carousel',data);$.each(['next','prev','to','destroy','refresh','replace','add','remove'],function(i,event){data.register({type:Owl.Type.Event,name:event});data.$element.on(event+'.owl.carousel.core',$.proxy(function(e){if(e.namespace&&e.relatedTarget!==this){this.suppress([event]);data[event].apply(this,[].slice.call(arguments,1));this.release([event]);}},data));});}if(typeof option=='string'&&option.charAt(0)!=='_'){data[option].apply(data,args);}});};/**
	 * The constructor for the jQuery Plugin
	 * @public
	 */$.fn.owlCarousel.Constructor=Owl;})(window.Zepto||window.jQuery,window,document);/**
 * AutoRefresh Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){/**
	 * Creates the auto refresh plugin.
	 * @class The Auto Refresh Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */var AutoRefresh=function AutoRefresh(carousel){/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */this._core=carousel;/**
		 * Refresh interval.
		 * @protected
		 * @type {number}
		 */this._interval=null;/**
		 * Whether the element is currently visible or not.
		 * @protected
		 * @type {Boolean}
		 */this._visible=null;/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */this._handlers={'initialized.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.autoRefresh){this.watch();}},this)};// set default options
this._core.options=$.extend({},AutoRefresh.Defaults,this._core.options);// register event handlers
this._core.$element.on(this._handlers);};/**
	 * Default options.
	 * @public
	 */AutoRefresh.Defaults={autoRefresh:true,autoRefreshInterval:500};/**
	 * Watches the element.
	 */AutoRefresh.prototype.watch=function(){if(this._interval){return;}this._visible=this._core.$element.is(':visible');this._interval=window.setInterval($.proxy(this.refresh,this),this._core.settings.autoRefreshInterval);};/**
	 * Refreshes the element.
	 */AutoRefresh.prototype.refresh=function(){if(this._core.$element.is(':visible')===this._visible){return;}this._visible=!this._visible;this._core.$element.toggleClass('owl-hidden',!this._visible);this._visible&&this._core.invalidate('width')&&this._core.refresh();};/**
	 * Destroys the plugin.
	 */AutoRefresh.prototype.destroy=function(){var handler,property;window.clearInterval(this._interval);for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.AutoRefresh=AutoRefresh;})(window.Zepto||window.jQuery,window,document);/**
 * Lazy Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){/**
	 * Creates the lazy plugin.
	 * @class The Lazy Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */var Lazy=function Lazy(carousel){/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */this._core=carousel;/**
		 * Already loaded items.
		 * @protected
		 * @type {Array.<jQuery>}
		 */this._loaded=[];/**
		 * Event handlers.
		 * @protected
		 * @type {Object}
		 */this._handlers={'initialized.owl.carousel change.owl.carousel resized.owl.carousel':$.proxy(function(e){if(!e.namespace){return;}if(!this._core.settings||!this._core.settings.lazyLoad){return;}if(e.property&&e.property.name=='position'||e.type=='initialized'){var settings=this._core.settings,n=settings.center&&Math.ceil(settings.items/2)||settings.items,i=settings.center&&n*-1||0,position=(e.property&&e.property.value!==undefined?e.property.value:this._core.current())+i,clones=this._core.clones().length,load=$.proxy(function(i,v){this.load(v);},this);while(i++<n){this.load(clones/2+this._core.relative(position));clones&&$.each(this._core.clones(this._core.relative(position)),load);position++;}}},this)};// set the default options
this._core.options=$.extend({},Lazy.Defaults,this._core.options);// register event handler
this._core.$element.on(this._handlers);};/**
	 * Default options.
	 * @public
	 */Lazy.Defaults={lazyLoad:false};/**
	 * Loads all resources of an item at the specified position.
	 * @param {Number} position - The absolute position of the item.
	 * @protected
	 */Lazy.prototype.load=function(position){var $item=this._core.$stage.children().eq(position),$elements=$item&&$item.find('.owl-lazy');if(!$elements||$.inArray($item.get(0),this._loaded)>-1){return;}$elements.each($.proxy(function(index,element){var $element=$(element),image,url=window.devicePixelRatio>1&&$element.attr('data-src-retina')||$element.attr('data-src');this._core.trigger('load',{element:$element,url:url},'lazy');if($element.is('img')){$element.one('load.owl.lazy',$.proxy(function(){$element.css('opacity',1);this._core.trigger('loaded',{element:$element,url:url},'lazy');},this)).attr('src',url);}else{image=new Image();image.onload=$.proxy(function(){$element.css({'background-image':'url("'+url+'")','opacity':'1'});this._core.trigger('loaded',{element:$element,url:url},'lazy');},this);image.src=url;}},this));this._loaded.push($item.get(0));};/**
	 * Destroys the plugin.
	 * @public
	 */Lazy.prototype.destroy=function(){var handler,property;for(handler in this.handlers){this._core.$element.off(handler,this.handlers[handler]);}for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.Lazy=Lazy;})(window.Zepto||window.jQuery,window,document);/**
 * AutoHeight Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){/**
	 * Creates the auto height plugin.
	 * @class The Auto Height Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */var AutoHeight=function AutoHeight(carousel){/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */this._core=carousel;/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */this._handlers={'initialized.owl.carousel refreshed.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.autoHeight){this.update();}},this),'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.autoHeight&&e.property.name=='position'){this.update();}},this),'loaded.owl.lazy':$.proxy(function(e){if(e.namespace&&this._core.settings.autoHeight&&e.element.closest('.'+this._core.settings.itemClass).index()===this._core.current()){this.update();}},this)};// set default options
this._core.options=$.extend({},AutoHeight.Defaults,this._core.options);// register event handlers
this._core.$element.on(this._handlers);};/**
	 * Default options.
	 * @public
	 */AutoHeight.Defaults={autoHeight:false,autoHeightClass:'owl-height'};/**
	 * Updates the view.
	 */AutoHeight.prototype.update=function(){var start=this._core._current,end=start+this._core.settings.items,visible=this._core.$stage.children().toArray().slice(start,end),heights=[],maxheight=0;$.each(visible,function(index,item){heights.push($(item).height());});maxheight=Math.max.apply(null,heights);this._core.$stage.parent().height(maxheight).addClass(this._core.settings.autoHeightClass);};AutoHeight.prototype.destroy=function(){var handler,property;for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.AutoHeight=AutoHeight;})(window.Zepto||window.jQuery,window,document);/**
 * Video Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){/**
	 * Creates the video plugin.
	 * @class The Video Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */var Video=function Video(carousel){/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */this._core=carousel;/**
		 * Cache all video URLs.
		 * @protected
		 * @type {Object}
		 */this._videos={};/**
		 * Current playing item.
		 * @protected
		 * @type {jQuery}
		 */this._playing=null;/**
		 * All event handlers.
		 * @todo The cloned content removale is too late
		 * @protected
		 * @type {Object}
		 */this._handlers={'initialized.owl.carousel':$.proxy(function(e){if(e.namespace){this._core.register({type:'state',name:'playing',tags:['interacting']});}},this),'resize.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.video&&this.isInFullScreen()){e.preventDefault();}},this),'refreshed.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.is('resizing')){this._core.$stage.find('.cloned .owl-video-frame').remove();}},this),'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name==='position'&&this._playing){this.stop();}},this),'prepared.owl.carousel':$.proxy(function(e){if(!e.namespace){return;}var $element=$(e.content).find('.owl-video');if($element.length){$element.css('display','none');this.fetch($element,$(e.content));}},this)};// set default options
this._core.options=$.extend({},Video.Defaults,this._core.options);// register event handlers
this._core.$element.on(this._handlers);this._core.$element.on('click.owl.video','.owl-video-play-icon',$.proxy(function(e){this.play(e);},this));};/**
	 * Default options.
	 * @public
	 */Video.Defaults={video:false,videoHeight:false,videoWidth:false};/**
	 * Gets the video ID and the type (YouTube/Vimeo/vzaar only).
	 * @protected
	 * @param {jQuery} target - The target containing the video data.
	 * @param {jQuery} item - The item containing the video.
	 */Video.prototype.fetch=function(target,item){var type=function(){if(target.attr('data-vimeo-id')){return'vimeo';}else if(target.attr('data-vzaar-id')){return'vzaar';}else{return'youtube';}}(),id=target.attr('data-vimeo-id')||target.attr('data-youtube-id')||target.attr('data-vzaar-id'),width=target.attr('data-width')||this._core.settings.videoWidth,height=target.attr('data-height')||this._core.settings.videoHeight,url=target.attr('href');if(url){/*
					Parses the id's out of the following urls (and probably more):
					https://www.youtube.com/watch?v=:id
					https://youtu.be/:id
					https://vimeo.com/:id
					https://vimeo.com/channels/:channel/:id
					https://vimeo.com/groups/:group/videos/:id
					https://app.vzaar.com/videos/:id

					Visual example: https://regexper.com/#(http%3A%7Chttps%3A%7C)%5C%2F%5C%2F(player.%7Cwww.%7Capp.)%3F(vimeo%5C.com%7Cyoutu(be%5C.com%7C%5C.be%7Cbe%5C.googleapis%5C.com)%7Cvzaar%5C.com)%5C%2F(video%5C%2F%7Cvideos%5C%2F%7Cembed%5C%2F%7Cchannels%5C%2F.%2B%5C%2F%7Cgroups%5C%2F.%2B%5C%2F%7Cwatch%5C%3Fv%3D%7Cv%5C%2F)%3F(%5BA-Za-z0-9._%25-%5D*)(%5C%26%5CS%2B)%3F
			*/id=url.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);if(id[3].indexOf('youtu')>-1){type='youtube';}else if(id[3].indexOf('vimeo')>-1){type='vimeo';}else if(id[3].indexOf('vzaar')>-1){type='vzaar';}else{throw new Error('Video URL not supported.');}id=id[6];}else{throw new Error('Missing video URL.');}this._videos[url]={type:type,id:id,width:width,height:height};item.attr('data-video',url);this.thumbnail(target,this._videos[url]);};/**
	 * Creates video thumbnail.
	 * @protected
	 * @param {jQuery} target - The target containing the video data.
	 * @param {Object} info - The video info object.
	 * @see `fetch`
	 */Video.prototype.thumbnail=function(target,video){var tnLink,icon,path,dimensions=video.width&&video.height?'style="width:'+video.width+'px;height:'+video.height+'px;"':'',customTn=target.find('img'),srcType='src',lazyClass='',settings=this._core.settings,create=function create(path){icon='<div class="owl-video-play-icon"></div>';if(settings.lazyLoad){tnLink='<div class="owl-video-tn '+lazyClass+'" '+srcType+'="'+path+'"></div>';}else{tnLink='<div class="owl-video-tn" style="opacity:1;background-image:url('+path+')"></div>';}target.after(tnLink);target.after(icon);};// wrap video content into owl-video-wrapper div
target.wrap('<div class="owl-video-wrapper"'+dimensions+'></div>');if(this._core.settings.lazyLoad){srcType='data-src';lazyClass='owl-lazy';}// custom thumbnail
if(customTn.length){create(customTn.attr(srcType));customTn.remove();return false;}if(video.type==='youtube'){path="//img.youtube.com/vi/"+video.id+"/hqdefault.jpg";create(path);}else if(video.type==='vimeo'){$.ajax({type:'GET',url:'//vimeo.com/api/v2/video/'+video.id+'.json',jsonp:'callback',dataType:'jsonp',success:function success(data){path=data[0].thumbnail_large;create(path);}});}else if(video.type==='vzaar'){$.ajax({type:'GET',url:'//vzaar.com/api/videos/'+video.id+'.json',jsonp:'callback',dataType:'jsonp',success:function success(data){path=data.framegrab_url;create(path);}});}};/**
	 * Stops the current video.
	 * @public
	 */Video.prototype.stop=function(){this._core.trigger('stop',null,'video');this._playing.find('.owl-video-frame').remove();this._playing.removeClass('owl-video-playing');this._playing=null;this._core.leave('playing');this._core.trigger('stopped',null,'video');};/**
	 * Starts the current video.
	 * @public
	 * @param {Event} event - The event arguments.
	 */Video.prototype.play=function(event){var target=$(event.target),item=target.closest('.'+this._core.settings.itemClass),video=this._videos[item.attr('data-video')],width=video.width||'100%',height=video.height||this._core.$stage.height(),html;if(this._playing){return;}this._core.enter('playing');this._core.trigger('play',null,'video');item=this._core.items(this._core.relative(item.index()));this._core.reset(item.index());if(video.type==='youtube'){html='<iframe width="'+width+'" height="'+height+'" src="//www.youtube.com/embed/'+video.id+'?autoplay=1&rel=0&v='+video.id+'" frameborder="0" allowfullscreen></iframe>';}else if(video.type==='vimeo'){html='<iframe src="//player.vimeo.com/video/'+video.id+'?autoplay=1" width="'+width+'" height="'+height+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';}else if(video.type==='vzaar'){html='<iframe frameborder="0"'+'height="'+height+'"'+'width="'+width+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen '+'src="//view.vzaar.com/'+video.id+'/player?autoplay=true"></iframe>';}$('<div class="owl-video-frame">'+html+'</div>').insertAfter(item.find('.owl-video'));this._playing=item.addClass('owl-video-playing');};/**
	 * Checks whether an video is currently in full screen mode or not.
	 * @todo Bad style because looks like a readonly method but changes members.
	 * @protected
	 * @returns {Boolean}
	 */Video.prototype.isInFullScreen=function(){var element=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;return element&&$(element).parent().hasClass('owl-video-frame');};/**
	 * Destroys the plugin.
	 */Video.prototype.destroy=function(){var handler,property;this._core.$element.off('click.owl.video');for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.Video=Video;})(window.Zepto||window.jQuery,window,document);/**
 * Animate Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){/**
	 * Creates the animate plugin.
	 * @class The Navigation Plugin
	 * @param {Owl} scope - The Owl Carousel
	 */var Animate=function Animate(scope){this.core=scope;this.core.options=$.extend({},Animate.Defaults,this.core.options);this.swapping=true;this.previous=undefined;this.next=undefined;this.handlers={'change.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name=='position'){this.previous=this.core.current();this.next=e.property.value;}},this),'drag.owl.carousel dragged.owl.carousel translated.owl.carousel':$.proxy(function(e){if(e.namespace){this.swapping=e.type=='translated';}},this),'translate.owl.carousel':$.proxy(function(e){if(e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)){this.swap();}},this)};this.core.$element.on(this.handlers);};/**
	 * Default options.
	 * @public
	 */Animate.Defaults={animateOut:false,animateIn:false};/**
	 * Toggles the animation classes whenever an translations starts.
	 * @protected
	 * @returns {Boolean|undefined}
	 */Animate.prototype.swap=function(){if(this.core.settings.items!==1){return;}if(!$.support.animation||!$.support.transition){return;}this.core.speed(0);var left,clear=$.proxy(this.clear,this),previous=this.core.$stage.children().eq(this.previous),next=this.core.$stage.children().eq(this.next),incoming=this.core.settings.animateIn,outgoing=this.core.settings.animateOut;if(this.core.current()===this.previous){return;}if(outgoing){left=this.core.coordinates(this.previous)-this.core.coordinates(this.next);previous.one($.support.animation.end,clear).css({'left':left+'px'}).addClass('animated owl-animated-out').addClass(outgoing);}if(incoming){next.one($.support.animation.end,clear).addClass('animated owl-animated-in').addClass(incoming);}};Animate.prototype.clear=function(e){$(e.target).css({'left':''}).removeClass('animated owl-animated-out owl-animated-in').removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut);this.core.onTransitionEnd();};/**
	 * Destroys the plugin.
	 * @public
	 */Animate.prototype.destroy=function(){var handler,property;for(handler in this.handlers){this.core.$element.off(handler,this.handlers[handler]);}for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.Animate=Animate;})(window.Zepto||window.jQuery,window,document);/**
 * Autoplay Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){/**
	 * Creates the autoplay plugin.
	 * @class The Autoplay Plugin
	 * @param {Owl} scope - The Owl Carousel
	 */var Autoplay=function Autoplay(carousel){/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */this._core=carousel;/**
		 * The autoplay timeout.
		 * @type {Timeout}
		 */this._timeout=null;/**
		 * Indicates whenever the autoplay is paused.
		 * @type {Boolean}
		 */this._paused=false;/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */this._handlers={'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name==='settings'){if(this._core.settings.autoplay){this.play();}else{this.stop();}}else if(e.namespace&&e.property.name==='position'){//console.log('play?', e);
if(this._core.settings.autoplay){this._setAutoPlayInterval();}}},this),'initialized.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.autoplay){this.play();}},this),'play.owl.autoplay':$.proxy(function(e,t,s){if(e.namespace){this.play(t,s);}},this),'stop.owl.autoplay':$.proxy(function(e){if(e.namespace){this.stop();}},this),'mouseover.owl.autoplay':$.proxy(function(){if(this._core.settings.autoplayHoverPause&&this._core.is('rotating')){this.pause();}},this),'mouseleave.owl.autoplay':$.proxy(function(){if(this._core.settings.autoplayHoverPause&&this._core.is('rotating')){this.play();}},this),'touchstart.owl.core':$.proxy(function(){if(this._core.settings.autoplayHoverPause&&this._core.is('rotating')){this.pause();}},this),'touchend.owl.core':$.proxy(function(){if(this._core.settings.autoplayHoverPause){this.play();}},this)};// register event handlers
this._core.$element.on(this._handlers);// set default options
this._core.options=$.extend({},Autoplay.Defaults,this._core.options);};/**
	 * Default options.
	 * @public
	 */Autoplay.Defaults={autoplay:false,autoplayTimeout:5000,autoplayHoverPause:false,autoplaySpeed:false};/**
	 * Starts the autoplay.
	 * @public
	 * @param {Number} [timeout] - The interval before the next animation starts.
	 * @param {Number} [speed] - The animation speed for the animations.
	 */Autoplay.prototype.play=function(timeout,speed){this._paused=false;if(this._core.is('rotating')){return;}this._core.enter('rotating');this._setAutoPlayInterval();};/**
	 * Gets a new timeout
	 * @private
	 * @param {Number} [timeout] - The interval before the next animation starts.
	 * @param {Number} [speed] - The animation speed for the animations.
	 * @return {Timeout}
	 */Autoplay.prototype._getNextTimeout=function(timeout,speed){if(this._timeout){window.clearTimeout(this._timeout);}return window.setTimeout($.proxy(function(){if(this._paused||this._core.is('busy')||this._core.is('interacting')||document.hidden){return;}this._core.next(speed||this._core.settings.autoplaySpeed);},this),timeout||this._core.settings.autoplayTimeout);};/**
	 * Sets autoplay in motion.
	 * @private
	 */Autoplay.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout();};/**
	 * Stops the autoplay.
	 * @public
	 */Autoplay.prototype.stop=function(){if(!this._core.is('rotating')){return;}window.clearTimeout(this._timeout);this._core.leave('rotating');};/**
	 * Stops the autoplay.
	 * @public
	 */Autoplay.prototype.pause=function(){if(!this._core.is('rotating')){return;}this._paused=true;};/**
	 * Destroys the plugin.
	 */Autoplay.prototype.destroy=function(){var handler,property;this.stop();for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.autoplay=Autoplay;})(window.Zepto||window.jQuery,window,document);/**
 * Navigation Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){'use strict';/**
	 * Creates the navigation plugin.
	 * @class The Navigation Plugin
	 * @param {Owl} carousel - The Owl Carousel.
	 */var Navigation=function Navigation(carousel){/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */this._core=carousel;/**
		 * Indicates whether the plugin is initialized or not.
		 * @protected
		 * @type {Boolean}
		 */this._initialized=false;/**
		 * The current paging indexes.
		 * @protected
		 * @type {Array}
		 */this._pages=[];/**
		 * All DOM elements of the user interface.
		 * @protected
		 * @type {Object}
		 */this._controls={};/**
		 * Markup for an indicator.
		 * @protected
		 * @type {Array.<String>}
		 */this._templates=[];/**
		 * The carousel element.
		 * @type {jQuery}
		 */this.$element=this._core.$element;/**
		 * Overridden methods of the carousel.
		 * @protected
		 * @type {Object}
		 */this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to};/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */this._handlers={'prepared.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.dotsData){this._templates.push('<div class="'+this._core.settings.dotClass+'">'+$(e.content).find('[data-dot]').addBack('[data-dot]').attr('data-dot')+'</div>');}},this),'added.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.dotsData){this._templates.splice(e.position,0,this._templates.pop());}},this),'remove.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.dotsData){this._templates.splice(e.position,1);}},this),'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name=='position'){this.draw();}},this),'initialized.owl.carousel':$.proxy(function(e){if(e.namespace&&!this._initialized){this._core.trigger('initialize',null,'navigation');this.initialize();this.update();this.draw();this._initialized=true;this._core.trigger('initialized',null,'navigation');}},this),'refreshed.owl.carousel':$.proxy(function(e){if(e.namespace&&this._initialized){this._core.trigger('refresh',null,'navigation');this.update();this.draw();this._core.trigger('refreshed',null,'navigation');}},this)};// set default options
this._core.options=$.extend({},Navigation.Defaults,this._core.options);// register event handlers
this.$element.on(this._handlers);};/**
	 * Default options.
	 * @public
	 * @todo Rename `slideBy` to `navBy`
	 */Navigation.Defaults={nav:false,navText:['prev','next'],navSpeed:false,navElement:'div',navContainer:false,navContainerClass:'owl-nav',navClass:['owl-prev','owl-next'],slideBy:1,dotClass:'owl-dot',dotsClass:'owl-dots',dots:true,dotsEach:false,dotsData:false,dotsSpeed:false,dotsContainer:false};/**
	 * Initializes the layout of the plugin and extends the carousel.
	 * @protected
	 */Navigation.prototype.initialize=function(){var override,settings=this._core.settings;// create DOM structure for relative navigation
this._controls.$relative=(settings.navContainer?$(settings.navContainer):$('<div>').addClass(settings.navContainerClass).appendTo(this.$element)).addClass('disabled');this._controls.$previous=$('<'+settings.navElement+'>').addClass(settings.navClass[0]).html(settings.navText[0]).prependTo(this._controls.$relative).on('click',$.proxy(function(e){this.prev(settings.navSpeed);},this));this._controls.$next=$('<'+settings.navElement+'>').addClass(settings.navClass[1]).html(settings.navText[1]).appendTo(this._controls.$relative).on('click',$.proxy(function(e){this.next(settings.navSpeed);},this));// create DOM structure for absolute navigation
if(!settings.dotsData){this._templates=[$('<div>').addClass(settings.dotClass).append($('<span>')).prop('outerHTML')];}this._controls.$absolute=(settings.dotsContainer?$(settings.dotsContainer):$('<div>').addClass(settings.dotsClass).appendTo(this.$element)).addClass('disabled');this._controls.$absolute.on('click','div',$.proxy(function(e){var index=$(e.target).parent().is(this._controls.$absolute)?$(e.target).index():$(e.target).parent().index();e.preventDefault();this.to(index,settings.dotsSpeed);},this));// override public methods of the carousel
for(override in this._overrides){this._core[override]=$.proxy(this[override],this);}};/**
	 * Destroys the plugin.
	 * @protected
	 */Navigation.prototype.destroy=function(){var handler,control,property,override;for(handler in this._handlers){this.$element.off(handler,this._handlers[handler]);}for(control in this._controls){this._controls[control].remove();}for(override in this.overides){this._core[override]=this._overrides[override];}for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};/**
	 * Updates the internal state.
	 * @protected
	 */Navigation.prototype.update=function(){var i,j,k,lower=this._core.clones().length/2,upper=lower+this._core.items().length,maximum=this._core.maximum(true),settings=this._core.settings,size=settings.center||settings.autoWidth||settings.dotsData?1:settings.dotsEach||settings.items;if(settings.slideBy!=='page'){settings.slideBy=Math.min(settings.slideBy,settings.items);}if(settings.dots||settings.slideBy=='page'){this._pages=[];for(i=lower,j=0,k=0;i<upper;i++){if(j>=size||j===0){this._pages.push({start:Math.min(maximum,i-lower),end:i-lower+size-1});if(Math.min(maximum,i-lower)===maximum){break;}j=0,++k;}j+=this._core.mergers(this._core.relative(i));}}};/**
	 * Draws the user interface.
	 * @todo The option `dotsData` wont work.
	 * @protected
	 */Navigation.prototype.draw=function(){var difference,settings=this._core.settings,disabled=this._core.items().length<=settings.items,index=this._core.relative(this._core.current()),loop=settings.loop||settings.rewind;this._controls.$relative.toggleClass('disabled',!settings.nav||disabled);if(settings.nav){this._controls.$previous.toggleClass('disabled',!loop&&index<=this._core.minimum(true));this._controls.$next.toggleClass('disabled',!loop&&index>=this._core.maximum(true));}this._controls.$absolute.toggleClass('disabled',!settings.dots||disabled);if(settings.dots){difference=this._pages.length-this._controls.$absolute.children().length;if(settings.dotsData&&difference!==0){this._controls.$absolute.html(this._templates.join(''));}else if(difference>0){this._controls.$absolute.append(new Array(difference+1).join(this._templates[0]));}else if(difference<0){this._controls.$absolute.children().slice(difference).remove();}this._controls.$absolute.find('.active').removeClass('active');this._controls.$absolute.children().eq($.inArray(this.current(),this._pages)).addClass('active');}};/**
	 * Extends event data.
	 * @protected
	 * @param {Event} event - The event object which gets thrown.
	 */Navigation.prototype.onTrigger=function(event){var settings=this._core.settings;event.page={index:$.inArray(this.current(),this._pages),count:this._pages.length,size:settings&&(settings.center||settings.autoWidth||settings.dotsData?1:settings.dotsEach||settings.items)};};/**
	 * Gets the current page position of the carousel.
	 * @protected
	 * @returns {Number}
	 */Navigation.prototype.current=function(){var current=this._core.relative(this._core.current());return $.grep(this._pages,$.proxy(function(page,index){return page.start<=current&&page.end>=current;},this)).pop();};/**
	 * Gets the current succesor/predecessor position.
	 * @protected
	 * @returns {Number}
	 */Navigation.prototype.getPosition=function(successor){var position,length,settings=this._core.settings;if(settings.slideBy=='page'){position=$.inArray(this.current(),this._pages);length=this._pages.length;successor?++position:--position;position=this._pages[(position%length+length)%length].start;}else{position=this._core.relative(this._core.current());length=this._core.items().length;successor?position+=settings.slideBy:position-=settings.slideBy;}return position;};/**
	 * Slides to the next item or page.
	 * @public
	 * @param {Number} [speed=false] - The time in milliseconds for the transition.
	 */Navigation.prototype.next=function(speed){$.proxy(this._overrides.to,this._core)(this.getPosition(true),speed);};/**
	 * Slides to the previous item or page.
	 * @public
	 * @param {Number} [speed=false] - The time in milliseconds for the transition.
	 */Navigation.prototype.prev=function(speed){$.proxy(this._overrides.to,this._core)(this.getPosition(false),speed);};/**
	 * Slides to the specified item or page.
	 * @public
	 * @param {Number} position - The position of the item or page.
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 * @param {Boolean} [standard=false] - Whether to use the standard behaviour or not.
	 */Navigation.prototype.to=function(position,speed,standard){var length;if(!standard&&this._pages.length){length=this._pages.length;$.proxy(this._overrides.to,this._core)(this._pages[(position%length+length)%length].start,speed);}else{$.proxy(this._overrides.to,this._core)(position,speed);}};$.fn.owlCarousel.Constructor.Plugins.Navigation=Navigation;})(window.Zepto||window.jQuery,window,document);/**
 * Hash Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){'use strict';/**
	 * Creates the hash plugin.
	 * @class The Hash Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */var Hash=function Hash(carousel){/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */this._core=carousel;/**
		 * Hash index for the items.
		 * @protected
		 * @type {Object}
		 */this._hashes={};/**
		 * The carousel element.
		 * @type {jQuery}
		 */this.$element=this._core.$element;/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */this._handlers={'initialized.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.startPosition==='URLHash'){$(window).trigger('hashchange.owl.navigation');}},this),'prepared.owl.carousel':$.proxy(function(e){if(e.namespace){var hash=$(e.content).find('[data-hash]').addBack('[data-hash]').attr('data-hash');if(!hash){return;}this._hashes[hash]=e.content;}},this),'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name==='position'){var current=this._core.items(this._core.relative(this._core.current())),hash=$.map(this._hashes,function(item,hash){return item===current?hash:null;}).join();if(!hash||window.location.hash.slice(1)===hash){return;}window.location.hash=hash;}},this)};// set default options
this._core.options=$.extend({},Hash.Defaults,this._core.options);// register the event handlers
this.$element.on(this._handlers);// register event listener for hash navigation
$(window).on('hashchange.owl.navigation',$.proxy(function(e){var hash=window.location.hash.substring(1),items=this._core.$stage.children(),position=this._hashes[hash]&&items.index(this._hashes[hash]);if(position===undefined||position===this._core.current()){return;}this._core.to(this._core.relative(position),false,true);},this));};/**
	 * Default options.
	 * @public
	 */Hash.Defaults={URLhashListener:false};/**
	 * Destroys the plugin.
	 * @public
	 */Hash.prototype.destroy=function(){var handler,property;$(window).off('hashchange.owl.navigation');for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.Hash=Hash;})(window.Zepto||window.jQuery,window,document);/**
 * Support Plugin
 *
 * @version 2.1.0
 * @author Vivid Planet Software GmbH
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */;(function($,window,document,undefined){var style=$('<support>').get(0).style,prefixes='Webkit Moz O ms'.split(' '),events={transition:{end:{WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd',transition:'transitionend'}},animation:{end:{WebkitAnimation:'webkitAnimationEnd',MozAnimation:'animationend',OAnimation:'oAnimationEnd',animation:'animationend'}}},tests={csstransforms:function csstransforms(){return!!test('transform');},csstransforms3d:function csstransforms3d(){return!!test('perspective');},csstransitions:function csstransitions(){return!!test('transition');},cssanimations:function cssanimations(){return!!test('animation');}};function test(property,prefixed){var result=false,upper=property.charAt(0).toUpperCase()+property.slice(1);$.each((property+' '+prefixes.join(upper+' ')+upper).split(' '),function(i,property){if(style[property]!==undefined){result=prefixed?property:true;return false;}});return result;}function prefixed(property){return test(property,true);}if(tests.csstransitions()){/* jshint -W053 */$.support.transition=new String(prefixed('transition'));$.support.transition.end=events.transition.end[$.support.transition];}if(tests.cssanimations()){/* jshint -W053 */$.support.animation=new String(prefixed('animation'));$.support.animation.end=events.animation.end[$.support.animation];}if(tests.csstransforms()){/* jshint -W053 */$.support.transform=new String(prefixed('transform'));$.support.transform3d=tests.csstransforms3d();}})(window.Zepto||window.jQuery,window,document);;/*! URI.js v1.19.0 http://medialize.github.io/URI.js/ *//* build contains: URI.js *//*
 URI.js - Mutating URLs

 Version: 1.19.0

 Author: Rodney Rehm
 Web: http://medialize.github.io/URI.js/

 Licensed under
   MIT License http://www.opensource.org/licenses/mit-license

*/(function(m,v){"object"===(typeof module==="undefined"?"undefined":_typeof2(module))&&module.exports?module.exports=v(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"===typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],v):m.URI=v(m.punycode,m.IPv6,m.SecondLevelDomains,m);})(this,function(m,v,t,h){function d(a,b){var c=1<=arguments.length,e=2<=arguments.length;if(!(this instanceof d))return c?e?new d(a,b):new d(a):new d();if(void 0===a){if(c)throw new TypeError("undefined is not a valid argument for URI");a="undefined"!==typeof location?location.href+"":"";}if(null===a&&c)throw new TypeError("null is not a valid argument for URI");this.href(a);return void 0!==b?this.absoluteTo(b):this;}function p(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");}function u(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1);}function k(a){return"Array"===u(a);}function C(a,b){var c={},d;if("RegExp"===u(b))c=null;else if(k(b)){var f=0;for(d=b.length;f<d;f++){c[b[f]]=!0;}}else c[b]=!0;f=0;for(d=a.length;f<d;f++){if(c&&void 0!==c[a[f]]||!c&&b.test(a[f]))a.splice(f,1),d--,f--;}return a;}function w(a,b){var c;if(k(b)){var d=0;for(c=b.length;d<c;d++){if(!w(a,b[d]))return!1;}return!0;}var f=u(b);d=0;for(c=a.length;d<c;d++){if("RegExp"===f){if("string"===typeof a[d]&&a[d].match(b))return!0;}else if(a[d]===b)return!0;}return!1;}function D(a,b){if(!k(a)||!k(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,d=a.length;c<d;c++){if(a[c]!==b[c])return!1;}return!0;}function z(a){return a.replace(/^\/+|\/+$/g,"");}function F(a){return escape(a);}function A(a){return encodeURIComponent(a).replace(/[!'()*]/g,F).replace(/\*/g,"%2A");}function x(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this;};}function E(a,b){return function(c,d){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!d);return this;};}var G=h&&h.URI;d.version="1.19.0";var g=d.prototype,l=Object.prototype.hasOwnProperty;d._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:d.preventInvalidHostname,duplicateQueryParameters:d.duplicateQueryParameters,escapeQuerySpace:d.escapeQuerySpace};};d.preventInvalidHostname=!1;d.duplicateQueryParameters=!1;d.escapeQuerySpace=!0;d.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;d.idn_expression=/[^a-z0-9\._-]/i;d.punycode_expression=/(xn--)/i;d.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;d.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;d.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;d.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g};d.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};d.hostProtocols=["http","https"];d.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/;d.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};d.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();if("input"!==b||"image"===a.type)return d.domAttributes[b];}};d.encode=A;d.decode=decodeURIComponent;d.iso8859=function(){d.encode=escape;d.decode=unescape;};d.unicode=function(){d.encode=A;d.decode=decodeURIComponent;};d.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}};d.encodeQuery=function(a,b){var c=d.encode(a+"");void 0===b&&(b=d.escapeQuerySpace);return b?c.replace(/%20/g,"+"):c;};d.decodeQuery=function(a,b){a+="";void 0===b&&(b=d.escapeQuerySpace);try{return d.decode(b?a.replace(/\+/g,"%20"):a);}catch(c){return a;}};var r={encode:"encode",decode:"decode"},y,B=function B(a,b){return function(c){try{return d[b](c+"").replace(d.characters[a][b].expression,function(c){return d.characters[a][b].map[c];});}catch(e){return c;}};};for(y in r){d[y+"PathSegment"]=B("pathname",r[y]),d[y+"UrnPathSegment"]=B("urnpath",r[y]);}r=function r(a,b,c){return function(e){var f=c?function(a){return d[b](d[c](a));}:d[b];e=(e+"").split(a);for(var g=0,n=e.length;g<n;g++){e[g]=f(e[g]);}return e.join(a);};};d.decodePath=r("/","decodePathSegment");d.decodeUrnPath=r(":","decodeUrnPathSegment");d.recodePath=r("/","encodePathSegment","decode");d.recodeUrnPath=r(":","encodeUrnPathSegment","decode");d.encodeReserved=B("reserved","encode");d.parse=function(a,b){b||(b={preventInvalidHostname:d.preventInvalidHostname});var c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,c));"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=d.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(d.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=d.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b;};d.parseHost=function(a,b){a||(a="");a=a.replace(/\\/g,"/");var c=a.indexOf("/");-1===c&&(c=a.length);if("["===a.charAt(0)){var e=a.indexOf("]");b.hostname=a.substring(1,e)||null;b.port=a.substring(e+2,c)||null;"/"===b.port&&(b.port=null);}else{var f=a.indexOf(":");e=a.indexOf("/");f=a.indexOf(":",f+1);-1!==f&&(-1===e||f<e)?(b.hostname=a.substring(0,c)||null,b.port=null):(e=a.substring(0,c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);}b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);b.preventInvalidHostname&&d.ensureValidHostname(b.hostname,b.protocol);b.port&&d.ensureValidPort(b.port);return a.substring(c)||"/";};d.parseAuthority=function(a,b){a=d.parseUserinfo(a,b);return d.parseHost(a,b);};d.parseUserinfo=function(a,b){var c=a.indexOf("/"),e=a.lastIndexOf("@",-1<c?c:a.length-1);-1<e&&(-1===c||e<c)?(c=a.substring(0,e).split(":"),b.username=c[0]?d.decode(c[0]):null,c.shift(),b.password=c[0]?d.decode(c.join(":")):null,a=a.substring(e+1)):(b.username=null,b.password=null);return a;};d.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},e=a.split("&"),f=e.length,g,n,k=0;k<f;k++){if(g=e[k].split("="),n=d.decodeQuery(g.shift(),b),g=g.length?d.decodeQuery(g.join("="),b):null,l.call(c,n)){if("string"===typeof c[n]||null===c[n])c[n]=[c[n]];c[n].push(g);}else c[n]=g;}return c;};d.build=function(a){var b="";a.protocol&&(b+=a.protocol+":");a.urn||!b&&!a.hostname||(b+="//");b+=d.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b;};d.buildHost=function(a){var b="";if(a.hostname)b=d.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);return b;};d.buildAuthority=function(a){return d.buildUserinfo(a)+d.buildHost(a);};d.buildUserinfo=function(a){var b="";a.username&&(b+=d.encode(a.username));a.password&&(b+=":"+d.encode(a.password));b&&(b+="@");return b;};d.buildQuery=function(a,b,c){var e="",f,g;for(f in a){if(l.call(a,f)&&f)if(k(a[f])){var n={};var h=0;for(g=a[f].length;h<g;h++){void 0!==a[f][h]&&void 0===n[a[f][h]+""]&&(e+="&"+d.buildQueryParameter(f,a[f][h],c),!0!==b&&(n[a[f][h]+""]=!0));}}else void 0!==a[f]&&(e+="&"+d.buildQueryParameter(f,a[f],c));}return e.substring(1);};d.buildQueryParameter=function(a,b,c){return d.encodeQuery(a,c)+(null!==b?"="+d.encodeQuery(b,c):"");};d.addQuery=function(a,b,c){if("object"===(typeof b==="undefined"?"undefined":_typeof2(b)))for(var e in b){l.call(b,e)&&d.addQuery(a,e,b[e]);}else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),k(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};d.setQuery=function(a,b,c){if("object"===(typeof b==="undefined"?"undefined":_typeof2(b)))for(var e in b){l.call(b,e)&&d.setQuery(a,e,b[e]);}else if("string"===typeof b)a[b]=void 0===c?null:c;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");};d.removeQuery=function(a,b,c){var e;if(k(b))for(c=0,e=b.length;c<e;c++){a[b[c]]=void 0;}else if("RegExp"===u(b))for(e in a){b.test(e)&&(a[e]=void 0);}else if("object"===(typeof b==="undefined"?"undefined":_typeof2(b)))for(e in b){l.call(b,e)&&d.removeQuery(a,e,b[e]);}else if("string"===typeof b)void 0!==c?"RegExp"===u(c)?!k(a[b])&&c.test(a[b])?a[b]=void 0:a[b]=C(a[b],c):a[b]!==String(c)||k(c)&&1!==c.length?k(a[b])&&(a[b]=C(a[b],c)):a[b]=void 0:a[b]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");};d.hasQuery=function(a,b,c,e){switch(u(b)){case"String":break;case"RegExp":for(var f in a){if(l.call(a,f)&&b.test(f)&&(void 0===c||d.hasQuery(a,f,c)))return!0;}return!1;case"Object":for(var g in b){if(l.call(b,g)&&!d.hasQuery(a,g,b[g]))return!1;}return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter");}switch(u(c)){case"Undefined":return b in a;case"Boolean":return a=!(k(a[b])?!a[b].length:!a[b]),c===a;case"Function":return!!c(a[b],b,a);case"Array":return k(a[b])?(e?w:D)(a[b],c):!1;case"RegExp":return k(a[b])?e?w(a[b],c):!1:!(!a[b]||!a[b].match(c));case"Number":c=String(c);case"String":return k(a[b])?e?w(a[b],c):!1:a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};d.joinPaths=function(){for(var a=[],b=[],c=0,e=0;e<arguments.length;e++){var f=new d(arguments[e]);a.push(f);f=f.segment();for(var g=0;g<f.length;g++){"string"===typeof f[g]&&b.push(f[g]),f[g]&&c++;}}if(!b.length||!c)return new d("");b=new d("").segment(b);""!==a[0].path()&&"/"!==a[0].path().slice(0,1)||b.path("/"+b.path());return b.normalize();};d.commonPath=function(a,b){var c=Math.min(a.length,b.length),d;for(d=0;d<c;d++){if(a.charAt(d)!==b.charAt(d)){d--;break;}}if(1>d)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(d)||"/"!==b.charAt(d))d=a.substring(0,d).lastIndexOf("/");return a.substring(0,d+1);};d.withinString=function(a,b,c){c||(c={});var e=c.start||d.findUri.start,f=c.end||d.findUri.end,g=c.trim||d.findUri.trim,n=c.parens||d.findUri.parens,k=/[a-z0-9-]=["']?$/i;for(e.lastIndex=0;;){var h=e.exec(a);if(!h)break;var m=h.index;if(c.ignoreHtml){var q=a.slice(Math.max(m-3,0),m);if(q&&k.test(q))continue;}var l=m+a.slice(m).search(f);q=a.slice(m,l);for(l=-1;;){var p=n.exec(q);if(!p)break;l=Math.max(l,p.index+p[0].length);}q=-1<l?q.slice(0,l)+q.slice(l).replace(g,""):q.replace(g,"");q.length<=h[0].length||c.ignore&&c.ignore.test(q)||(l=m+q.length,h=b(q,m,l,a),void 0===h?e.lastIndex=l:(h=String(h),a=a.slice(0,m)+h+a.slice(l),e.lastIndex=m+h.length));}e.lastIndex=0;return a;};d.ensureValidHostname=function(a,b){var c=!!a,e=!1;b&&(e=w(d.hostProtocols,b));if(e&&!c)throw new TypeError("Hostname cannot be empty, if protocol is "+b);if(a&&a.match(d.invalid_hostname_characters)){if(!m)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(m.toASCII(a).match(d.invalid_hostname_characters))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-:_]');}};d.ensureValidPort=function(a){if(a){var b=Number(a);if(!(/^[0-9]+$/.test(b)&&0<b&&65536>b))throw new TypeError('Port "'+a+'" is not a valid port');}};d.noConflict=function(a){if(a)return a={URI:this.noConflict()},h.URITemplate&&"function"===typeof h.URITemplate.noConflict&&(a.URITemplate=h.URITemplate.noConflict()),h.IPv6&&"function"===typeof h.IPv6.noConflict&&(a.IPv6=h.IPv6.noConflict()),h.SecondLevelDomains&&"function"===typeof h.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=h.SecondLevelDomains.noConflict()),a;h.URI===this&&(h.URI=G);return this;};g.build=function(a){if(!0===a)this._deferred_build=!0;else if(void 0===a||this._deferred_build)this._string=d.build(this._parts),this._deferred_build=!1;return this;};g.clone=function(){return new d(this);};g.valueOf=g.toString=function(){return this.build(!1)._string;};g.protocol=x("protocol");g.username=x("username");g.password=x("password");g.hostname=x("hostname");g.port=x("port");g.query=E("query","?");g.fragment=E("fragment","#");g.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c;};g.hash=function(a,b){var c=this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c;};g.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?(this._parts.urn?d.decodeUrnPath:d.decodePath)(c):c;}this._parts.path=this._parts.urn?a?d.recodeUrnPath(a):"":a?d.recodePath(a):"/";this.build(!b);return this;};g.path=g.pathname;g.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=d._parts();var e=a instanceof d,f="object"===(typeof a==="undefined"?"undefined":_typeof2(a))&&(a.hostname||a.path||a.pathname);a.nodeName&&(f=d.getDomAttribute(a),a=a[f]||"",f=!1);!e&&f&&void 0!==a.pathname&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=d.parse(String(a),this._parts);else if(e||f)for(c in e=e?a._parts:a,e){l.call(this._parts,c)&&(this._parts[c]=e[c]);}else throw new TypeError("invalid input");this.build(!b);return this;};g.is=function(a){var b=!1,c=!1,e=!1,f=!1,g=!1,h=!1,k=!1,l=!this._parts.urn;this._parts.hostname&&(l=!1,c=d.ip4_expression.test(this._parts.hostname),e=d.ip6_expression.test(this._parts.hostname),b=c||e,g=(f=!b)&&t&&t.has(this._parts.hostname),h=f&&d.idn_expression.test(this._parts.hostname),k=f&&d.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return f;case"sld":return g;case"ip":return b;case"ip4":case"ipv4":case"inet4":return c;case"ip6":case"ipv6":case"inet6":return e;case"idn":return h;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return k;}return null;};var H=g.protocol,I=g.port,J=g.hostname;g.protocol=function(a,b){if(a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(d.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return H.call(this,a,b);};g.scheme=g.protocol;g.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),d.ensureValidPort(a)));return I.call(this,a,b);};g.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==d.parseHost(a,c))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');a=c.hostname;this._parts.preventInvalidHostname&&d.ensureValidHostname(a,this._parts.protocol);}return J.call(this,a,b);};g.origin=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var c=this.protocol();return this.authority()?(c?c+"://":"")+this.authority():"";}c=d(a);this.protocol(c.protocol()).authority(c.authority()).build(!b);return this;};g.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?d.buildHost(this._parts):"";if("/"!==d.parseHost(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');this.build(!b);return this;};g.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?d.buildAuthority(this._parts):"";if("/"!==d.parseAuthority(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');this.build(!b);return this;};g.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var c=d.buildUserinfo(this._parts);return c?c.substring(0,c.length-1):c;}"@"!==a[a.length-1]&&(a+="@");d.parseUserinfo(a,this._parts);this.build(!b);return this;};g.resource=function(a,b){if(void 0===a)return this.path()+this.search()+this.hash();var c=d.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=c.fragment;this.build(!b);return this;};g.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||"";}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=new RegExp("^"+p(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");if(-1!==a.indexOf(":"))throw new TypeError("Domains cannot contain colons");a&&d.ensureValidHostname(a,this._parts.protocol);this._parts.hostname=this._parts.hostname.replace(c,a);this.build(!b);return this;};g.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||"";}if(!a)throw new TypeError("cannot set domain empty");if(-1!==a.indexOf(":"))throw new TypeError("Domains cannot contain colons");d.ensureValidHostname(a,this._parts.protocol);!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=new RegExp(p(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this;};g.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf(".");c=this._parts.hostname.substring(c+1);return!0!==b&&t&&t.list[c.toLowerCase()]?t.get(this._parts.hostname)||c:c;}if(a){if(a.match(/[^a-zA-Z0-9-]/)){if(t&&t.is(a))c=new RegExp(p(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=new RegExp(p(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a);}}else throw new TypeError("cannot set TLD empty");this.build(!b);return this;};g.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1;c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?d.decodePath(c):c;}c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=new RegExp("^"+p(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=d.recodePath(a);this._parts.path=this._parts.path.replace(c,a);this.build(!b);return this;};g.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("string"!==typeof a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/");c=this._parts.path.substring(c+1);return a?d.decodePathSegment(c):c;}c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var e=new RegExp(p(this.filename())+"$");a=d.recodePath(a);this._parts.path=this._parts.path.replace(e,a);c?this.normalizePath(b):this.build(!b);return this;};g.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),e=c.lastIndexOf(".");if(-1===e)return"";c=c.substring(e+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?d.decodePathSegment(c):c;}"."===a.charAt(0)&&(a=a.substring(1));if(c=this.suffix())e=a?new RegExp(p(c)+"$"):new RegExp(p("."+c)+"$");else{if(!a)return this;this._parts.path+="."+d.recodePath(a);}e&&(a=d.recodePath(a),this._parts.path=this._parts.path.replace(e,a));this.build(!b);return this;};g.segment=function(a,b,c){var d=this._parts.urn?":":"/",f=this.path(),g="/"===f.substring(0,1);f=f.split(d);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');g&&f.shift();0>a&&(a=Math.max(f.length+a,0));if(void 0===b)return void 0===a?f:f[a];if(null===a||void 0===f[a]){if(k(b)){f=[];a=0;for(var h=b.length;a<h;a++){if(b[a].length||f.length&&f[f.length-1].length)f.length&&!f[f.length-1].length&&f.pop(),f.push(z(b[a]));}}else{if(b||"string"===typeof b)b=z(b),""===f[f.length-1]?f[f.length-1]=b:f.push(b);}}else b?f[a]=z(b):f.splice(a,1);g&&f.unshift("");return this.path(f.join(d),c);};g.segmentCoded=function(a,b,c){var e;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(k(a)){var f=0;for(e=a.length;f<e;f++){a[f]=d.decode(a[f]);}}else a=void 0!==a?d.decode(a):void 0;return a;}if(k(b))for(f=0,e=b.length;f<e;f++){b[f]=d.encode(b[f]);}else b="string"===typeof b||b instanceof String?d.encode(b):b;return this.segment(a,b,c);};var K=g.query;g.query=function(a,b){if(!0===a)return d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace),e=a.call(this,c);this._parts.query=d.buildQuery(e||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this;}return void 0!==a&&"string"!==typeof a?(this._parts.query=d.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):K.call(this,a,b);};g.setQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)e[a]=void 0!==b?b:null;else if("object"===(typeof a==="undefined"?"undefined":_typeof2(a)))for(var f in a){l.call(a,f)&&(e[f]=a[f]);}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this;};g.addQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);d.addQuery(e,a,void 0===b?null:b);this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this;};g.removeQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);d.removeQuery(e,a,b);this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this;};g.hasQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return d.hasQuery(e,a,b,c);};g.setSearch=g.setQuery;g.addSearch=g.addQuery;g.removeSearch=g.removeQuery;g.hasSearch=g.hasQuery;g.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build();};g.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this;};g.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&m?this._parts.hostname=m.toASCII(this._parts.hostname):this.is("IPv6")&&v&&(this._parts.hostname=v.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this;};g.normalizePort=function(a){"string"===typeof this._parts.protocol&&this._parts.port===d.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this;};g.normalizePath=function(a){var b=this._parts.path;if(!b)return this;if(this._parts.urn)return this._parts.path=d.recodeUrnPath(this._parts.path),this.build(!a),this;if("/"===this._parts.path)return this;b=d.recodePath(b);var c="";if("/"!==b.charAt(0)){var e=!0;b="/"+b;}if("/.."===b.slice(-3)||"/."===b.slice(-2))b+="/";b=b.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");e&&(c=b.substring(1).match(/^(\.\.\/)+/)||"")&&(c=c[0]);for(;;){var f=b.search(/\/\.\.(\/|$)/);if(-1===f)break;else if(0===f){b=b.substring(3);continue;}var g=b.substring(0,f).lastIndexOf("/");-1===g&&(g=f);b=b.substring(0,g)+b.substring(f+3);}e&&this.is("relative")&&(b=c+b.substring(1));this._parts.path=b;this.build(!a);return this;};g.normalizePathname=g.normalizePath;g.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(d.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a));return this;};g.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));return this;};g.normalizeSearch=g.normalizeQuery;g.normalizeHash=g.normalizeFragment;g.iso8859=function(){var a=d.encode,b=d.decode;d.encode=escape;d.decode=decodeURIComponent;try{this.normalize();}finally{d.encode=a,d.decode=b;}return this;};g.unicode=function(){var a=d.encode,b=d.decode;d.encode=A;d.decode=unescape;try{this.normalize();}finally{d.encode=a,d.decode=b;}return this;};g.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&(a.is("punycode")&&m?(b+=m.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&a._parts.path&&"/"!==a._parts.path.charAt(0)&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",e=0,f=a._parts.query.split("&"),g=f.length;e<g;e++){var h=(f[e]||"").split("=");c+="&"+d.decodeQuery(h[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");void 0!==h[1]&&(c+="="+d.decodeQuery(h[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"));}b+="?"+c.substring(1);}return b+=d.decodeQuery(a.hash(),!0);};g.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],e,f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof d||(a=new d(a));if(b._parts.protocol)return b;b._parts.protocol=a._parts.protocol;if(this._parts.hostname)return b;for(e=0;f=c[e];e++){b._parts[f]=a._parts[f];}b._parts.path?(".."===b._parts.path.substring(-2)&&(b._parts.path+="/"),"/"!==b.path().charAt(0)&&(c=(c=a.directory())?c:0===a.path().indexOf("/")?"/":"",b._parts.path=(c?c+"/":"")+b._parts.path,b.normalizePath())):(b._parts.path=a._parts.path,b._parts.query||(b._parts.query=a._parts.query));b.build();return b;};g.relativeTo=function(a){var b=this.clone().normalize();if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=new d(a).normalize();var c=b._parts;var e=a._parts;var f=b.path();a=a.path();if("/"!==f.charAt(0))throw Error("URI is already relative");if("/"!==a.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");c.protocol===e.protocol&&(c.protocol=null);if(c.username===e.username&&c.password===e.password&&null===c.protocol&&null===c.username&&null===c.password&&c.hostname===e.hostname&&c.port===e.port)c.hostname=null,c.port=null;else return b.build();if(f===a)return c.path="",b.build();f=d.commonPath(f,a);if(!f)return b.build();e=e.path.substring(f.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=e+c.path.substring(f.length)||"./";return b.build();};g.equals=function(a){var b=this.clone(),c=new d(a);a={};var e;b.normalize();c.normalize();if(b.toString()===c.toString())return!0;var f=b.query();var g=c.query();b.query("");c.query("");if(b.toString()!==c.toString()||f.length!==g.length)return!1;b=d.parseQuery(f,this._parts.escapeQuerySpace);g=d.parseQuery(g,this._parts.escapeQuerySpace);for(e in b){if(l.call(b,e)){if(!k(b[e])){if(b[e]!==g[e])return!1;}else if(!D(b[e],g[e]))return!1;a[e]=!0;}}for(e in g){if(l.call(g,e)&&!a[e])return!1;}return!0;};g.preventInvalidHostname=function(a){this._parts.preventInvalidHostname=!!a;return this;};g.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=!!a;return this;};g.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this;};return d;});;/*!
 * perfect-scrollbar v1.4.0
 * (c) 2018 Hyunje Jun
 * @license MIT
 */(function(global,factory){(typeof exports==="undefined"?"undefined":_typeof2(exports))==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.PerfectScrollbar=factory();})(this,function(){'use strict';function get(element){return getComputedStyle(element);}function set(element,obj){for(var key in obj){var val=obj[key];if(typeof val==='number'){val=val+"px";}element.style[key]=val;}return element;}function div(className){var div=document.createElement('div');div.className=className;return div;}var elMatches=typeof Element!=='undefined'&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function matches(element,query){if(!elMatches){throw new Error('No element matching method supported');}return elMatches.call(element,query);}function remove(element){if(element.remove){element.remove();}else{if(element.parentNode){element.parentNode.removeChild(element);}}}function queryChildren(element,selector){return Array.prototype.filter.call(element.children,function(child){return matches(child,selector);});}var cls={main:'ps',element:{thumb:function thumb(x){return"ps__thumb-"+x;},rail:function rail(x){return"ps__rail-"+x;},consuming:'ps__child--consume'},state:{focus:'ps--focus',clicking:'ps--clicking',active:function active(x){return"ps--active-"+x;},scrolling:function scrolling(x){return"ps--scrolling-"+x;}}};/*
 * Helper methods
 */var scrollingClassTimeout={x:null,y:null};function addScrollingClass(i,x){var classList=i.element.classList;var className=cls.state.scrolling(x);if(classList.contains(className)){clearTimeout(scrollingClassTimeout[x]);}else{classList.add(className);}}function removeScrollingClass(i,x){scrollingClassTimeout[x]=setTimeout(function(){return i.isAlive&&i.element.classList.remove(cls.state.scrolling(x));},i.settings.scrollingThreshold);}function setScrollingClassInstantly(i,x){addScrollingClass(i,x);removeScrollingClass(i,x);}var EventElement=function EventElement(element){this.element=element;this.handlers={};};var prototypeAccessors={isEmpty:{configurable:true}};EventElement.prototype.bind=function bind(eventName,handler){if(typeof this.handlers[eventName]==='undefined'){this.handlers[eventName]=[];}this.handlers[eventName].push(handler);this.element.addEventListener(eventName,handler,false);};EventElement.prototype.unbind=function unbind(eventName,target){var this$1=this;this.handlers[eventName]=this.handlers[eventName].filter(function(handler){if(target&&handler!==target){return true;}this$1.element.removeEventListener(eventName,handler,false);return false;});};EventElement.prototype.unbindAll=function unbindAll(){var this$1=this;for(var name in this$1.handlers){this$1.unbind(name);}};prototypeAccessors.isEmpty.get=function(){var this$1=this;return Object.keys(this.handlers).every(function(key){return this$1.handlers[key].length===0;});};Object.defineProperties(EventElement.prototype,prototypeAccessors);var EventManager=function EventManager(){this.eventElements=[];};EventManager.prototype.eventElement=function eventElement(element){var ee=this.eventElements.filter(function(ee){return ee.element===element;})[0];if(!ee){ee=new EventElement(element);this.eventElements.push(ee);}return ee;};EventManager.prototype.bind=function bind(element,eventName,handler){this.eventElement(element).bind(eventName,handler);};EventManager.prototype.unbind=function unbind(element,eventName,handler){var ee=this.eventElement(element);ee.unbind(eventName,handler);if(ee.isEmpty){// remove
this.eventElements.splice(this.eventElements.indexOf(ee),1);}};EventManager.prototype.unbindAll=function unbindAll(){this.eventElements.forEach(function(e){return e.unbindAll();});this.eventElements=[];};EventManager.prototype.once=function once(element,eventName,handler){var ee=this.eventElement(element);var onceHandler=function onceHandler(evt){ee.unbind(eventName,onceHandler);handler(evt);};ee.bind(eventName,onceHandler);};function createEvent(name){if(typeof window.CustomEvent==='function'){return new CustomEvent(name);}else{var evt=document.createEvent('CustomEvent');evt.initCustomEvent(name,false,false,undefined);return evt;}}var processScrollDiff=function processScrollDiff(i,axis,diff,useScrollingClass,forceFireReachEvent){if(useScrollingClass===void 0)useScrollingClass=true;if(forceFireReachEvent===void 0)forceFireReachEvent=false;var fields;if(axis==='top'){fields=['contentHeight','containerHeight','scrollTop','y','up','down'];}else if(axis==='left'){fields=['contentWidth','containerWidth','scrollLeft','x','left','right'];}else{throw new Error('A proper axis should be provided');}processScrollDiff$1(i,diff,fields,useScrollingClass,forceFireReachEvent);};function processScrollDiff$1(i,diff,ref,useScrollingClass,forceFireReachEvent){var contentHeight=ref[0];var containerHeight=ref[1];var scrollTop=ref[2];var y=ref[3];var up=ref[4];var down=ref[5];if(useScrollingClass===void 0)useScrollingClass=true;if(forceFireReachEvent===void 0)forceFireReachEvent=false;var element=i.element;// reset reach
i.reach[y]=null;// 1 for subpixel rounding
if(element[scrollTop]<1){i.reach[y]='start';}// 1 for subpixel rounding
if(element[scrollTop]>i[contentHeight]-i[containerHeight]-1){i.reach[y]='end';}if(diff){element.dispatchEvent(createEvent("ps-scroll-"+y));if(diff<0){element.dispatchEvent(createEvent("ps-scroll-"+up));}else if(diff>0){element.dispatchEvent(createEvent("ps-scroll-"+down));}if(useScrollingClass){setScrollingClassInstantly(i,y);}}if(i.reach[y]&&(diff||forceFireReachEvent)){element.dispatchEvent(createEvent("ps-"+y+"-reach-"+i.reach[y]));}}function toInt(x){return parseInt(x,10)||0;}function isEditable(el){return matches(el,'input,[contenteditable]')||matches(el,'select,[contenteditable]')||matches(el,'textarea,[contenteditable]')||matches(el,'button,[contenteditable]');}function outerWidth(element){var styles=get(element);return toInt(styles.width)+toInt(styles.paddingLeft)+toInt(styles.paddingRight)+toInt(styles.borderLeftWidth)+toInt(styles.borderRightWidth);}var env={isWebKit:typeof document!=='undefined'&&'WebkitAppearance'in document.documentElement.style,supportsTouch:typeof window!=='undefined'&&('ontouchstart'in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator!=='undefined'&&navigator.msMaxTouchPoints,isChrome:typeof navigator!=='undefined'&&/Chrome/i.test(navigator&&navigator.userAgent)};var updateGeometry=function updateGeometry(i){var element=i.element;var roundedScrollTop=Math.floor(element.scrollTop);i.containerWidth=element.clientWidth;i.containerHeight=element.clientHeight;i.contentWidth=element.scrollWidth;i.contentHeight=element.scrollHeight;if(!element.contains(i.scrollbarXRail)){// clean up and append
queryChildren(element,cls.element.rail('x')).forEach(function(el){return remove(el);});element.appendChild(i.scrollbarXRail);}if(!element.contains(i.scrollbarYRail)){// clean up and append
queryChildren(element,cls.element.rail('y')).forEach(function(el){return remove(el);});element.appendChild(i.scrollbarYRail);}if(!i.settings.suppressScrollX&&i.containerWidth+i.settings.scrollXMarginOffset<i.contentWidth){i.scrollbarXActive=true;i.railXWidth=i.containerWidth-i.railXMarginWidth;i.railXRatio=i.containerWidth/i.railXWidth;i.scrollbarXWidth=getThumbSize(i,toInt(i.railXWidth*i.containerWidth/i.contentWidth));i.scrollbarXLeft=toInt((i.negativeScrollAdjustment+element.scrollLeft)*(i.railXWidth-i.scrollbarXWidth)/(i.contentWidth-i.containerWidth));}else{i.scrollbarXActive=false;}if(!i.settings.suppressScrollY&&i.containerHeight+i.settings.scrollYMarginOffset<i.contentHeight){i.scrollbarYActive=true;i.railYHeight=i.containerHeight-i.railYMarginHeight;i.railYRatio=i.containerHeight/i.railYHeight;i.scrollbarYHeight=getThumbSize(i,toInt(i.railYHeight*i.containerHeight/i.contentHeight));i.scrollbarYTop=toInt(roundedScrollTop*(i.railYHeight-i.scrollbarYHeight)/(i.contentHeight-i.containerHeight));}else{i.scrollbarYActive=false;}if(i.scrollbarXLeft>=i.railXWidth-i.scrollbarXWidth){i.scrollbarXLeft=i.railXWidth-i.scrollbarXWidth;}if(i.scrollbarYTop>=i.railYHeight-i.scrollbarYHeight){i.scrollbarYTop=i.railYHeight-i.scrollbarYHeight;}updateCss(element,i);if(i.scrollbarXActive){element.classList.add(cls.state.active('x'));}else{element.classList.remove(cls.state.active('x'));i.scrollbarXWidth=0;i.scrollbarXLeft=0;element.scrollLeft=0;}if(i.scrollbarYActive){element.classList.add(cls.state.active('y'));}else{element.classList.remove(cls.state.active('y'));i.scrollbarYHeight=0;i.scrollbarYTop=0;element.scrollTop=0;}};function getThumbSize(i,thumbSize){if(i.settings.minScrollbarLength){thumbSize=Math.max(thumbSize,i.settings.minScrollbarLength);}if(i.settings.maxScrollbarLength){thumbSize=Math.min(thumbSize,i.settings.maxScrollbarLength);}return thumbSize;}function updateCss(element,i){var xRailOffset={width:i.railXWidth};var roundedScrollTop=Math.floor(element.scrollTop);if(i.isRtl){xRailOffset.left=i.negativeScrollAdjustment+element.scrollLeft+i.containerWidth-i.contentWidth;}else{xRailOffset.left=element.scrollLeft;}if(i.isScrollbarXUsingBottom){xRailOffset.bottom=i.scrollbarXBottom-roundedScrollTop;}else{xRailOffset.top=i.scrollbarXTop+roundedScrollTop;}set(i.scrollbarXRail,xRailOffset);var yRailOffset={top:roundedScrollTop,height:i.railYHeight};if(i.isScrollbarYUsingRight){if(i.isRtl){yRailOffset.right=i.contentWidth-(i.negativeScrollAdjustment+element.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth;}else{yRailOffset.right=i.scrollbarYRight-element.scrollLeft;}}else{if(i.isRtl){yRailOffset.left=i.negativeScrollAdjustment+element.scrollLeft+i.containerWidth*2-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth;}else{yRailOffset.left=i.scrollbarYLeft+element.scrollLeft;}}set(i.scrollbarYRail,yRailOffset);set(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth});set(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth});}var clickRail=function clickRail(i){i.event.bind(i.scrollbarY,'mousedown',function(e){return e.stopPropagation();});i.event.bind(i.scrollbarYRail,'mousedown',function(e){var positionTop=e.pageY-window.pageYOffset-i.scrollbarYRail.getBoundingClientRect().top;var direction=positionTop>i.scrollbarYTop?1:-1;i.element.scrollTop+=direction*i.containerHeight;updateGeometry(i);e.stopPropagation();});i.event.bind(i.scrollbarX,'mousedown',function(e){return e.stopPropagation();});i.event.bind(i.scrollbarXRail,'mousedown',function(e){var positionLeft=e.pageX-window.pageXOffset-i.scrollbarXRail.getBoundingClientRect().left;var direction=positionLeft>i.scrollbarXLeft?1:-1;i.element.scrollLeft+=direction*i.containerWidth;updateGeometry(i);e.stopPropagation();});};var dragThumb=function dragThumb(i){bindMouseScrollHandler(i,['containerWidth','contentWidth','pageX','railXWidth','scrollbarX','scrollbarXWidth','scrollLeft','x','scrollbarXRail']);bindMouseScrollHandler(i,['containerHeight','contentHeight','pageY','railYHeight','scrollbarY','scrollbarYHeight','scrollTop','y','scrollbarYRail']);};function bindMouseScrollHandler(i,ref){var containerHeight=ref[0];var contentHeight=ref[1];var pageY=ref[2];var railYHeight=ref[3];var scrollbarY=ref[4];var scrollbarYHeight=ref[5];var scrollTop=ref[6];var y=ref[7];var scrollbarYRail=ref[8];var element=i.element;var startingScrollTop=null;var startingMousePageY=null;var scrollBy=null;function mouseMoveHandler(e){element[scrollTop]=startingScrollTop+scrollBy*(e[pageY]-startingMousePageY);addScrollingClass(i,y);updateGeometry(i);e.stopPropagation();e.preventDefault();}function mouseUpHandler(){removeScrollingClass(i,y);i[scrollbarYRail].classList.remove(cls.state.clicking);i.event.unbind(i.ownerDocument,'mousemove',mouseMoveHandler);}i.event.bind(i[scrollbarY],'mousedown',function(e){startingScrollTop=element[scrollTop];startingMousePageY=e[pageY];scrollBy=(i[contentHeight]-i[containerHeight])/(i[railYHeight]-i[scrollbarYHeight]);i.event.bind(i.ownerDocument,'mousemove',mouseMoveHandler);i.event.once(i.ownerDocument,'mouseup',mouseUpHandler);i[scrollbarYRail].classList.add(cls.state.clicking);e.stopPropagation();e.preventDefault();});}var keyboard=function keyboard(i){var element=i.element;var elementHovered=function elementHovered(){return matches(element,':hover');};var scrollbarFocused=function scrollbarFocused(){return matches(i.scrollbarX,':focus')||matches(i.scrollbarY,':focus');};function shouldPreventDefault(deltaX,deltaY){var scrollTop=Math.floor(element.scrollTop);if(deltaX===0){if(!i.scrollbarYActive){return false;}if(scrollTop===0&&deltaY>0||scrollTop>=i.contentHeight-i.containerHeight&&deltaY<0){return!i.settings.wheelPropagation;}}var scrollLeft=element.scrollLeft;if(deltaY===0){if(!i.scrollbarXActive){return false;}if(scrollLeft===0&&deltaX<0||scrollLeft>=i.contentWidth-i.containerWidth&&deltaX>0){return!i.settings.wheelPropagation;}}return true;}i.event.bind(i.ownerDocument,'keydown',function(e){if(e.isDefaultPrevented&&e.isDefaultPrevented()||e.defaultPrevented){return;}if(!elementHovered()&&!scrollbarFocused()){return;}var activeElement=document.activeElement?document.activeElement:i.ownerDocument.activeElement;if(activeElement){if(activeElement.tagName==='IFRAME'){activeElement=activeElement.contentDocument.activeElement;}else{// go deeper if element is a webcomponent
while(activeElement.shadowRoot){activeElement=activeElement.shadowRoot.activeElement;}}if(isEditable(activeElement)){return;}}var deltaX=0;var deltaY=0;switch(e.which){case 37:// left
if(e.metaKey){deltaX=-i.contentWidth;}else if(e.altKey){deltaX=-i.containerWidth;}else{deltaX=-30;}break;case 38:// up
if(e.metaKey){deltaY=i.contentHeight;}else if(e.altKey){deltaY=i.containerHeight;}else{deltaY=30;}break;case 39:// right
if(e.metaKey){deltaX=i.contentWidth;}else if(e.altKey){deltaX=i.containerWidth;}else{deltaX=30;}break;case 40:// down
if(e.metaKey){deltaY=-i.contentHeight;}else if(e.altKey){deltaY=-i.containerHeight;}else{deltaY=-30;}break;case 32:// space bar
if(e.shiftKey){deltaY=i.containerHeight;}else{deltaY=-i.containerHeight;}break;case 33:// page up
deltaY=i.containerHeight;break;case 34:// page down
deltaY=-i.containerHeight;break;case 36:// home
deltaY=i.contentHeight;break;case 35:// end
deltaY=-i.contentHeight;break;default:return;}if(i.settings.suppressScrollX&&deltaX!==0){return;}if(i.settings.suppressScrollY&&deltaY!==0){return;}element.scrollTop-=deltaY;element.scrollLeft+=deltaX;updateGeometry(i);if(shouldPreventDefault(deltaX,deltaY)){e.preventDefault();}});};var wheel=function wheel(i){var element=i.element;function shouldPreventDefault(deltaX,deltaY){var roundedScrollTop=Math.floor(element.scrollTop);var isTop=element.scrollTop===0;var isBottom=roundedScrollTop+element.offsetHeight===element.scrollHeight;var isLeft=element.scrollLeft===0;var isRight=element.scrollLeft+element.offsetWidth===element.scrollWidth;var hitsBound;// pick axis with primary direction
if(Math.abs(deltaY)>Math.abs(deltaX)){hitsBound=isTop||isBottom;}else{hitsBound=isLeft||isRight;}return hitsBound?!i.settings.wheelPropagation:true;}function getDeltaFromEvent(e){var deltaX=e.deltaX;var deltaY=-1*e.deltaY;if(typeof deltaX==='undefined'||typeof deltaY==='undefined'){// OS X Safari
deltaX=-1*e.wheelDeltaX/6;deltaY=e.wheelDeltaY/6;}if(e.deltaMode&&e.deltaMode===1){// Firefox in deltaMode 1: Line scrolling
deltaX*=10;deltaY*=10;}if(deltaX!==deltaX&&deltaY!==deltaY/* NaN checks */){// IE in some mouse drivers
deltaX=0;deltaY=e.wheelDelta;}if(e.shiftKey){// reverse axis with shift key
return[-deltaY,-deltaX];}return[deltaX,deltaY];}function shouldBeConsumedByChild(target,deltaX,deltaY){// FIXME: this is a workaround for <select> issue in FF and IE #571
if(!env.isWebKit&&element.querySelector('select:focus')){return true;}if(!element.contains(target)){return false;}var cursor=target;while(cursor&&cursor!==element){if(cursor.classList.contains(cls.element.consuming)){return true;}var style=get(cursor);var overflow=[style.overflow,style.overflowX,style.overflowY].join('');// if scrollable
if(overflow.match(/(scroll|auto)/)){var maxScrollTop=cursor.scrollHeight-cursor.clientHeight;if(maxScrollTop>0){if(!(cursor.scrollTop===0&&deltaY>0)&&!(cursor.scrollTop===maxScrollTop&&deltaY<0)){return true;}}var maxScrollLeft=cursor.scrollWidth-cursor.clientWidth;if(maxScrollLeft>0){if(!(cursor.scrollLeft===0&&deltaX<0)&&!(cursor.scrollLeft===maxScrollLeft&&deltaX>0)){return true;}}}cursor=cursor.parentNode;}return false;}function mousewheelHandler(e){var ref=getDeltaFromEvent(e);var deltaX=ref[0];var deltaY=ref[1];if(shouldBeConsumedByChild(e.target,deltaX,deltaY)){return;}var shouldPrevent=false;if(!i.settings.useBothWheelAxes){// deltaX will only be used for horizontal scrolling and deltaY will
// only be used for vertical scrolling - this is the default
element.scrollTop-=deltaY*i.settings.wheelSpeed;element.scrollLeft+=deltaX*i.settings.wheelSpeed;}else if(i.scrollbarYActive&&!i.scrollbarXActive){// only vertical scrollbar is active and useBothWheelAxes option is
// active, so let's scroll vertical bar using both mouse wheel axes
if(deltaY){element.scrollTop-=deltaY*i.settings.wheelSpeed;}else{element.scrollTop+=deltaX*i.settings.wheelSpeed;}shouldPrevent=true;}else if(i.scrollbarXActive&&!i.scrollbarYActive){// useBothWheelAxes and only horizontal bar is active, so use both
// wheel axes for horizontal bar
if(deltaX){element.scrollLeft+=deltaX*i.settings.wheelSpeed;}else{element.scrollLeft-=deltaY*i.settings.wheelSpeed;}shouldPrevent=true;}updateGeometry(i);shouldPrevent=shouldPrevent||shouldPreventDefault(deltaX,deltaY);if(shouldPrevent&&!e.ctrlKey){e.stopPropagation();e.preventDefault();}}if(typeof window.onwheel!=='undefined'){i.event.bind(element,'wheel',mousewheelHandler);}else if(typeof window.onmousewheel!=='undefined'){i.event.bind(element,'mousewheel',mousewheelHandler);}};var touch=function touch(i){if(!env.supportsTouch&&!env.supportsIePointer){return;}var element=i.element;function shouldPrevent(deltaX,deltaY){var scrollTop=Math.floor(element.scrollTop);var scrollLeft=element.scrollLeft;var magnitudeX=Math.abs(deltaX);var magnitudeY=Math.abs(deltaY);if(magnitudeY>magnitudeX){// user is perhaps trying to swipe up/down the page
if(deltaY<0&&scrollTop===i.contentHeight-i.containerHeight||deltaY>0&&scrollTop===0){// set prevent for mobile Chrome refresh
return window.scrollY===0&&deltaY>0&&env.isChrome;}}else if(magnitudeX>magnitudeY){// user is perhaps trying to swipe left/right across the page
if(deltaX<0&&scrollLeft===i.contentWidth-i.containerWidth||deltaX>0&&scrollLeft===0){return true;}}return true;}function applyTouchMove(differenceX,differenceY){element.scrollTop-=differenceY;element.scrollLeft-=differenceX;updateGeometry(i);}var startOffset={};var startTime=0;var speed={};var easingLoop=null;function getTouch(e){if(e.targetTouches){return e.targetTouches[0];}else{// Maybe IE pointer
return e;}}function shouldHandle(e){if(e.pointerType&&e.pointerType==='pen'&&e.buttons===0){return false;}if(e.targetTouches&&e.targetTouches.length===1){return true;}if(e.pointerType&&e.pointerType!=='mouse'&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){return true;}return false;}function touchStart(e){if(!shouldHandle(e)){return;}var touch=getTouch(e);startOffset.pageX=touch.pageX;startOffset.pageY=touch.pageY;startTime=new Date().getTime();if(easingLoop!==null){clearInterval(easingLoop);}}function shouldBeConsumedByChild(target,deltaX,deltaY){if(!element.contains(target)){return false;}var cursor=target;while(cursor&&cursor!==element){if(cursor.classList.contains(cls.element.consuming)){return true;}var style=get(cursor);var overflow=[style.overflow,style.overflowX,style.overflowY].join('');// if scrollable
if(overflow.match(/(scroll|auto)/)){var maxScrollTop=cursor.scrollHeight-cursor.clientHeight;if(maxScrollTop>0){if(!(cursor.scrollTop===0&&deltaY>0)&&!(cursor.scrollTop===maxScrollTop&&deltaY<0)){return true;}}var maxScrollLeft=cursor.scrollLeft-cursor.clientWidth;if(maxScrollLeft>0){if(!(cursor.scrollLeft===0&&deltaX<0)&&!(cursor.scrollLeft===maxScrollLeft&&deltaX>0)){return true;}}}cursor=cursor.parentNode;}return false;}function touchMove(e){if(shouldHandle(e)){var touch=getTouch(e);var currentOffset={pageX:touch.pageX,pageY:touch.pageY};var differenceX=currentOffset.pageX-startOffset.pageX;var differenceY=currentOffset.pageY-startOffset.pageY;if(shouldBeConsumedByChild(e.target,differenceX,differenceY)){return;}applyTouchMove(differenceX,differenceY);startOffset=currentOffset;var currentTime=new Date().getTime();var timeGap=currentTime-startTime;if(timeGap>0){speed.x=differenceX/timeGap;speed.y=differenceY/timeGap;startTime=currentTime;}if(shouldPrevent(differenceX,differenceY)){e.preventDefault();}}}function touchEnd(){if(i.settings.swipeEasing){clearInterval(easingLoop);easingLoop=setInterval(function(){if(i.isInitialized){clearInterval(easingLoop);return;}if(!speed.x&&!speed.y){clearInterval(easingLoop);return;}if(Math.abs(speed.x)<0.01&&Math.abs(speed.y)<0.01){clearInterval(easingLoop);return;}applyTouchMove(speed.x*30,speed.y*30);speed.x*=0.8;speed.y*=0.8;},10);}}if(env.supportsTouch){i.event.bind(element,'touchstart',touchStart);i.event.bind(element,'touchmove',touchMove);i.event.bind(element,'touchend',touchEnd);}else if(env.supportsIePointer){if(window.PointerEvent){i.event.bind(element,'pointerdown',touchStart);i.event.bind(element,'pointermove',touchMove);i.event.bind(element,'pointerup',touchEnd);}else if(window.MSPointerEvent){i.event.bind(element,'MSPointerDown',touchStart);i.event.bind(element,'MSPointerMove',touchMove);i.event.bind(element,'MSPointerUp',touchEnd);}}};var defaultSettings=function defaultSettings(){return{handlers:['click-rail','drag-thumb','keyboard','wheel','touch'],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1000,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:false,suppressScrollY:false,swipeEasing:true,useBothWheelAxes:false,wheelPropagation:true,wheelSpeed:1};};var handlers={'click-rail':clickRail,'drag-thumb':dragThumb,keyboard:keyboard,wheel:wheel,touch:touch};var PerfectScrollbar=function PerfectScrollbar(element,userSettings){var this$1=this;if(userSettings===void 0)userSettings={};if(typeof element==='string'){element=document.querySelector(element);}if(!element||!element.nodeName){throw new Error('no element is specified to initialize PerfectScrollbar');}this.element=element;element.classList.add(cls.main);this.settings=defaultSettings();for(var key in userSettings){this$1.settings[key]=userSettings[key];}this.containerWidth=null;this.containerHeight=null;this.contentWidth=null;this.contentHeight=null;var focus=function focus(){return element.classList.add(cls.state.focus);};var blur=function blur(){return element.classList.remove(cls.state.focus);};this.isRtl=get(element).direction==='rtl';this.isNegativeScroll=function(){var originalScrollLeft=element.scrollLeft;var result=null;element.scrollLeft=-1;result=element.scrollLeft<0;element.scrollLeft=originalScrollLeft;return result;}();this.negativeScrollAdjustment=this.isNegativeScroll?element.scrollWidth-element.clientWidth:0;this.event=new EventManager();this.ownerDocument=element.ownerDocument||document;this.scrollbarXRail=div(cls.element.rail('x'));element.appendChild(this.scrollbarXRail);this.scrollbarX=div(cls.element.thumb('x'));this.scrollbarXRail.appendChild(this.scrollbarX);this.scrollbarX.setAttribute('tabindex',0);this.event.bind(this.scrollbarX,'focus',focus);this.event.bind(this.scrollbarX,'blur',blur);this.scrollbarXActive=null;this.scrollbarXWidth=null;this.scrollbarXLeft=null;var railXStyle=get(this.scrollbarXRail);this.scrollbarXBottom=parseInt(railXStyle.bottom,10);if(isNaN(this.scrollbarXBottom)){this.isScrollbarXUsingBottom=false;this.scrollbarXTop=toInt(railXStyle.top);}else{this.isScrollbarXUsingBottom=true;}this.railBorderXWidth=toInt(railXStyle.borderLeftWidth)+toInt(railXStyle.borderRightWidth);// Set rail to display:block to calculate margins
set(this.scrollbarXRail,{display:'block'});this.railXMarginWidth=toInt(railXStyle.marginLeft)+toInt(railXStyle.marginRight);set(this.scrollbarXRail,{display:''});this.railXWidth=null;this.railXRatio=null;this.scrollbarYRail=div(cls.element.rail('y'));element.appendChild(this.scrollbarYRail);this.scrollbarY=div(cls.element.thumb('y'));this.scrollbarYRail.appendChild(this.scrollbarY);this.scrollbarY.setAttribute('tabindex',0);this.event.bind(this.scrollbarY,'focus',focus);this.event.bind(this.scrollbarY,'blur',blur);this.scrollbarYActive=null;this.scrollbarYHeight=null;this.scrollbarYTop=null;var railYStyle=get(this.scrollbarYRail);this.scrollbarYRight=parseInt(railYStyle.right,10);if(isNaN(this.scrollbarYRight)){this.isScrollbarYUsingRight=false;this.scrollbarYLeft=toInt(railYStyle.left);}else{this.isScrollbarYUsingRight=true;}this.scrollbarYOuterWidth=this.isRtl?outerWidth(this.scrollbarY):null;this.railBorderYWidth=toInt(railYStyle.borderTopWidth)+toInt(railYStyle.borderBottomWidth);set(this.scrollbarYRail,{display:'block'});this.railYMarginHeight=toInt(railYStyle.marginTop)+toInt(railYStyle.marginBottom);set(this.scrollbarYRail,{display:''});this.railYHeight=null;this.railYRatio=null;this.reach={x:element.scrollLeft<=0?'start':element.scrollLeft>=this.contentWidth-this.containerWidth?'end':null,y:element.scrollTop<=0?'start':element.scrollTop>=this.contentHeight-this.containerHeight?'end':null};this.isAlive=true;this.settings.handlers.forEach(function(handlerName){return handlers[handlerName](this$1);});this.lastScrollTop=Math.floor(element.scrollTop);// for onScroll only
this.lastScrollLeft=element.scrollLeft;// for onScroll only
this.event.bind(this.element,'scroll',function(e){return this$1.onScroll(e);});updateGeometry(this);};PerfectScrollbar.prototype.update=function update(){if(!this.isAlive){return;}// Recalcuate negative scrollLeft adjustment
this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0;// Recalculate rail margins
set(this.scrollbarXRail,{display:'block'});set(this.scrollbarYRail,{display:'block'});this.railXMarginWidth=toInt(get(this.scrollbarXRail).marginLeft)+toInt(get(this.scrollbarXRail).marginRight);this.railYMarginHeight=toInt(get(this.scrollbarYRail).marginTop)+toInt(get(this.scrollbarYRail).marginBottom);// Hide scrollbars not to affect scrollWidth and scrollHeight
set(this.scrollbarXRail,{display:'none'});set(this.scrollbarYRail,{display:'none'});updateGeometry(this);processScrollDiff(this,'top',0,false,true);processScrollDiff(this,'left',0,false,true);set(this.scrollbarXRail,{display:''});set(this.scrollbarYRail,{display:''});};PerfectScrollbar.prototype.onScroll=function onScroll(e){if(!this.isAlive){return;}updateGeometry(this);processScrollDiff(this,'top',this.element.scrollTop-this.lastScrollTop);processScrollDiff(this,'left',this.element.scrollLeft-this.lastScrollLeft);this.lastScrollTop=Math.floor(this.element.scrollTop);this.lastScrollLeft=this.element.scrollLeft;};PerfectScrollbar.prototype.destroy=function destroy(){if(!this.isAlive){return;}this.event.unbindAll();remove(this.scrollbarX);remove(this.scrollbarY);remove(this.scrollbarXRail);remove(this.scrollbarYRail);this.removePsClasses();// unset elements
this.element=null;this.scrollbarX=null;this.scrollbarY=null;this.scrollbarXRail=null;this.scrollbarYRail=null;this.isAlive=false;};PerfectScrollbar.prototype.removePsClasses=function removePsClasses(){this.element.className=this.element.className.split(' ').filter(function(name){return!name.match(/^ps([-_].+|)$/);}).join(' ');};return PerfectScrollbar;});;/*
 * jQuery tableHover plugin
 * Version: 0.1.4
 *
 * Copyright (c) 2007 Roman Weich
 * http://p.sohei.org
 *
 * Dual licensed under the MIT and GPL licenses 
 * (This means that you can choose the license that best suits your project, and use it accordingly):
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Changelog: 
 * v 0.1.4 - 2007-12-17
 *	- fix: clicking on a link or child element inside a cell did not set the clickClass on the rows/columns.
 * v 0.1.3 - 2007-09-04
 *	- fix: highlight did not work when the hovered table cell had child elements inside
 * v 0.1.2 - 2007-08-13
 *	- fix/change: changed event binding routine, as is got really slow with jquery 1.1.3.1
 *	-change: added new option "ignoreCols", through which columns can be excluded from the highlighting process
 * v 0.1.1 - 2007-06-05
 *	- fix: errors when using the plugin on a table not having a theader or tfoot
 * v 0.1.0 - 2007-05-31
 */(function($){/**
	 * Calculates the actual cellIndex value of all cells in the table and stores it in the realCell property of each cell.
	 * Thats done because the cellIndex value isn't correct when colspans or rowspans are used.
	 * Originally created by Matt Kruse for his table library - Big Thanks! (see http://www.javascripttoolbox.com/)
	 * @param {element} table	The table element.
	 */var fixCellIndexes=function fixCellIndexes(table){var rows=table.rows;var len=rows.length;var matrix=[];for(var i=0;i<len;i++){var cells=rows[i].cells;var clen=cells.length;for(var j=0;j<clen;j++){var c=cells[j];var rowSpan=c.rowSpan||1;var colSpan=c.colSpan||1;var firstAvailCol=-1;if(!matrix[i]){matrix[i]=[];}var m=matrix[i];// Find first available column in the first row
while(m[++firstAvailCol]){}c.realIndex=firstAvailCol;for(var k=i;k<i+rowSpan;k++){if(!matrix[k]){matrix[k]=[];}var matrixrow=matrix[k];for(var l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]=1;}}}}};/**
	 * Sets the rowIndex of each row in the table. 
	 * Opera seems to get that wrong using document order instead of logical order on the tfoot-tbody part.
	 * @param {element} table	The table element.
	 */var fixRowIndexes=function fixRowIndexes(tbl){var v=0,i,k,r=tbl.tHead?tbl.tHead.rows:0;if(r){for(i=0;i<r.length;i++){r[i].realRIndex=v++;}}for(k=0;k<tbl.tBodies.length;k++){r=tbl.tBodies[k].rows;if(r){for(i=0;i<r.length;i++){r[i].realRIndex=v++;}}}r=tbl.tFoot?tbl.tFoot.rows:0;if(r){for(i=0;i<r.length;i++){r[i].realRIndex=v++;}}};/**
	 * Highlights table rows and/or columns on mouse over.
	 * Fixes the highlight of the currently highlighted rows/columns on click.
	 * Works on tables with rowspans and colspans.
	 *
	 * @param {map} options			An object for optional settings (options described below).
	 *
	 * @option {boolean} allowHead		Allow highlighting when hovering over the table header.
	 *							Default value: true
	 * @option {boolean} allowBody		Allow highlighting when hovering over the table body.
	 *							Default value: true
	 * @option {boolean} allowFoot		Allow highlighting when hovering over the table footer.
	 *							Default value: true
	 *
	 * @option {boolean} headRows		If true the rows in the table header will be highlighted when hovering over them.
	 *							Default value: false
	 * @option {boolean} bodyRows		If true the rows in the table body will be highlighted when hovering over them.
	 *							Default value: true
	 * @option {boolean} footRows		If true the rows in the table footer will be highlighted when hovering over them.
	 *							Default value: false
	 * @option {boolean} spanRows		When hovering over a cell spanning over more than one row, highlight all spanned rows.
	 *							Default value: true
	 *
	 * @option {boolean} headCols		If true the cells in the table header (matching the currently hovered column) will be highlighted.
	 *							Default value: false
	 * @option {boolean} bodyCols		If true the cells in the table body (matching the currently hovered column) will be highlighted.
	 *							Default value: true
	 * @option {boolean} footCols		If true the cells in the table footer (matching the currently hovered column) will be highlighted.
	 *							Default value: false
	 * @option {boolean} spanCols		When hovering over a cell spanning over more than one column, highlight all spanned columns.
	 *							Default value: true
	 * @option {array} ignoreCols		An array of numbers. Each column with the matching column index won't be included in the highlighting process.
	 *							Index starting at 1!
	 *							Default value: [] (empty array)
	 *
	 * @option {boolean} headCells		Set a special highlight class to the cell the mouse pointer is currently pointing at (inside the table header only).
	 *							Default value: false
	 * @option {boolean} bodyCells		Set a special highlight class to the cell the mouse pointer is currently pointing at (inside the table body only).
	 *							Default value: true
	 * @option {boolean} footCells		Set a special highlight class to the cell the mouse pointer is currently pointing at (inside the table footer only).
	 *							Default value: false
	 *
	 * @option {string} rowClass			The css class set to the currently highlighted row.
	 *							Default value: 'hover'
	 * @option {string} colClass			The css class set to the currently highlighted column.
	 *							Default value: '' (empty string)
	 * @option {string} cellClass			The css class set to the currently highlighted cell.
	 *							Default value: '' (empty string)
	 * @option {string} clickClass		The css class set to the currently highlighted row and column on mouse click.
	 *							Default value: '' (empty string)
	 *
	 * @example $('#table').tableHover({});
	 * @desc Add simple row highlighting to #table with default settings.
	 *
	 * @example $('#table').tableHover({rowClass: "someclass", colClass: "someotherclass"});
	 * @desc Add row and columnhighlighting to #table and set the specified css classes to the highlighted cells.
	 *
	 * @example $('#table').tableHover({clickClass: "someclickclass"});
	 * @desc Add simple row highlighting to #table and set the specified css class on the cells when clicked.
	 *
	 * @example $('#table').tableHover({allowBody: false, allowFoot: false, allowHead: true, colClass: "someclass"});
	 * @desc Add column highlighting on #table only highlighting the cells when hovering over the table header.
	 *
	 * @example $('#table').tableHover({bodyCols: false, footCols: false, headCols: true, colClass: "someclass"});
	 * @desc Add column highlighting on #table only for the cells in the header.
	 *
	 * @type jQuery
	 *
	 * @name tableHover
	 * @cat Plugins/tableHover
	 * @author Roman Weich (http://p.sohei.org)
	 */$.fn.tableHover=function(options){var settings=$.extend({allowHead:true,allowBody:true,allowFoot:true,headRows:false,bodyRows:true,footRows:false,spanRows:true,headCols:false,bodyCols:true,footCols:false,spanCols:true,ignoreCols:[],headCells:false,bodyCells:true,footCells:false,//css classes,,
rowClass:'hover',colClass:'',cellClass:'',clickClass:''},options);return this.each(function(){var colIndex=[],rowIndex=[],tbl=this,r,rCnt=0,lastClick=[-1,-1];if(!tbl.tBodies||!tbl.tBodies.length){return;}/**
			 * Adds all rows and each of their cells to the row and column indexes.
			 * @param {array} rows		An array of table row elements to add.
			 * @param {string} nodeName	Defines whether the rows are in the header, body or footer of the table.
			 */var addToIndex=function addToIndex(rows,nodeName){var c,row,rowI,cI,rI,s;//loop through the rows
for(rowI=0;rowI<rows.length;rowI++,rCnt++){row=rows[rowI];//each cell
for(cI=0;cI<row.cells.length;cI++){c=row.cells[cI];//add to rowindex
if(nodeName=='TBODY'&&settings.bodyRows||nodeName=='TFOOT'&&settings.footRows||nodeName=='THEAD'&&settings.headRows){s=c.rowSpan;while(--s>=0){rowIndex[rCnt+s].push(c);}}//add do colindex
if(nodeName=='TBODY'&&settings.bodyCols||nodeName=='THEAD'&&settings.headCols||nodeName=='TFOOT'&&settings.footCols){s=c.colSpan;while(--s>=0){rI=c.realIndex+s;if($.inArray(rI+1,settings.ignoreCols)>-1){break;//dont highlight the columns in the ignoreCols array
}if(!colIndex[rI]){colIndex[rI]=[];}colIndex[rI].push(c);}}//allow hover for the cell?
if(nodeName=='TBODY'&&settings.allowBody||nodeName=='THEAD'&&settings.allowHead||nodeName=='TFOOT'&&settings.allowFoot){c.thover=true;}}}};/**
			 * Mouseover event handling. Set the highlight to the rows/cells.
			 */var over=function over(e){var p=e.target;while(p!=this&&p.thover!==true){p=p.parentNode;}if(p.thover===true){highlight(p,true);}};/**
			 * Mouseout event handling. Remove the highlight from the rows/cells.
			 */var out=function out(e){var p=e.target;while(p!=this&&p.thover!==true){p=p.parentNode;}if(p.thover===true){highlight(p,false);}};/**
			 * Mousedown event handling. Sets or removes the clickClass css style to the currently highlighted rows/cells.
			 */var click=function click(e){var t=e.target;while(t&&t!=tbl&&!t.thover){//search the real target
t=t.parentNode;}if(t.thover&&settings.clickClass!=''){var x=t.realIndex,y=t.parentNode.realRIndex,s='';//unclick
$('td.'+settings.clickClass+', th.'+settings.clickClass,tbl).removeClass(settings.clickClass);if(x!=lastClick[0]||y!=lastClick[1]){//click..
if(settings.rowClass!=''){s+=',.'+settings.rowClass;}if(settings.colClass!=''){s+=',.'+settings.colClass;}if(settings.cellClass!=''){s+=',.'+settings.cellClass;}if(s!=''){$('td, th',tbl).filter(s.substring(1)).addClass(settings.clickClass);}lastClick=[x,y];}else{lastClick=[-1,-1];}}};/**
			 * Adds or removes the highlight to/from the columns and rows.
			 * @param {element} cell	The cell with the mouseover/mouseout event.
			 * @param {boolean} on		Defines whether the style will be set or removed.
			 */var highlight=function highlight(cell,on){if(on)//create dummy funcs - dont want to test for on==true all the time
{$.fn.tableHoverHover=$.fn.addClass;}else{$.fn.tableHoverHover=$.fn.removeClass;}//highlight columns
var h=colIndex[cell.realIndex]||[],rH=[],i=0,rI,nn;if(settings.colClass!=''){while(settings.spanCols&&++i<cell.colSpan&&colIndex[cell.realIndex+i]){h=h.concat(colIndex[cell.realIndex+i]);}$(h).tableHoverHover(settings.colClass);}//highlight rows
if(settings.rowClass!=''){rI=cell.parentNode.realRIndex;if(rowIndex[rI]){rH=rH.concat(rowIndex[rI]);}i=0;while(settings.spanRows&&++i<cell.rowSpan){if(rowIndex[rI+i]){rH=rH.concat(rowIndex[rI+i]);}}$(rH).tableHoverHover(settings.rowClass);}//highlight cell
if(settings.cellClass!=''){nn=cell.parentNode.parentNode.nodeName.toUpperCase();if(nn=='TBODY'&&settings.bodyCells||nn=='THEAD'&&settings.headCells||nn=='TFOOT'&&settings.footCells){$(cell).tableHoverHover(settings.cellClass);}}};fixCellIndexes(tbl);fixRowIndexes(tbl);//init rowIndex
for(r=0;r<tbl.rows.length;r++){rowIndex[r]=[];}//add header cells to index
if(tbl.tHead){addToIndex(tbl.tHead.rows,'THEAD');}//create index - loop through the bodies
for(r=0;r<tbl.tBodies.length;r++){addToIndex(tbl.tBodies[r].rows,'TBODY');}//add footer cells to index
if(tbl.tFoot){addToIndex(tbl.tFoot.rows,'TFOOT');}$(this).bind('mouseover',over).bind('mouseout',out).click(click);});};})(jQuery);;/*! VelocityJS.org (1.5.0). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License *//*************************
 Velocity jQuery Shim
 *************************//*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. *//* This file contains the jQuery functions that Velocity relies on, thereby removing Velocity's dependency on a full copy of jQuery, and allowing it to work in any environment. *//* These shimmed functions are only used if jQuery isn't present. If both this shim and jQuery are loaded, Velocity defaults to jQuery proper. *//* Browser support: Using this shim instead of jQuery proper removes support for IE8. */(function(window){"use strict";/***************
	 Setup
	 ***************//* If jQuery is already loaded, there's no point in loading this shim. */if(window.jQuery){return;}/* jQuery base. */var $=function $(selector,context){return new $.fn.init(selector,context);};/********************
	 Private Methods
	 ********************//* jQuery */$.isWindow=function(obj){/* jshint eqeqeq: false */return obj&&obj===obj.window;};/* jQuery */$.type=function(obj){if(!obj){return obj+"";}return(typeof obj==="undefined"?"undefined":_typeof2(obj))==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj==="undefined"?"undefined":_typeof2(obj);};/* jQuery */$.isArray=Array.isArray||function(obj){return $.type(obj)==="array";};/* jQuery */function isArraylike(obj){var length=obj.length,type=$.type(obj);if(type==="function"||$.isWindow(obj)){return false;}if(obj.nodeType===1&&length){return true;}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj;}/***************
	 $ Methods
	 ***************//* jQuery: Support removed for IE<9. */$.isPlainObject=function(obj){var key;if(!obj||$.type(obj)!=="object"||obj.nodeType||$.isWindow(obj)){return false;}try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(e){return false;}for(key in obj){}return key===undefined||hasOwn.call(obj,key);};/* jQuery */$.each=function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break;}}}else{for(i in obj){if(!obj.hasOwnProperty(i)){continue;}value=callback.apply(obj[i],args);if(value===false){break;}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break;}}}else{for(i in obj){if(!obj.hasOwnProperty(i)){continue;}value=callback.call(obj[i],i,obj[i]);if(value===false){break;}}}}return obj;};/* Custom */$.data=function(node,key,value){/* $.getData() */if(value===undefined){var getId=node[$.expando],store=getId&&cache[getId];if(key===undefined){return store;}else if(store){if(key in store){return store[key];}}/* $.setData() */}else if(key!==undefined){var setId=node[$.expando]||(node[$.expando]=++$.uuid);cache[setId]=cache[setId]||{};cache[setId][key]=value;return value;}};/* Custom */$.removeData=function(node,keys){var id=node[$.expando],store=id&&cache[id];if(store){// Cleanup the entire store if no keys are provided.
if(!keys){delete cache[id];}else{$.each(keys,function(_,key){delete store[key];});}}};/* jQuery */$.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++;}if((typeof target==="undefined"?"undefined":_typeof2(target))!=="object"&&$.type(target)!=="function"){target={};}if(i===length){target=this;i--;}for(;i<length;i++){if(options=arguments[i]){for(name in options){if(!options.hasOwnProperty(name)){continue;}src=target[name];copy=options[name];if(target===copy){continue;}if(deep&&copy&&($.isPlainObject(copy)||(copyIsArray=$.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&$.isArray(src)?src:[];}else{clone=src&&$.isPlainObject(src)?src:{};}target[name]=$.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}return target;};/* jQuery 1.4.3 */$.queue=function(elem,type,data){function $makeArray(arr,results){var ret=results||[];if(arr){if(isArraylike(Object(arr))){/* $.merge */(function(first,second){var len=+second.length,j=0,i=first.length;while(j<len){first[i++]=second[j++];}if(len!==len){while(second[j]!==undefined){first[i++]=second[j++];}}first.length=i;return first;})(ret,typeof arr==="string"?[arr]:arr);}else{[].push.call(ret,arr);}}return ret;}if(!elem){return;}type=(type||"fx")+"queue";var q=$.data(elem,type);if(!data){return q||[];}if(!q||$.isArray(data)){q=$.data(elem,type,$makeArray(data));}else{q.push(data);}return q;};/* jQuery 1.4.3 */$.dequeue=function(elems,type){/* Custom: Embed element iteration. */$.each(elems.nodeType?[elems]:elems,function(i,elem){type=type||"fx";var queue=$.queue(elem,type),fn=queue.shift();if(fn==="inprogress"){fn=queue.shift();}if(fn){if(type==="fx"){queue.unshift("inprogress");}fn.call(elem,function(){$.dequeue(elem,type);});}});};/******************
	 $.fn Methods
	 ******************//* jQuery */$.fn=$.prototype={init:function init(selector){/* Just return the element wrapped inside an array; don't proceed with the actual jQuery node wrapping process. */if(selector.nodeType){this[0]=selector;return this;}else{throw new Error("Not a DOM node.");}},offset:function offset(){/* jQuery altered code: Dropped disconnected DOM node checking. */var box=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:box.top+(window.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:box.left+(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)};},position:function position(){/* jQuery */function offsetParentFn(elem){var offsetParent=elem.offsetParent;while(offsetParent&&offsetParent.nodeName.toLowerCase()!=="html"&&offsetParent.style&&offsetParent.style.position.toLowerCase()==="static"){offsetParent=offsetParent.offsetParent;}return offsetParent||document;}/* Zepto */var elem=this[0],offsetParent=offsetParentFn(elem),offset=this.offset(),parentOffset=/^(?:body|html)$/i.test(offsetParent.nodeName)?{top:0,left:0}:$(offsetParent).offset();offset.top-=parseFloat(elem.style.marginTop)||0;offset.left-=parseFloat(elem.style.marginLeft)||0;if(offsetParent.style){parentOffset.top+=parseFloat(offsetParent.style.borderTopWidth)||0;parentOffset.left+=parseFloat(offsetParent.style.borderLeftWidth)||0;}return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};}};/**********************
	 Private Variables
	 **********************//* For $.data() */var cache={};$.expando="velocity"+new Date().getTime();$.uuid=0;/* For $.queue() */var class2type={},hasOwn=class2type.hasOwnProperty,toString=class2type.toString;var types="Boolean Number String Function Array Date RegExp Object Error".split(" ");for(var i=0;i<types.length;i++){class2type["[object "+types[i]+"]"]=types[i].toLowerCase();}/* Makes $(node) possible, without having to call init. */$.fn.init.prototype=$.fn;/* Globalize Velocity onto the window, and assign its Utilities property. */window.Velocity={Utilities:$};})(window);/******************
 Velocity.js
 ******************/(function(factory){"use strict";/* CommonJS module. */if((typeof module==="undefined"?"undefined":_typeof2(module))==="object"&&_typeof2(module.exports)==="object"){module.exports=factory();/* AMD module. */}else if(typeof define==="function"&&define.amd){define(factory);/* Browser globals. */}else{factory();}})(function(){"use strict";return function(global,window,document,undefined){/***************
		 Summary
		 ***************//*
		 - CSS: CSS stack that works independently from the rest of Velocity.
		 - animate(): Core animation method that iterates over the targeted elements and queues the incoming call onto each element individually.
		 - Pre-Queueing: Prepare the element for animation by instantiating its data cache and processing the call's options.
		 - Queueing: The logic that runs once the call has reached its point of execution in the element's $.queue() stack.
		 Most logic is placed here to avoid risking it becoming stale (if the element's properties have changed).
		 - Pushing: Consolidation of the tween data followed by its push onto the global in-progress calls container.
		 - tick(): The single requestAnimationFrame loop responsible for tweening all in-progress calls.
		 - completeCall(): Handles the cleanup process for each Velocity call.
		 *//*********************
		 Helper Functions
		 *********************//* IE detection. Gist: https://gist.github.com/julianshapiro/9098609 */var IE=function(){if(document.documentMode){return document.documentMode;}else{for(var i=7;i>4;i--){var div=document.createElement("div");div.innerHTML="<!--[if IE "+i+"]><span></span><![endif]-->";if(div.getElementsByTagName("span").length){div=null;return i;}}}return undefined;}();/* rAF shim. Gist: https://gist.github.com/julianshapiro/9497513 */var rAFShim=function(){var timeLast=0;return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){var timeCurrent=new Date().getTime(),timeDelta;/* Dynamically set delay on a per-tick basis to match 60fps. *//* Technique by Erik Moller. MIT license: https://gist.github.com/paulirish/1579671 */timeDelta=Math.max(0,16-(timeCurrent-timeLast));timeLast=timeCurrent+timeDelta;return setTimeout(function(){callback(timeCurrent+timeDelta);},timeDelta);};}();var performance=function(){var perf=window.performance||{};if(typeof perf.now!=="function"){var nowOffset=perf.timing&&perf.timing.navigationStart?perf.timing.navigationStart:new Date().getTime();perf.now=function(){return new Date().getTime()-nowOffset;};}return perf;}();/* Array compacting. Copyright Lo-Dash. MIT License: https://github.com/lodash/lodash/blob/master/LICENSE.txt */function compactSparseArray(array){var index=-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value){result.push(value);}}return result;}/**
		 * Shim for "fixing" IE's lack of support (IE < 9) for applying slice
		 * on host objects like NamedNodeMap, NodeList, and HTMLCollection
		 * (technically, since host objects have been implementation-dependent,
		 * at least before ES2015, IE hasn't needed to work this way).
		 * Also works on strings, fixes IE < 9 to allow an explicit undefined
		 * for the 2nd argument (as in Firefox), and prevents errors when
		 * called on other DOM objects.
		 */var _slice=function(){var slice=Array.prototype.slice;try{// Can't be used with DOM elements in IE < 9
slice.call(document.documentElement);return slice;}catch(e){// Fails in IE < 9
// This will work for genuine arrays, array-like objects, 
// NamedNodeMap (attributes, entities, notations),
// NodeList (e.g., getElementsByTagName), HTMLCollection (e.g., childNodes),
// and will not fail on other DOM objects (as do DOM elements in IE < 9)
return function(begin,end){var len=this.length;if(typeof begin!=="number"){begin=0;}// IE < 9 gets unhappy with an undefined end argument
if(typeof end!=="number"){end=len;}// For native Array objects, we use the native slice function
if(this.slice){return slice.call(this,begin,end);}// For array like object we handle it ourselves.
var i,cloned=[],// Handle negative value for "begin"
start=begin>=0?begin:Math.max(0,len+begin),// Handle negative value for "end"
upTo=end<0?len+end:Math.min(end,len),// Actual expected size of the slice
size=upTo-start;if(size>0){cloned=new Array(size);if(this.charAt){for(i=0;i<size;i++){cloned[i]=this.charAt(start+i);}}else{for(i=0;i<size;i++){cloned[i]=this[start+i];}}}return cloned;};}}();/* .indexOf doesn't exist in IE<9 */var _inArray=function _inArray(){if(Array.prototype.includes){return function(arr,val){return arr.includes(val);};}if(Array.prototype.indexOf){return function(arr,val){return arr.indexOf(val)>=0;};}return function(arr,val){for(var i=0;i<arr.length;i++){if(arr[i]===val){return true;}}return false;};};function sanitizeElements(elements){/* Unwrap jQuery/Zepto objects. */if(Type.isWrapped(elements)){elements=_slice.call(elements);/* Wrap a single element in an array so that $.each() can iterate with the element instead of its node's children. */}else if(Type.isNode(elements)){elements=[elements];}return elements;}var Type={isNumber:function isNumber(variable){return typeof variable==="number";},isString:function isString(variable){return typeof variable==="string";},isArray:Array.isArray||function(variable){return Object.prototype.toString.call(variable)==="[object Array]";},isFunction:function isFunction(variable){return Object.prototype.toString.call(variable)==="[object Function]";},isNode:function isNode(variable){return variable&&variable.nodeType;},/* Determine if variable is an array-like wrapped jQuery, Zepto or similar element, or even a NodeList etc. *//* NOTE: HTMLFormElements also have a length. */isWrapped:function isWrapped(variable){return variable&&variable!==window&&Type.isNumber(variable.length)&&!Type.isString(variable)&&!Type.isFunction(variable)&&!Type.isNode(variable)&&(variable.length===0||Type.isNode(variable[0]));},isSVG:function isSVG(variable){return window.SVGElement&&variable instanceof window.SVGElement;},isEmptyObject:function isEmptyObject(variable){for(var name in variable){if(variable.hasOwnProperty(name)){return false;}}return true;}};/*****************
		 Dependencies
		 *****************/var $,isJQuery=false;if(global.fn&&global.fn.jquery){$=global;isJQuery=true;}else{$=window.Velocity.Utilities;}if(IE<=8&&!isJQuery){throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");}else if(IE<=7){/* Revert to jQuery's $.animate(), and lose Velocity's extra features. */jQuery.fn.velocity=jQuery.fn.animate;/* Now that $.fn.velocity is aliased, abort this Velocity declaration. */return;}/*****************
		 Constants
		 *****************/var DURATION_DEFAULT=400,EASING_DEFAULT="swing";/*************
		 State
		 *************/var Velocity={/* Container for page-wide Velocity state data. */State:{/* Detect mobile devices to determine if mobileHA should be turned on. */isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent),/* The mobileHA option's behavior changes on older Android devices (Gingerbread, versions 2.3.3-2.3.7). */isAndroid:/Android/i.test(window.navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(window.navigator.userAgent),isChrome:window.chrome,isFirefox:/Firefox/i.test(window.navigator.userAgent),/* Create a cached element for re-use when checking for CSS property prefixes. */prefixElement:document.createElement("div"),/* Cache every prefix match to avoid repeating lookups. */prefixMatches:{},/* Cache the anchor used for animating window scrolling. */scrollAnchor:null,/* Cache the browser-specific property names associated with the scroll anchor. */scrollPropertyLeft:null,scrollPropertyTop:null,/* Keep track of whether our RAF tick is running. */isTicking:false,/* Container for every in-progress call to Velocity. */calls:[],delayedElements:{count:0}},/* Velocity's custom CSS stack. Made global for unit testing. */CSS:{/* Defined below. */},/* A shim of the jQuery utility functions used by Velocity -- provided by Velocity's optional jQuery shim. */Utilities:$,/* Container for the user's custom animation redirects that are referenced by name in place of the properties map argument. */Redirects:{/* Manually registered by the user. */},Easings:{/* Defined below. */},/* Attempt to use ES6 Promises by default. Users can override this with a third-party promises library. */Promise:window.Promise,/* Velocity option defaults, which can be overriden by the user. */defaults:{queue:"",duration:DURATION_DEFAULT,easing:EASING_DEFAULT,begin:undefined,complete:undefined,progress:undefined,display:undefined,visibility:undefined,loop:false,delay:false,mobileHA:true,/* Advanced: Set to false to prevent property values from being cached between consecutive Velocity-initiated chain calls. */_cacheValues:true,/* Advanced: Set to false if the promise should always resolve on empty element lists. */promiseRejectEmpty:true},/* A design goal of Velocity is to cache data wherever possible in order to avoid DOM requerying. Accordingly, each element has a data cache. */init:function init(element){$.data(element,"velocity",{/* Store whether this is an SVG element, since its properties are retrieved and updated differently than standard HTML elements. */isSVG:Type.isSVG(element),/* Keep track of whether the element is currently being animated by Velocity.
					 This is used to ensure that property values are not transferred between non-consecutive (stale) calls. */isAnimating:false,/* A reference to the element's live computedStyle object. Learn more here: https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle */computedStyle:null,/* Tween data is cached for each animation on the element so that data can be passed across calls --
					 in particular, end values are used as subsequent start values in consecutive Velocity calls. */tweensContainer:null,/* The full root property values of each CSS hook being animated on this element are cached so that:
					 1) Concurrently-animating hooks sharing the same root can have their root values' merged into one while tweening.
					 2) Post-hook-injection root values can be transferred over to consecutively chained Velocity calls as starting root values. */rootPropertyValueCache:{},/* A cache for transform updates, which must be manually flushed via CSS.flushTransformCache(). */transformCache:{}});},/* A parallel to jQuery's $.css(), used for getting/setting Velocity's hooked CSS properties. */hook:null,/* Defined below. *//* Velocity-wide animation time remapping for testing purposes. */mock:false,version:{major:1,minor:5,patch:1},/* Set to 1 or 2 (most verbose) to output debug info to console. */debug:false,/* Use rAF high resolution timestamp when available */timestamp:true,/* Pause all animations */pauseAll:function pauseAll(queueName){var currentTime=new Date().getTime();$.each(Velocity.State.calls,function(i,activeCall){if(activeCall){/* If we have a queueName and this call is not on that queue, skip */if(queueName!==undefined&&(activeCall[2].queue!==queueName||activeCall[2].queue===false)){return true;}/* Set call to paused */activeCall[5]={resume:false};}});/* Pause timers on any currently delayed calls */$.each(Velocity.State.delayedElements,function(k,element){if(!element){return;}pauseDelayOnElement(element,currentTime);});},/* Resume all animations */resumeAll:function resumeAll(queueName){var currentTime=new Date().getTime();$.each(Velocity.State.calls,function(i,activeCall){if(activeCall){/* If we have a queueName and this call is not on that queue, skip */if(queueName!==undefined&&(activeCall[2].queue!==queueName||activeCall[2].queue===false)){return true;}/* Set call to resumed if it was paused */if(activeCall[5]){activeCall[5].resume=true;}}});/* Resume timers on any currently delayed calls */$.each(Velocity.State.delayedElements,function(k,element){if(!element){return;}resumeDelayOnElement(element,currentTime);});}};/* Retrieve the appropriate scroll anchor and property name for the browser: https://developer.mozilla.org/en-US/docs/Web/API/Window.scrollY */if(window.pageYOffset!==undefined){Velocity.State.scrollAnchor=window;Velocity.State.scrollPropertyLeft="pageXOffset";Velocity.State.scrollPropertyTop="pageYOffset";}else{Velocity.State.scrollAnchor=document.documentElement||document.body.parentNode||document.body;Velocity.State.scrollPropertyLeft="scrollLeft";Velocity.State.scrollPropertyTop="scrollTop";}/* Shorthand alias for jQuery's $.data() utility. */function Data(element){/* Hardcode a reference to the plugin name. */var response=$.data(element,"velocity");/* jQuery <=1.4.2 returns null instead of undefined when no match is found. We normalize this behavior. */return response===null?undefined:response;}/**************
		 Delay Timer
		 **************/function pauseDelayOnElement(element,currentTime){/* Check for any delay timers, and pause the set timeouts (while preserving time data)
			 to be resumed when the "resume" command is issued */var data=Data(element);if(data&&data.delayTimer&&!data.delayPaused){data.delayRemaining=data.delay-currentTime+data.delayBegin;data.delayPaused=true;clearTimeout(data.delayTimer.setTimeout);}}function resumeDelayOnElement(element,currentTime){/* Check for any paused timers and resume */var data=Data(element);if(data&&data.delayTimer&&data.delayPaused){/* If the element was mid-delay, re initiate the timeout with the remaining delay */data.delayPaused=false;data.delayTimer.setTimeout=setTimeout(data.delayTimer.next,data.delayRemaining);}}/**************
		 Easing
		 **************//* Step easing generator. */function generateStep(steps){return function(p){return Math.round(p*steps)*(1/steps);};}/* Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function generateBezier(mX1,mY1,mX2,mY2){var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=0.001,SUBDIVISION_PRECISION=0.0000001,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1.0/(kSplineTableSize-1.0),float32ArraySupported="Float32Array"in window;/* Must contain four arguments. */if(arguments.length!==4){return false;}/* Arguments must be numbers. */for(var i=0;i<4;++i){if(typeof arguments[i]!=="number"||isNaN(arguments[i])||!isFinite(arguments[i])){return false;}}/* X values must be in the [0, 1] range. */mX1=Math.min(mX1,1);mX2=Math.min(mX2,1);mX1=Math.max(mX1,0);mX2=Math.max(mX2,0);var mSampleValues=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);function A(aA1,aA2){return 1.0-3.0*aA2+3.0*aA1;}function B(aA1,aA2){return 3.0*aA2-6.0*aA1;}function C(aA1){return 3.0*aA1;}function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT;}function getSlope(aT,aA1,aA2){return 3.0*A(aA1,aA2)*aT*aT+2.0*B(aA1,aA2)*aT+C(aA1);}function newtonRaphsonIterate(aX,aGuessT){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(currentSlope===0.0){return aGuessT;}var currentX=calcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope;}return aGuessT;}function calcSampleValues(){for(var i=0;i<kSplineTableSize;++i){mSampleValues[i]=calcBezier(i*kSampleStepSize,mX1,mX2);}}function binarySubdivide(aX,aA,aB){var currentX,currentT,i=0;do{currentT=aA+(aB-aA)/2.0;currentX=calcBezier(currentT,mX1,mX2)-aX;if(currentX>0.0){aB=currentT;}else{aA=currentT;}}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS);return currentT;}function getTForX(aX){var intervalStart=0.0,currentSample=1,lastSample=kSplineTableSize-1;for(;currentSample!==lastSample&&mSampleValues[currentSample]<=aX;++currentSample){intervalStart+=kSampleStepSize;}--currentSample;var dist=(aX-mSampleValues[currentSample])/(mSampleValues[currentSample+1]-mSampleValues[currentSample]),guessForT=intervalStart+dist*kSampleStepSize,initialSlope=getSlope(guessForT,mX1,mX2);if(initialSlope>=NEWTON_MIN_SLOPE){return newtonRaphsonIterate(aX,guessForT);}else if(initialSlope===0.0){return guessForT;}else{return binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize);}}var _precomputed=false;function precompute(){_precomputed=true;if(mX1!==mY1||mX2!==mY2){calcSampleValues();}}var f=function f(aX){if(!_precomputed){precompute();}if(mX1===mY1&&mX2===mY2){return aX;}if(aX===0){return 0;}if(aX===1){return 1;}return calcBezier(getTForX(aX),mY1,mY2);};f.getControlPoints=function(){return[{x:mX1,y:mY1},{x:mX2,y:mY2}];};var str="generateBezier("+[mX1,mY1,mX2,mY2]+")";f.toString=function(){return str;};return f;}/* Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *//* Given a tension, friction, and duration, a simulation at 60FPS will first run without a defined duration in order to calculate the full path. A second pass
		 then adjusts the time delta -- using the relation between actual time and duration -- to calculate the path for the duration-constrained animation. */var generateSpringRK4=function(){function springAccelerationForState(state){return-state.tension*state.x-state.friction*state.v;}function springEvaluateStateWithDerivative(initialState,dt,derivative){var state={x:initialState.x+derivative.dx*dt,v:initialState.v+derivative.dv*dt,tension:initialState.tension,friction:initialState.friction};return{dx:state.v,dv:springAccelerationForState(state)};}function springIntegrateState(state,dt){var a={dx:state.v,dv:springAccelerationForState(state)},b=springEvaluateStateWithDerivative(state,dt*0.5,a),c=springEvaluateStateWithDerivative(state,dt*0.5,b),d=springEvaluateStateWithDerivative(state,dt,c),dxdt=1.0/6.0*(a.dx+2.0*(b.dx+c.dx)+d.dx),dvdt=1.0/6.0*(a.dv+2.0*(b.dv+c.dv)+d.dv);state.x=state.x+dxdt*dt;state.v=state.v+dvdt*dt;return state;}return function springRK4Factory(tension,friction,duration){var initState={x:-1,v:0,tension:null,friction:null},path=[0],time_lapsed=0,tolerance=1/10000,DT=16/1000,have_duration,dt,last_state;tension=parseFloat(tension)||500;friction=parseFloat(friction)||20;duration=duration||null;initState.tension=tension;initState.friction=friction;have_duration=duration!==null;/* Calculate the actual time it takes for this animation to complete with the provided conditions. */if(have_duration){/* Run the simulation without a duration. */time_lapsed=springRK4Factory(tension,friction);/* Compute the adjusted time delta. */dt=time_lapsed/duration*DT;}else{dt=DT;}while(true){/* Next/step function .*/last_state=springIntegrateState(last_state||initState,dt);/* Store the position. */path.push(1+last_state.x);time_lapsed+=16;/* If the change threshold is reached, break. */if(!(Math.abs(last_state.x)>tolerance&&Math.abs(last_state.v)>tolerance)){break;}}/* If duration is not defined, return the actual time required for completing this animation. Otherwise, return a closure that holds the
				 computed path and returns a snapshot of the position according to a given percentComplete. */return!have_duration?time_lapsed:function(percentComplete){return path[percentComplete*(path.length-1)|0];};};}();/* jQuery easings. */Velocity.Easings={linear:function linear(p){return p;},swing:function swing(p){return 0.5-Math.cos(p*Math.PI)/2;},/* Bonus "spring" easing, which is a less exaggerated version of easeInOutElastic. */spring:function spring(p){return 1-Math.cos(p*4.5*Math.PI)*Math.exp(-p*6);}};/* CSS3 and Robert Penner easings. */$.each([["ease",[0.25,0.1,0.25,1.0]],["ease-in",[0.42,0.0,1.00,1.0]],["ease-out",[0.00,0.0,0.58,1.0]],["ease-in-out",[0.42,0.0,0.58,1.0]],["easeInSine",[0.47,0,0.745,0.715]],["easeOutSine",[0.39,0.575,0.565,1]],["easeInOutSine",[0.445,0.05,0.55,0.95]],["easeInQuad",[0.55,0.085,0.68,0.53]],["easeOutQuad",[0.25,0.46,0.45,0.94]],["easeInOutQuad",[0.455,0.03,0.515,0.955]],["easeInCubic",[0.55,0.055,0.675,0.19]],["easeOutCubic",[0.215,0.61,0.355,1]],["easeInOutCubic",[0.645,0.045,0.355,1]],["easeInQuart",[0.895,0.03,0.685,0.22]],["easeOutQuart",[0.165,0.84,0.44,1]],["easeInOutQuart",[0.77,0,0.175,1]],["easeInQuint",[0.755,0.05,0.855,0.06]],["easeOutQuint",[0.23,1,0.32,1]],["easeInOutQuint",[0.86,0,0.07,1]],["easeInExpo",[0.95,0.05,0.795,0.035]],["easeOutExpo",[0.19,1,0.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[0.6,0.04,0.98,0.335]],["easeOutCirc",[0.075,0.82,0.165,1]],["easeInOutCirc",[0.785,0.135,0.15,0.86]]],function(i,easingArray){Velocity.Easings[easingArray[0]]=generateBezier.apply(null,easingArray[1]);});/* Determine the appropriate easing type given an easing input. */function getEasing(value,duration){var easing=value;/* The easing option can either be a string that references a pre-registered easing,
			 or it can be a two-/four-item array of integers to be converted into a bezier/spring function. */if(Type.isString(value)){/* Ensure that the easing has been assigned to jQuery's Velocity.Easings object. */if(!Velocity.Easings[value]){easing=false;}}else if(Type.isArray(value)&&value.length===1){easing=generateStep.apply(null,value);}else if(Type.isArray(value)&&value.length===2){/* springRK4 must be passed the animation's duration. *//* Note: If the springRK4 array contains non-numbers, generateSpringRK4() returns an easing
				 function generated with default tension and friction values. */easing=generateSpringRK4.apply(null,value.concat([duration]));}else if(Type.isArray(value)&&value.length===4){/* Note: If the bezier array contains non-numbers, generateBezier() returns false. */easing=generateBezier.apply(null,value);}else{easing=false;}/* Revert to the Velocity-wide default easing type, or fall back to "swing" (which is also jQuery's default)
			 if the Velocity-wide default has been incorrectly modified. */if(easing===false){if(Velocity.Easings[Velocity.defaults.easing]){easing=Velocity.defaults.easing;}else{easing=EASING_DEFAULT;}}return easing;}/*****************
		 CSS Stack
		 *****************//* The CSS object is a highly condensed and performant CSS stack that fully replaces jQuery's.
		 It handles the validation, getting, and setting of both standard CSS properties and CSS property hooks. *//* Note: A "CSS" shorthand is aliased so that our code is easier to read. */var CSS=Velocity.CSS={/*************
			 RegEx
			 *************/RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,/* Unwrap a property value's surrounding text, e.g. "rgba(4, 3, 2, 1)" ==> "4, 3, 2, 1" and "rect(4px 3px 2px 1px)" ==> "4px 3px 2px 1px". */valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,/* Split a multi-value property into an array of subvalues, e.g. "rgba(4, 3, 2, 1) 4px 3px 2px 1px" ==> [ "rgba(4, 3, 2, 1)", "4px", "3px", "2px", "1px" ]. */valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/ig},/************
			 Lists
			 ************/Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"],units:["%",// relative
"em","ex","ch","rem",// font relative
"vw","vh","vmin","vmax",// viewport relative
"cm","mm","Q","in","pc","pt","px",// absolute lengths
"deg","grad","rad","turn",// angles
"s","ms"// time
],colorNames:{"aliceblue":"240,248,255","antiquewhite":"250,235,215","aquamarine":"127,255,212","aqua":"0,255,255","azure":"240,255,255","beige":"245,245,220","bisque":"255,228,196","black":"0,0,0","blanchedalmond":"255,235,205","blueviolet":"138,43,226","blue":"0,0,255","brown":"165,42,42","burlywood":"222,184,135","cadetblue":"95,158,160","chartreuse":"127,255,0","chocolate":"210,105,30","coral":"255,127,80","cornflowerblue":"100,149,237","cornsilk":"255,248,220","crimson":"220,20,60","cyan":"0,255,255","darkblue":"0,0,139","darkcyan":"0,139,139","darkgoldenrod":"184,134,11","darkgray":"169,169,169","darkgrey":"169,169,169","darkgreen":"0,100,0","darkkhaki":"189,183,107","darkmagenta":"139,0,139","darkolivegreen":"85,107,47","darkorange":"255,140,0","darkorchid":"153,50,204","darkred":"139,0,0","darksalmon":"233,150,122","darkseagreen":"143,188,143","darkslateblue":"72,61,139","darkslategray":"47,79,79","darkturquoise":"0,206,209","darkviolet":"148,0,211","deeppink":"255,20,147","deepskyblue":"0,191,255","dimgray":"105,105,105","dimgrey":"105,105,105","dodgerblue":"30,144,255","firebrick":"178,34,34","floralwhite":"255,250,240","forestgreen":"34,139,34","fuchsia":"255,0,255","gainsboro":"220,220,220","ghostwhite":"248,248,255","gold":"255,215,0","goldenrod":"218,165,32","gray":"128,128,128","grey":"128,128,128","greenyellow":"173,255,47","green":"0,128,0","honeydew":"240,255,240","hotpink":"255,105,180","indianred":"205,92,92","indigo":"75,0,130","ivory":"255,255,240","khaki":"240,230,140","lavenderblush":"255,240,245","lavender":"230,230,250","lawngreen":"124,252,0","lemonchiffon":"255,250,205","lightblue":"173,216,230","lightcoral":"240,128,128","lightcyan":"224,255,255","lightgoldenrodyellow":"250,250,210","lightgray":"211,211,211","lightgrey":"211,211,211","lightgreen":"144,238,144","lightpink":"255,182,193","lightsalmon":"255,160,122","lightseagreen":"32,178,170","lightskyblue":"135,206,250","lightslategray":"119,136,153","lightsteelblue":"176,196,222","lightyellow":"255,255,224","limegreen":"50,205,50","lime":"0,255,0","linen":"250,240,230","magenta":"255,0,255","maroon":"128,0,0","mediumaquamarine":"102,205,170","mediumblue":"0,0,205","mediumorchid":"186,85,211","mediumpurple":"147,112,219","mediumseagreen":"60,179,113","mediumslateblue":"123,104,238","mediumspringgreen":"0,250,154","mediumturquoise":"72,209,204","mediumvioletred":"199,21,133","midnightblue":"25,25,112","mintcream":"245,255,250","mistyrose":"255,228,225","moccasin":"255,228,181","navajowhite":"255,222,173","navy":"0,0,128","oldlace":"253,245,230","olivedrab":"107,142,35","olive":"128,128,0","orangered":"255,69,0","orange":"255,165,0","orchid":"218,112,214","palegoldenrod":"238,232,170","palegreen":"152,251,152","paleturquoise":"175,238,238","palevioletred":"219,112,147","papayawhip":"255,239,213","peachpuff":"255,218,185","peru":"205,133,63","pink":"255,192,203","plum":"221,160,221","powderblue":"176,224,230","purple":"128,0,128","red":"255,0,0","rosybrown":"188,143,143","royalblue":"65,105,225","saddlebrown":"139,69,19","salmon":"250,128,114","sandybrown":"244,164,96","seagreen":"46,139,87","seashell":"255,245,238","sienna":"160,82,45","silver":"192,192,192","skyblue":"135,206,235","slateblue":"106,90,205","slategray":"112,128,144","snow":"255,250,250","springgreen":"0,255,127","steelblue":"70,130,180","tan":"210,180,140","teal":"0,128,128","thistle":"216,191,216","tomato":"255,99,71","turquoise":"64,224,208","violet":"238,130,238","wheat":"245,222,179","whitesmoke":"245,245,245","white":"255,255,255","yellowgreen":"154,205,50","yellow":"255,255,0"}},/************
			 Hooks
			 ************//* Hooks allow a subproperty (e.g. "boxShadowBlur") of a compound-value CSS property
			 (e.g. "boxShadow: X Y Blur Spread Color") to be animated as if it were a discrete property. *//* Note: Beyond enabling fine-grained property animation, hooking is necessary since Velocity only
			 tweens properties with single numeric values; unlike CSS transitions, Velocity does not interpolate compound-values. */Hooks:{/********************
				 Registration
				 ********************//* Templates are a concise way of indicating which subproperties must be individually registered for each compound-value CSS property. *//* Each template consists of the compound-value's base name, its constituent subproperty names, and those subproperties' default values. */templates:{"textShadow":["Color X Y Blur","black 0px 0px 0px"],"boxShadow":["Color X Y Blur Spread","black 0px 0px 0px 0px"],"clip":["Top Right Bottom Left","0px 0px 0px 0px"],"backgroundPosition":["X Y","0% 0%"],"transformOrigin":["X Y Z","50% 50% 0px"],"perspectiveOrigin":["X Y","50% 50%"]},/* A "registered" hook is one that has been converted from its template form into a live,
				 tweenable property. It contains data to associate it with its root property. */registered:{/* Note: A registered hook looks like this ==> textShadowBlur: [ "textShadow", 3 ],
					 which consists of the subproperty's name, the associated root property's name,
					 and the subproperty's position in the root's value. */},/* Convert the templates into individual hooks then append them to the registered object above. */register:function register(){/* Color hooks registration: Colors are defaulted to white -- as opposed to black -- since colors that are
					 currently set to "transparent" default to their respective template below when color-animated,
					 and white is typically a closer match to transparent than black is. An exception is made for text ("color"),
					 which is almost always set closer to black than white. */for(var i=0;i<CSS.Lists.colors.length;i++){var rgbComponents=CSS.Lists.colors[i]==="color"?"0 0 0 1":"255 255 255 1";CSS.Hooks.templates[CSS.Lists.colors[i]]=["Red Green Blue Alpha",rgbComponents];}var rootProperty,hookTemplate,hookNames;/* In IE, color values inside compound-value properties are positioned at the end the value instead of at the beginning.
					 Thus, we re-arrange the templates accordingly. */if(IE){for(rootProperty in CSS.Hooks.templates){if(!CSS.Hooks.templates.hasOwnProperty(rootProperty)){continue;}hookTemplate=CSS.Hooks.templates[rootProperty];hookNames=hookTemplate[0].split(" ");var defaultValues=hookTemplate[1].match(CSS.RegEx.valueSplit);if(hookNames[0]==="Color"){/* Reposition both the hook's name and its default value to the end of their respective strings. */hookNames.push(hookNames.shift());defaultValues.push(defaultValues.shift());/* Replace the existing template for the hook's root property. */CSS.Hooks.templates[rootProperty]=[hookNames.join(" "),defaultValues.join(" ")];}}}/* Hook registration. */for(rootProperty in CSS.Hooks.templates){if(!CSS.Hooks.templates.hasOwnProperty(rootProperty)){continue;}hookTemplate=CSS.Hooks.templates[rootProperty];hookNames=hookTemplate[0].split(" ");for(var j in hookNames){if(!hookNames.hasOwnProperty(j)){continue;}var fullHookName=rootProperty+hookNames[j],hookPosition=j;/* For each hook, register its full name (e.g. textShadowBlur) with its root property (e.g. textShadow)
							 and the hook's position in its template's default value string. */CSS.Hooks.registered[fullHookName]=[rootProperty,hookPosition];}}},/*****************************
				 Injection and Extraction
				 *****************************//* Look up the root property associated with the hook (e.g. return "textShadow" for "textShadowBlur"). *//* Since a hook cannot be set directly (the browser won't recognize it), style updating for hooks is routed through the hook's root property. */getRoot:function getRoot(property){var hookData=CSS.Hooks.registered[property];if(hookData){return hookData[0];}else{/* If there was no hook match, return the property name untouched. */return property;}},getUnit:function getUnit(str,start){var unit=(str.substr(start||0,5).match(/^[a-z%]+/)||[])[0]||"";if(unit&&_inArray(CSS.Lists.units,unit)){return unit;}return"";},fixColors:function fixColors(str){return str.replace(/(rgba?\(\s*)?(\b[a-z]+\b)/g,function($0,$1,$2){if(CSS.Lists.colorNames.hasOwnProperty($2)){return($1?$1:"rgba(")+CSS.Lists.colorNames[$2]+($1?"":",1)");}return $1+$2;});},/* Convert any rootPropertyValue, null or otherwise, into a space-delimited list of hook values so that
				 the targeted hook can be injected or extracted at its standard position. */cleanRootPropertyValue:function cleanRootPropertyValue(rootProperty,rootPropertyValue){/* If the rootPropertyValue is wrapped with "rgb()", "clip()", etc., remove the wrapping to normalize the value before manipulation. */if(CSS.RegEx.valueUnwrap.test(rootPropertyValue)){rootPropertyValue=rootPropertyValue.match(CSS.RegEx.valueUnwrap)[1];}/* If rootPropertyValue is a CSS null-value (from which there's inherently no hook value to extract),
					 default to the root's default value as defined in CSS.Hooks.templates. *//* Note: CSS null-values include "none", "auto", and "transparent". They must be converted into their
					 zero-values (e.g. textShadow: "none" ==> textShadow: "0px 0px 0px black") for hook manipulation to proceed. */if(CSS.Values.isCSSNullValue(rootPropertyValue)){rootPropertyValue=CSS.Hooks.templates[rootProperty][1];}return rootPropertyValue;},/* Extracted the hook's value from its root property's value. This is used to get the starting value of an animating hook. */extractValue:function extractValue(fullHookName,rootPropertyValue){var hookData=CSS.Hooks.registered[fullHookName];if(hookData){var hookRoot=hookData[0],hookPosition=hookData[1];rootPropertyValue=CSS.Hooks.cleanRootPropertyValue(hookRoot,rootPropertyValue);/* Split rootPropertyValue into its constituent hook values then grab the desired hook at its standard position. */return rootPropertyValue.toString().match(CSS.RegEx.valueSplit)[hookPosition];}else{/* If the provided fullHookName isn't a registered hook, return the rootPropertyValue that was passed in. */return rootPropertyValue;}},/* Inject the hook's value into its root property's value. This is used to piece back together the root property
				 once Velocity has updated one of its individually hooked values through tweening. */injectValue:function injectValue(fullHookName,hookValue,rootPropertyValue){var hookData=CSS.Hooks.registered[fullHookName];if(hookData){var hookRoot=hookData[0],hookPosition=hookData[1],rootPropertyValueParts,rootPropertyValueUpdated;rootPropertyValue=CSS.Hooks.cleanRootPropertyValue(hookRoot,rootPropertyValue);/* Split rootPropertyValue into its individual hook values, replace the targeted value with hookValue,
						 then reconstruct the rootPropertyValue string. */rootPropertyValueParts=rootPropertyValue.toString().match(CSS.RegEx.valueSplit);rootPropertyValueParts[hookPosition]=hookValue;rootPropertyValueUpdated=rootPropertyValueParts.join(" ");return rootPropertyValueUpdated;}else{/* If the provided fullHookName isn't a registered hook, return the rootPropertyValue that was passed in. */return rootPropertyValue;}}},/*******************
			 Normalizations
			 *******************//* Normalizations standardize CSS property manipulation by pollyfilling browser-specific implementations (e.g. opacity)
			 and reformatting special properties (e.g. clip, rgba) to look like standard ones. */Normalizations:{/* Normalizations are passed a normalization target (either the property's name, its extracted value, or its injected value),
				 the targeted element (which may need to be queried), and the targeted property value. */registered:{clip:function clip(type,element,propertyValue){switch(type){case"name":return"clip";/* Clip needs to be unwrapped and stripped of its commas during extraction. */case"extract":var extracted;/* If Velocity also extracted this value, skip extraction. */if(CSS.RegEx.wrappedValueAlreadyExtracted.test(propertyValue)){extracted=propertyValue;}else{/* Remove the "rect()" wrapper. */extracted=propertyValue.toString().match(CSS.RegEx.valueUnwrap);/* Strip off commas. */extracted=extracted?extracted[1].replace(/,(\s+)?/g," "):propertyValue;}return extracted;/* Clip needs to be re-wrapped during injection. */case"inject":return"rect("+propertyValue+")";}},blur:function blur(type,element,propertyValue){switch(type){case"name":return Velocity.State.isFirefox?"filter":"-webkit-filter";case"extract":var extracted=parseFloat(propertyValue);/* If extracted is NaN, meaning the value isn't already extracted. */if(!(extracted||extracted===0)){var blurComponent=propertyValue.toString().match(/blur\(([0-9]+[A-z]+)\)/i);/* If the filter string had a blur component, return just the blur value and unit type. */if(blurComponent){extracted=blurComponent[1];/* If the component doesn't exist, default blur to 0. */}else{extracted=0;}}return extracted;/* Blur needs to be re-wrapped during injection. */case"inject":/* For the blur effect to be fully de-applied, it needs to be set to "none" instead of 0. */if(!parseFloat(propertyValue)){return"none";}else{return"blur("+propertyValue+")";}}},/* <=IE8 do not support the standard opacity property. They use filter:alpha(opacity=INT) instead. */opacity:function opacity(type,element,propertyValue){if(IE<=8){switch(type){case"name":return"filter";case"extract":/* <=IE8 return a "filter" value of "alpha(opacity=\d{1,3})".
									 Extract the value and convert it to a decimal value to match the standard CSS opacity property's formatting. */var extracted=propertyValue.toString().match(/alpha\(opacity=(.*)\)/i);if(extracted){/* Convert to decimal value. */propertyValue=extracted[1]/100;}else{/* When extracting opacity, default to 1 since a null value means opacity hasn't been set. */propertyValue=1;}return propertyValue;case"inject":/* Opacified elements are required to have their zoom property set to a non-zero value. */element.style.zoom=1;/* Setting the filter property on elements with certain font property combinations can result in a
									 highly unappealing ultra-bolding effect. There's no way to remedy this throughout a tween, but dropping the
									 value altogether (when opacity hits 1) at leasts ensures that the glitch is gone post-tweening. */if(parseFloat(propertyValue)>=1){return"";}else{/* As per the filter property's spec, convert the decimal value to a whole number and wrap the value. */return"alpha(opacity="+parseInt(parseFloat(propertyValue)*100,10)+")";}}/* With all other browsers, normalization is not required; return the same values that were passed in. */}else{switch(type){case"name":return"opacity";case"extract":return propertyValue;case"inject":return propertyValue;}}}},/*****************************
				 Batched Registrations
				 *****************************//* Note: Batched normalizations extend the CSS.Normalizations.registered object. */register:function register(){/*****************
					 Transforms
					 *****************//* Transforms are the subproperties contained by the CSS "transform" property. Transforms must undergo normalization
					 so that they can be referenced in a properties map by their individual names. *//* Note: When transforms are "set", they are actually assigned to a per-element transformCache. When all transform
					 setting is complete complete, CSS.flushTransformCache() must be manually called to flush the values to the DOM.
					 Transform setting is batched in this way to improve performance: the transform style only needs to be updated
					 once when multiple transform subproperties are being animated simultaneously. *//* Note: IE9 and Android Gingerbread have support for 2D -- but not 3D -- transforms. Since animating unsupported
					 transform properties results in the browser ignoring the *entire* transform string, we prevent these 3D values
					 from being normalized for these browsers so that tweening skips these properties altogether
					 (since it will ignore them as being unsupported by the browser.) */if((!IE||IE>9)&&!Velocity.State.isGingerbread){/* Note: Since the standalone CSS "perspective" property and the CSS transform "perspective" subproperty
						 share the same name, the latter is given a unique token within Velocity: "transformPerspective". */CSS.Lists.transformsBase=CSS.Lists.transformsBase.concat(CSS.Lists.transforms3D);}for(var i=0;i<CSS.Lists.transformsBase.length;i++){/* Wrap the dynamically generated normalization function in a new scope so that transformName's value is
						 paired with its respective function. (Otherwise, all functions would take the final for loop's transformName.) */(function(){var transformName=CSS.Lists.transformsBase[i];CSS.Normalizations.registered[transformName]=function(type,element,propertyValue){switch(type){/* The normalized property name is the parent "transform" property -- the property that is actually set in CSS. */case"name":return"transform";/* Transform values are cached onto a per-element transformCache object. */case"extract":/* If this transform has yet to be assigned a value, return its null value. */if(Data(element)===undefined||Data(element).transformCache[transformName]===undefined){/* Scale CSS.Lists.transformsBase default to 1 whereas all other transform properties default to 0. */return /^scale/i.test(transformName)?1:0;/* When transform values are set, they are wrapped in parentheses as per the CSS spec.
											 Thus, when extracting their values (for tween calculations), we strip off the parentheses. */}return Data(element).transformCache[transformName].replace(/[()]/g,"");case"inject":var invalid=false;/* If an individual transform property contains an unsupported unit type, the browser ignores the *entire* transform property.
										 Thus, protect users from themselves by skipping setting for transform values supplied with invalid unit types. *//* Switch on the base transform type; ignore the axis by removing the last letter from the transform's name. */switch(transformName.substr(0,transformName.length-1)){/* Whitelist unit types for each transform. */case"translate":invalid=!/(%|px|em|rem|vw|vh|\d)$/i.test(propertyValue);break;/* Since an axis-free "scale" property is supported as well, a little hack is used here to detect it by chopping off its last letter. */case"scal":case"scale":/* Chrome on Android has a bug in which scaled elements blur if their initial scale
												 value is below 1 (which can happen with forcefeeding). Thus, we detect a yet-unset scale property
												 and ensure that its first value is always 1. More info: http://stackoverflow.com/questions/10417890/css3-animations-with-transform-causes-blurred-elements-on-webkit/10417962#10417962 */if(Velocity.State.isAndroid&&Data(element).transformCache[transformName]===undefined&&propertyValue<1){propertyValue=1;}invalid=!/(\d)$/i.test(propertyValue);break;case"skew":invalid=!/(deg|\d)$/i.test(propertyValue);break;case"rotate":invalid=!/(deg|\d)$/i.test(propertyValue);break;}if(!invalid){/* As per the CSS spec, wrap the value in parentheses. */Data(element).transformCache[transformName]="("+propertyValue+")";}/* Although the value is set on the transformCache object, return the newly-updated value for the calling code to process as normal. */return Data(element).transformCache[transformName];}};})();}/*************
					 Colors
					 *************//* Since Velocity only animates a single numeric value per property, color animation is achieved by hooking the individual RGBA components of CSS color properties.
					 Accordingly, color values must be normalized (e.g. "#ff0000", "red", and "rgb(255, 0, 0)" ==> "255 0 0 1") so that their components can be injected/extracted by CSS.Hooks logic. */for(var j=0;j<CSS.Lists.colors.length;j++){/* Wrap the dynamically generated normalization function in a new scope so that colorName's value is paired with its respective function.
						 (Otherwise, all functions would take the final for loop's colorName.) */(function(){var colorName=CSS.Lists.colors[j];/* Note: In IE<=8, which support rgb but not rgba, color properties are reverted to rgb by stripping off the alpha component. */CSS.Normalizations.registered[colorName]=function(type,element,propertyValue){switch(type){case"name":return colorName;/* Convert all color values into the rgb format. (Old IE can return hex values and color names instead of rgb/rgba.) */case"extract":var extracted;/* If the color is already in its hookable form (e.g. "255 255 255 1") due to having been previously extracted, skip extraction. */if(CSS.RegEx.wrappedValueAlreadyExtracted.test(propertyValue)){extracted=propertyValue;}else{var converted,colorNames={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/* Convert color names to rgb. */if(/^[A-z]+$/i.test(propertyValue)){if(colorNames[propertyValue]!==undefined){converted=colorNames[propertyValue];}else{/* If an unmatched color name is provided, default to black. */converted=colorNames.black;}/* Convert hex values to rgb. */}else if(CSS.RegEx.isHex.test(propertyValue)){converted="rgb("+CSS.Values.hexToRgb(propertyValue).join(" ")+")";/* If the provided color doesn't match any of the accepted color formats, default to black. */}else if(!/^rgba?\(/i.test(propertyValue)){converted=colorNames.black;}/* Remove the surrounding "rgb/rgba()" string then replace commas with spaces and strip
											 repeated spaces (in case the value included spaces to begin with). */extracted=(converted||propertyValue).toString().match(CSS.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ");}/* So long as this isn't <=IE8, add a fourth (alpha) component if it's missing and default it to 1 (visible). */if((!IE||IE>8)&&extracted.split(" ").length===3){extracted+=" 1";}return extracted;case"inject":/* If we have a pattern then it might already have the right values */if(/^rgb/.test(propertyValue)){return propertyValue;}/* If this is IE<=8 and an alpha component exists, strip it off. */if(IE<=8){if(propertyValue.split(" ").length===4){propertyValue=propertyValue.split(/\s+/).slice(0,3).join(" ");}/* Otherwise, add a fourth (alpha) component if it's missing and default it to 1 (visible). */}else if(propertyValue.split(" ").length===3){propertyValue+=" 1";}/* Re-insert the browser-appropriate wrapper("rgb/rgba()"), insert commas, and strip off decimal units
										 on all values but the fourth (R, G, and B only accept whole numbers). */return(IE<=8?"rgb":"rgba")+"("+propertyValue.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")";}};})();}/**************
					 Dimensions
					 **************/function augmentDimension(name,element,wantInner){var isBorderBox=CSS.getPropertyValue(element,"boxSizing").toString().toLowerCase()==="border-box";if(isBorderBox===(wantInner||false)){/* in box-sizing mode, the CSS width / height accessors already give the outerWidth / outerHeight. */var i,value,augment=0,sides=name==="width"?["Left","Right"]:["Top","Bottom"],fields=["padding"+sides[0],"padding"+sides[1],"border"+sides[0]+"Width","border"+sides[1]+"Width"];for(i=0;i<fields.length;i++){value=parseFloat(CSS.getPropertyValue(element,fields[i]));if(!isNaN(value)){augment+=value;}}return wantInner?-augment:augment;}return 0;}function getDimension(name,wantInner){return function(type,element,propertyValue){switch(type){case"name":return name;case"extract":return parseFloat(propertyValue)+augmentDimension(name,element,wantInner);case"inject":return parseFloat(propertyValue)-augmentDimension(name,element,wantInner)+"px";}};}CSS.Normalizations.registered.innerWidth=getDimension("width",true);CSS.Normalizations.registered.innerHeight=getDimension("height",true);CSS.Normalizations.registered.outerWidth=getDimension("width");CSS.Normalizations.registered.outerHeight=getDimension("height");}},/************************
			 CSS Property Names
			 ************************/Names:{/* Camelcase a property name into its JavaScript notation (e.g. "background-color" ==> "backgroundColor").
				 Camelcasing is used to normalize property names between and across calls. */camelCase:function camelCase(property){return property.replace(/-(\w)/g,function(match,subMatch){return subMatch.toUpperCase();});},/* For SVG elements, some properties (namely, dimensional ones) are GET/SET via the element's HTML attributes (instead of via CSS styles). */SVGAttribute:function SVGAttribute(property){var SVGAttributes="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";/* Certain browsers require an SVG transform to be applied as an attribute. (Otherwise, application via CSS is preferable due to 3D support.) */if(IE||Velocity.State.isAndroid&&!Velocity.State.isChrome){SVGAttributes+="|transform";}return new RegExp("^("+SVGAttributes+")$","i").test(property);},/* Determine whether a property should be set with a vendor prefix. *//* If a prefixed version of the property exists, return it. Otherwise, return the original property name.
				 If the property is not at all supported by the browser, return a false flag. */prefixCheck:function prefixCheck(property){/* If this property has already been checked, return the cached value. */if(Velocity.State.prefixMatches[property]){return[Velocity.State.prefixMatches[property],true];}else{var vendors=["","Webkit","Moz","ms","O"];for(var i=0,vendorsLength=vendors.length;i<vendorsLength;i++){var propertyPrefixed;if(i===0){propertyPrefixed=property;}else{/* Capitalize the first letter of the property to conform to JavaScript vendor prefix notation (e.g. webkitFilter). */propertyPrefixed=vendors[i]+property.replace(/^\w/,function(match){return match.toUpperCase();});}/* Check if the browser supports this property as prefixed. */if(Type.isString(Velocity.State.prefixElement.style[propertyPrefixed])){/* Cache the match. */Velocity.State.prefixMatches[property]=propertyPrefixed;return[propertyPrefixed,true];}}/* If the browser doesn't support this property in any form, include a false flag so that the caller can decide how to proceed. */return[property,false];}}},/************************
			 CSS Property Values
			 ************************/Values:{/* Hex to RGB conversion. Copyright Tim Down: http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb */hexToRgb:function hexToRgb(hex){var shortformRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,longformRegex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgbParts;hex=hex.replace(shortformRegex,function(m,r,g,b){return r+r+g+g+b+b;});rgbParts=longformRegex.exec(hex);return rgbParts?[parseInt(rgbParts[1],16),parseInt(rgbParts[2],16),parseInt(rgbParts[3],16)]:[0,0,0];},isCSSNullValue:function isCSSNullValue(value){/* The browser defaults CSS values that have not been set to either 0 or one of several possible null-value strings.
					 Thus, we check for both falsiness and these special strings. *//* Null-value checking is performed to default the special strings to 0 (for the sake of tweening) or their hook
					 templates as defined as CSS.Hooks (for the sake of hook injection/extraction). *//* Note: Chrome returns "rgba(0, 0, 0, 0)" for an undefined color whereas IE returns "transparent". */return!value||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(value);},/* Retrieve a property's default unit type. Used for assigning a unit type when one is not supplied by the user. */getUnitType:function getUnitType(property){if(/^(rotate|skew)/i.test(property)){return"deg";}else if(/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(property)){/* The above properties are unitless. */return"";}else{/* Default to px for all other properties. */return"px";}},/* HTML elements default to an associated display type when they're not set to display:none. *//* Note: This function is used for correctly setting the non-"none" display value in certain Velocity redirects, such as fadeIn/Out. */getDisplayType:function getDisplayType(element){var tagName=element&&element.tagName.toString().toLowerCase();if(/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(tagName)){return"inline";}else if(/^(li)$/i.test(tagName)){return"list-item";}else if(/^(tr)$/i.test(tagName)){return"table-row";}else if(/^(table)$/i.test(tagName)){return"table";}else if(/^(tbody)$/i.test(tagName)){return"table-row-group";/* Default to "block" when no match is found. */}else{return"block";}},/* The class add/remove functions are used to temporarily apply a "velocity-animating" class to elements while they're animating. */addClass:function addClass(element,className){if(element){if(element.classList){element.classList.add(className);}else if(Type.isString(element.className)){// Element.className is around 15% faster then set/getAttribute
element.className+=(element.className.length?" ":"")+className;}else{// Work around for IE strict mode animating SVG - and anything else that doesn't behave correctly - the same way jQuery does it
var currentClass=element.getAttribute(IE<=7?"className":"class")||"";element.setAttribute("class",currentClass+(currentClass?" ":"")+className);}}},removeClass:function removeClass(element,className){if(element){if(element.classList){element.classList.remove(className);}else if(Type.isString(element.className)){// Element.className is around 15% faster then set/getAttribute
// TODO: Need some jsperf tests on performance - can we get rid of the regex and maybe use split / array manipulation?
element.className=element.className.toString().replace(new RegExp("(^|\\s)"+className.split(" ").join("|")+"(\\s|$)","gi")," ");}else{// Work around for IE strict mode animating SVG - and anything else that doesn't behave correctly - the same way jQuery does it
var currentClass=element.getAttribute(IE<=7?"className":"class")||"";element.setAttribute("class",currentClass.replace(new RegExp("(^|\s)"+className.split(" ").join("|")+"(\s|$)","gi")," "));}}}},/****************************
			 Style Getting & Setting
			 ****************************//* The singular getPropertyValue, which routes the logic for all normalizations, hooks, and standard CSS properties. */getPropertyValue:function getPropertyValue(element,property,rootPropertyValue,forceStyleLookup){/* Get an element's computed property value. *//* Note: Retrieving the value of a CSS property cannot simply be performed by checking an element's
				 style attribute (which only reflects user-defined values). Instead, the browser must be queried for a property's
				 *computed* value. You can read more about getComputedStyle here: https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle */function computePropertyValue(element,property){/* When box-sizing isn't set to border-box, height and width style values are incorrectly computed when an
					 element's scrollbars are visible (which expands the element's dimensions). Thus, we defer to the more accurate
					 offsetHeight/Width property, which includes the total dimensions for interior, border, padding, and scrollbar.
					 We subtract border and padding to get the sum of interior + scrollbar. */var computedValue=0;/* IE<=8 doesn't support window.getComputedStyle, thus we defer to jQuery, which has an extensive array
					 of hacks to accurately retrieve IE8 property values. Re-implementing that logic here is not worth bloating the
					 codebase for a dying browser. The performance repercussions of using jQuery here are minimal since
					 Velocity is optimized to rarely (and sometimes never) query the DOM. Further, the $.css() codepath isn't that slow. */if(IE<=8){computedValue=$.css(element,property);/* GET *//* All other browsers support getComputedStyle. The returned live object reference is cached onto its
						 associated element so that it does not need to be refetched upon every GET. */}else{/* Browsers do not return height and width values for elements that are set to display:"none". Thus, we temporarily
						 toggle display to the element type's default value. */var toggleDisplay=false;if(/^(width|height)$/.test(property)&&CSS.getPropertyValue(element,"display")===0){toggleDisplay=true;CSS.setPropertyValue(element,"display",CSS.Values.getDisplayType(element));}var revertDisplay=function revertDisplay(){if(toggleDisplay){CSS.setPropertyValue(element,"display","none");}};if(!forceStyleLookup){if(property==="height"&&CSS.getPropertyValue(element,"boxSizing").toString().toLowerCase()!=="border-box"){var contentBoxHeight=element.offsetHeight-(parseFloat(CSS.getPropertyValue(element,"borderTopWidth"))||0)-(parseFloat(CSS.getPropertyValue(element,"borderBottomWidth"))||0)-(parseFloat(CSS.getPropertyValue(element,"paddingTop"))||0)-(parseFloat(CSS.getPropertyValue(element,"paddingBottom"))||0);revertDisplay();return contentBoxHeight;}else if(property==="width"&&CSS.getPropertyValue(element,"boxSizing").toString().toLowerCase()!=="border-box"){var contentBoxWidth=element.offsetWidth-(parseFloat(CSS.getPropertyValue(element,"borderLeftWidth"))||0)-(parseFloat(CSS.getPropertyValue(element,"borderRightWidth"))||0)-(parseFloat(CSS.getPropertyValue(element,"paddingLeft"))||0)-(parseFloat(CSS.getPropertyValue(element,"paddingRight"))||0);revertDisplay();return contentBoxWidth;}}var computedStyle;/* For elements that Velocity hasn't been called on directly (e.g. when Velocity queries the DOM on behalf
						 of a parent of an element its animating), perform a direct getComputedStyle lookup since the object isn't cached. */if(Data(element)===undefined){computedStyle=window.getComputedStyle(element,null);/* GET *//* If the computedStyle object has yet to be cached, do so now. */}else if(!Data(element).computedStyle){computedStyle=Data(element).computedStyle=window.getComputedStyle(element,null);/* GET *//* If computedStyle is cached, use it. */}else{computedStyle=Data(element).computedStyle;}/* IE and Firefox do not return a value for the generic borderColor -- they only return individual values for each border side's color.
						 Also, in all browsers, when border colors aren't all the same, a compound value is returned that Velocity isn't setup to parse.
						 So, as a polyfill for querying individual border side colors, we just return the top border's color and animate all borders from that value. */if(property==="borderColor"){property="borderTopColor";}/* IE9 has a bug in which the "filter" property must be accessed from computedStyle using the getPropertyValue method
						 instead of a direct property lookup. The getPropertyValue method is slower than a direct lookup, which is why we avoid it by default. */if(IE===9&&property==="filter"){computedValue=computedStyle.getPropertyValue(property);/* GET */}else{computedValue=computedStyle[property];}/* Fall back to the property's style value (if defined) when computedValue returns nothing,
						 which can happen when the element hasn't been painted. */if(computedValue===""||computedValue===null){computedValue=element.style[property];}revertDisplay();}/* For top, right, bottom, and left (TRBL) values that are set to "auto" on elements of "fixed" or "absolute" position,
					 defer to jQuery for converting "auto" to a numeric value. (For elements with a "static" or "relative" position, "auto" has the same
					 effect as being set to 0, so no conversion is necessary.) *//* An example of why numeric conversion is necessary: When an element with "position:absolute" has an untouched "left"
					 property, which reverts to "auto", left's value is 0 relative to its parent element, but is often non-zero relative
					 to its *containing* (not parent) element, which is the nearest "position:relative" ancestor or the viewport (and always the viewport in the case of "position:fixed"). */if(computedValue==="auto"&&/^(top|right|bottom|left)$/i.test(property)){var position=computePropertyValue(element,"position");/* GET *//* For absolute positioning, jQuery's $.position() only returns values for top and left;
						 right and bottom will have their "auto" value reverted to 0. *//* Note: A jQuery object must be created here since jQuery doesn't have a low-level alias for $.position().
						 Not a big deal since we're currently in a GET batch anyway. */if(position==="fixed"||position==="absolute"&&/top|left/i.test(property)){/* Note: jQuery strips the pixel unit from its returned values; we re-add it here to conform with computePropertyValue's behavior. */computedValue=$(element).position()[property]+"px";/* GET */}}return computedValue;}var propertyValue;/* If this is a hooked property (e.g. "clipLeft" instead of the root property of "clip"),
				 extract the hook's value from a normalized rootPropertyValue using CSS.Hooks.extractValue(). */if(CSS.Hooks.registered[property]){var hook=property,hookRoot=CSS.Hooks.getRoot(hook);/* If a cached rootPropertyValue wasn't passed in (which Velocity always attempts to do in order to avoid requerying the DOM),
					 query the DOM for the root property's value. */if(rootPropertyValue===undefined){/* Since the browser is now being directly queried, use the official post-prefixing property name for this lookup. */rootPropertyValue=CSS.getPropertyValue(element,CSS.Names.prefixCheck(hookRoot)[0]);/* GET */}/* If this root has a normalization registered, peform the associated normalization extraction. */if(CSS.Normalizations.registered[hookRoot]){rootPropertyValue=CSS.Normalizations.registered[hookRoot]("extract",element,rootPropertyValue);}/* Extract the hook's value. */propertyValue=CSS.Hooks.extractValue(hook,rootPropertyValue);/* If this is a normalized property (e.g. "opacity" becomes "filter" in <=IE8) or "translateX" becomes "transform"),
					 normalize the property's name and value, and handle the special case of transforms. *//* Note: Normalizing a property is mutually exclusive from hooking a property since hook-extracted values are strictly
					 numerical and therefore do not require normalization extraction. */}else if(CSS.Normalizations.registered[property]){var normalizedPropertyName,normalizedPropertyValue;normalizedPropertyName=CSS.Normalizations.registered[property]("name",element);/* Transform values are calculated via normalization extraction (see below), which checks against the element's transformCache.
					 At no point do transform GETs ever actually query the DOM; initial stylesheet values are never processed.
					 This is because parsing 3D transform matrices is not always accurate and would bloat our codebase;
					 thus, normalization extraction defaults initial transform values to their zero-values (e.g. 1 for scaleX and 0 for translateX). */if(normalizedPropertyName!=="transform"){normalizedPropertyValue=computePropertyValue(element,CSS.Names.prefixCheck(normalizedPropertyName)[0]);/* GET *//* If the value is a CSS null-value and this property has a hook template, use that zero-value template so that hooks can be extracted from it. */if(CSS.Values.isCSSNullValue(normalizedPropertyValue)&&CSS.Hooks.templates[property]){normalizedPropertyValue=CSS.Hooks.templates[property][1];}}propertyValue=CSS.Normalizations.registered[property]("extract",element,normalizedPropertyValue);}/* If a (numeric) value wasn't produced via hook extraction or normalization, query the DOM. */if(!/^[\d-]/.test(propertyValue)){/* For SVG elements, dimensional properties (which SVGAttribute() detects) are tweened via
					 their HTML attribute values instead of their CSS style values. */var data=Data(element);if(data&&data.isSVG&&CSS.Names.SVGAttribute(property)){/* Since the height/width attribute values must be set manually, they don't reflect computed values.
						 Thus, we use use getBBox() to ensure we always get values for elements with undefined height/width attributes. */if(/^(height|width)$/i.test(property)){/* Firefox throws an error if .getBBox() is called on an SVG that isn't attached to the DOM. */try{propertyValue=element.getBBox()[property];}catch(error){propertyValue=0;}/* Otherwise, access the attribute value directly. */}else{propertyValue=element.getAttribute(property);}}else{propertyValue=computePropertyValue(element,CSS.Names.prefixCheck(property)[0]);/* GET */}}/* Since property lookups are for animation purposes (which entails computing the numeric delta between start and end values),
				 convert CSS null-values to an integer of value 0. */if(CSS.Values.isCSSNullValue(propertyValue)){propertyValue=0;}if(Velocity.debug>=2){console.log("Get "+property+": "+propertyValue);}return propertyValue;},/* The singular setPropertyValue, which routes the logic for all normalizations, hooks, and standard CSS properties. */setPropertyValue:function setPropertyValue(element,property,propertyValue,rootPropertyValue,scrollData){var propertyName=property;/* In order to be subjected to call options and element queueing, scroll animation is routed through Velocity as if it were a standard CSS property. */if(property==="scroll"){/* If a container option is present, scroll the container instead of the browser window. */if(scrollData.container){scrollData.container["scroll"+scrollData.direction]=propertyValue;/* Otherwise, Velocity defaults to scrolling the browser window. */}else{if(scrollData.direction==="Left"){window.scrollTo(propertyValue,scrollData.alternateValue);}else{window.scrollTo(scrollData.alternateValue,propertyValue);}}}else{/* Transforms (translateX, rotateZ, etc.) are applied to a per-element transformCache object, which is manually flushed via flushTransformCache().
					 Thus, for now, we merely cache transforms being SET. */if(CSS.Normalizations.registered[property]&&CSS.Normalizations.registered[property]("name",element)==="transform"){/* Perform a normalization injection. *//* Note: The normalization logic handles the transformCache updating. */CSS.Normalizations.registered[property]("inject",element,propertyValue);propertyName="transform";propertyValue=Data(element).transformCache[property];}else{/* Inject hooks. */if(CSS.Hooks.registered[property]){var hookName=property,hookRoot=CSS.Hooks.getRoot(property);/* If a cached rootPropertyValue was not provided, query the DOM for the hookRoot's current value. */rootPropertyValue=rootPropertyValue||CSS.getPropertyValue(element,hookRoot);/* GET */propertyValue=CSS.Hooks.injectValue(hookName,propertyValue,rootPropertyValue);property=hookRoot;}/* Normalize names and values. */if(CSS.Normalizations.registered[property]){propertyValue=CSS.Normalizations.registered[property]("inject",element,propertyValue);property=CSS.Normalizations.registered[property]("name",element);}/* Assign the appropriate vendor prefix before performing an official style update. */propertyName=CSS.Names.prefixCheck(property)[0];/* A try/catch is used for IE<=8, which throws an error when "invalid" CSS values are set, e.g. a negative width.
						 Try/catch is avoided for other browsers since it incurs a performance overhead. */if(IE<=8){try{element.style[propertyName]=propertyValue;}catch(error){if(Velocity.debug){console.log("Browser does not support ["+propertyValue+"] for ["+propertyName+"]");}}/* SVG elements have their dimensional properties (width, height, x, y, cx, etc.) applied directly as attributes instead of as styles. *//* Note: IE8 does not support SVG elements, so it's okay that we skip it for SVG animation. */}else{var data=Data(element);if(data&&data.isSVG&&CSS.Names.SVGAttribute(property)){/* Note: For SVG attributes, vendor-prefixed property names are never used. *//* Note: Not all CSS properties can be animated via attributes, but the browser won't throw an error for unsupported properties. */element.setAttribute(property,propertyValue);}else{element.style[propertyName]=propertyValue;}}if(Velocity.debug>=2){console.log("Set "+property+" ("+propertyName+"): "+propertyValue);}}}/* Return the normalized property name and value in case the caller wants to know how these values were modified before being applied to the DOM. */return[propertyName,propertyValue];},/* To increase performance by batching transform updates into a single SET, transforms are not directly applied to an element until flushTransformCache() is called. *//* Note: Velocity applies transform properties in the same order that they are chronogically introduced to the element's CSS styles. */flushTransformCache:function flushTransformCache(element){var transformString="",data=Data(element);/* Certain browsers require that SVG transforms be applied as an attribute. However, the SVG transform attribute takes a modified version of CSS's transform string
				 (units are dropped and, except for skewX/Y, subproperties are merged into their master property -- e.g. scaleX and scaleY are merged into scale(X Y). */if((IE||Velocity.State.isAndroid&&!Velocity.State.isChrome)&&data&&data.isSVG){/* Since transform values are stored in their parentheses-wrapped form, we use a helper function to strip out their numeric values.
					 Further, SVG transform properties only take unitless (representing pixels) values, so it's okay that parseFloat() strips the unit suffixed to the float value. */var getTransformFloat=function getTransformFloat(transformProperty){return parseFloat(CSS.getPropertyValue(element,transformProperty));};/* Create an object to organize all the transforms that we'll apply to the SVG element. To keep the logic simple,
					 we process *all* transform properties -- even those that may not be explicitly applied (since they default to their zero-values anyway). */var SVGTransforms={translate:[getTransformFloat("translateX"),getTransformFloat("translateY")],skewX:[getTransformFloat("skewX")],skewY:[getTransformFloat("skewY")],/* If the scale property is set (non-1), use that value for the scaleX and scaleY values
						 (this behavior mimics the result of animating all these properties at once on HTML elements). */scale:getTransformFloat("scale")!==1?[getTransformFloat("scale"),getTransformFloat("scale")]:[getTransformFloat("scaleX"),getTransformFloat("scaleY")],/* Note: SVG's rotate transform takes three values: rotation degrees followed by the X and Y values
						 defining the rotation's origin point. We ignore the origin values (default them to 0). */rotate:[getTransformFloat("rotateZ"),0,0]};/* Iterate through the transform properties in the user-defined property map order.
					 (This mimics the behavior of non-SVG transform animation.) */$.each(Data(element).transformCache,function(transformName){/* Except for with skewX/Y, revert the axis-specific transform subproperties to their axis-free master
						 properties so that they match up with SVG's accepted transform properties. */if(/^translate/i.test(transformName)){transformName="translate";}else if(/^scale/i.test(transformName)){transformName="scale";}else if(/^rotate/i.test(transformName)){transformName="rotate";}/* Check that we haven't yet deleted the property from the SVGTransforms container. */if(SVGTransforms[transformName]){/* Append the transform property in the SVG-supported transform format. As per the spec, surround the space-delimited values in parentheses. */transformString+=transformName+"("+SVGTransforms[transformName].join(" ")+")"+" ";/* After processing an SVG transform property, delete it from the SVGTransforms container so we don't
							 re-insert the same master property if we encounter another one of its axis-specific properties. */delete SVGTransforms[transformName];}});}else{var transformValue,perspective;/* Transform properties are stored as members of the transformCache object. Concatenate all the members into a string. */$.each(Data(element).transformCache,function(transformName){transformValue=Data(element).transformCache[transformName];/* Transform's perspective subproperty must be set first in order to take effect. Store it temporarily. */if(transformName==="transformPerspective"){perspective=transformValue;return true;}/* IE9 only supports one rotation type, rotateZ, which it refers to as "rotate". */if(IE===9&&transformName==="rotateZ"){transformName="rotate";}transformString+=transformName+transformValue+" ";});/* If present, set the perspective subproperty first. */if(perspective){transformString="perspective"+perspective+" "+transformString;}}CSS.setPropertyValue(element,"transform",transformString);}};/* Register hooks and normalizations. */CSS.Hooks.register();CSS.Normalizations.register();/* Allow hook setting in the same fashion as jQuery's $.css(). */Velocity.hook=function(elements,arg2,arg3){var value;elements=sanitizeElements(elements);$.each(elements,function(i,element){/* Initialize Velocity's per-element data cache if this element hasn't previously been animated. */if(Data(element)===undefined){Velocity.init(element);}/* Get property value. If an element set was passed in, only return the value for the first element. */if(arg3===undefined){if(value===undefined){value=CSS.getPropertyValue(element,arg2);}/* Set property value. */}else{/* sPV returns an array of the normalized propertyName/propertyValue pair used to update the DOM. */var adjustedSet=CSS.setPropertyValue(element,arg2,arg3);/* Transform properties don't automatically set. They have to be flushed to the DOM. */if(adjustedSet[0]==="transform"){Velocity.CSS.flushTransformCache(element);}value=adjustedSet;}});return value;};/*****************
		 Animation
		 *****************/var animate=function animate(){var opts;/******************
			 Call Chain
			 ******************//* Logic for determining what to return to the call stack when exiting out of Velocity. */function getChain(){/* If we are using the utility function, attempt to return this call's promise. If no promise library was detected,
				 default to null instead of returning the targeted elements so that utility function's return value is standardized. */if(isUtility){return promiseData.promise||null;/* Otherwise, if we're using $.fn, return the jQuery-/Zepto-wrapped element set. */}else{return elementsWrapped;}}/*************************
			 Arguments Assignment
			 *************************//* To allow for expressive CoffeeScript code, Velocity supports an alternative syntax in which "elements" (or "e"), "properties" (or "p"), and "options" (or "o")
			 objects are defined on a container object that's passed in as Velocity's sole argument. *//* Note: Some browsers automatically populate arguments with a "properties" object. We detect it by checking for its default "names" property. */var syntacticSugar=arguments[0]&&(arguments[0].p||$.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||Type.isString(arguments[0].properties)),/* Whether Velocity was called via the utility function (as opposed to on a jQuery/Zepto object). */isUtility,/* When Velocity is called via the utility function ($.Velocity()/Velocity()), elements are explicitly
					 passed in as the first parameter. Thus, argument positioning varies. We normalize them here. */elementsWrapped,argumentIndex;var elements,propertiesMap,options;/* Detect jQuery/Zepto elements being animated via the $.fn method. */if(Type.isWrapped(this)){isUtility=false;argumentIndex=0;elements=this;elementsWrapped=this;/* Otherwise, raw elements are being animated via the utility function. */}else{isUtility=true;argumentIndex=1;elements=syntacticSugar?arguments[0].elements||arguments[0].e:arguments[0];}/***************
			 Promises
			 ***************/var promiseData={promise:null,resolver:null,rejecter:null};/* If this call was made via the utility function (which is the default method of invocation when jQuery/Zepto are not being used), and if
			 promise support was detected, create a promise object for this call and store references to its resolver and rejecter methods. The resolve
			 method is used when a call completes naturally or is prematurely stopped by the user. In both cases, completeCall() handles the associated
			 call cleanup and promise resolving logic. The reject method is used when an invalid set of arguments is passed into a Velocity call. *//* Note: Velocity employs a call-based queueing architecture, which means that stopping an animating element actually stops the full call that
			 triggered it -- not that one element exclusively. Similarly, there is one promise per call, and all elements targeted by a Velocity call are
			 grouped together for the purposes of resolving and rejecting a promise. */if(isUtility&&Velocity.Promise){promiseData.promise=new Velocity.Promise(function(resolve,reject){promiseData.resolver=resolve;promiseData.rejecter=reject;});}if(syntacticSugar){propertiesMap=arguments[0].properties||arguments[0].p;options=arguments[0].options||arguments[0].o;}else{propertiesMap=arguments[argumentIndex];options=arguments[argumentIndex+1];}elements=sanitizeElements(elements);if(!elements){if(promiseData.promise){if(!propertiesMap||!options||options.promiseRejectEmpty!==false){promiseData.rejecter();}else{promiseData.resolver();}}return;}/* The length of the element set (in the form of a nodeList or an array of elements) is defaulted to 1 in case a
			 single raw DOM element is passed in (which doesn't contain a length property). */var elementsLength=elements.length,elementsIndex=0;/***************************
			 Argument Overloading
			 ***************************//* Support is included for jQuery's argument overloading: $.animate(propertyMap [, duration] [, easing] [, complete]).
			 Overloading is detected by checking for the absence of an object being passed into options. *//* Note: The stop/finish/pause/resume actions do not accept animation options, and are therefore excluded from this check. */if(!/^(stop|finish|finishAll|pause|resume)$/i.test(propertiesMap)&&!$.isPlainObject(options)){/* The utility function shifts all arguments one position to the right, so we adjust for that offset. */var startingArgumentPosition=argumentIndex+1;options={};/* Iterate through all options arguments */for(var i=startingArgumentPosition;i<arguments.length;i++){/* Treat a number as a duration. Parse it out. *//* Note: The following RegEx will return true if passed an array with a number as its first item.
					 Thus, arrays are skipped from this check. */if(!Type.isArray(arguments[i])&&(/^(fast|normal|slow)$/i.test(arguments[i])||/^\d/.test(arguments[i]))){options.duration=arguments[i];/* Treat strings and arrays as easings. */}else if(Type.isString(arguments[i])||Type.isArray(arguments[i])){options.easing=arguments[i];/* Treat a function as a complete callback. */}else if(Type.isFunction(arguments[i])){options.complete=arguments[i];}}}/*********************
			 Action Detection
			 *********************//* Velocity's behavior is categorized into "actions": Elements can either be specially scrolled into view,
			 or they can be started, stopped, paused, resumed, or reversed . If a literal or referenced properties map is passed in as Velocity's
			 first argument, the associated action is "start". Alternatively, "scroll", "reverse", "pause", "resume" or "stop" can be passed in 
			 instead of a properties map. */var action;switch(propertiesMap){case"scroll":action="scroll";break;case"reverse":action="reverse";break;case"pause":/*******************
					 Action: Pause
					 *******************/var currentTime=new Date().getTime();/* Handle delay timers */$.each(elements,function(i,element){pauseDelayOnElement(element,currentTime);});/* Pause and Resume are call-wide (not on a per element basis). Thus, calling pause or resume on a 
					 single element will cause any calls that containt tweens for that element to be paused/resumed
					 as well. *//* Iterate through all calls and pause any that contain any of our elements */$.each(Velocity.State.calls,function(i,activeCall){var found=false;/* Inactive calls are set to false by the logic inside completeCall(). Skip them. */if(activeCall){/* Iterate through the active call's targeted elements. */$.each(activeCall[1],function(k,activeElement){var queueName=options===undefined?"":options;if(queueName!==true&&activeCall[2].queue!==queueName&&!(options===undefined&&activeCall[2].queue===false)){return true;}/* Iterate through the calls targeted by the stop command. */$.each(elements,function(l,element){/* Check that this call was applied to the target element. */if(element===activeElement){/* Set call to paused */activeCall[5]={resume:false};/* Once we match an element, we can bounce out to the next call entirely */found=true;return false;}});/* Proceed to check next call if we have already matched */if(found){return false;}});}});/* Since pause creates no new tweens, exit out of Velocity. */return getChain();case"resume":/*******************
					 Action: Resume
					 *******************//* Handle delay timers */$.each(elements,function(i,element){resumeDelayOnElement(element,currentTime);});/* Pause and Resume are call-wide (not on a per elemnt basis). Thus, calling pause or resume on a 
					 single element will cause any calls that containt tweens for that element to be paused/resumed
					 as well. *//* Iterate through all calls and pause any that contain any of our elements */$.each(Velocity.State.calls,function(i,activeCall){var found=false;/* Inactive calls are set to false by the logic inside completeCall(). Skip them. */if(activeCall){/* Iterate through the active call's targeted elements. */$.each(activeCall[1],function(k,activeElement){var queueName=options===undefined?"":options;if(queueName!==true&&activeCall[2].queue!==queueName&&!(options===undefined&&activeCall[2].queue===false)){return true;}/* Skip any calls that have never been paused */if(!activeCall[5]){return true;}/* Iterate through the calls targeted by the stop command. */$.each(elements,function(l,element){/* Check that this call was applied to the target element. */if(element===activeElement){/* Flag a pause object to be resumed, which will occur during the next tick. In
										 addition, the pause object will at that time be deleted */activeCall[5].resume=true;/* Once we match an element, we can bounce out to the next call entirely */found=true;return false;}});/* Proceed to check next call if we have already matched */if(found){return false;}});}});/* Since resume creates no new tweens, exit out of Velocity. */return getChain();case"finish":case"finishAll":case"stop":/*******************
					 Action: Stop
					 *******************//* Clear the currently-active delay on each targeted element. */$.each(elements,function(i,element){if(Data(element)&&Data(element).delayTimer){/* Stop the timer from triggering its cached next() function. */clearTimeout(Data(element).delayTimer.setTimeout);/* Manually call the next() function so that the subsequent queue items can progress. */if(Data(element).delayTimer.next){Data(element).delayTimer.next();}delete Data(element).delayTimer;}/* If we want to finish everything in the queue, we have to iterate through it
						 and call each function. This will make them active calls below, which will
						 cause them to be applied via the duration setting. */if(propertiesMap==="finishAll"&&(options===true||Type.isString(options))){/* Iterate through the items in the element's queue. */$.each($.queue(element,Type.isString(options)?options:""),function(_,item){/* The queue array can contain an "inprogress" string, which we skip. */if(Type.isFunction(item)){item();}});/* Clearing the $.queue() array is achieved by resetting it to []. */$.queue(element,Type.isString(options)?options:"",[]);}});var callsToStop=[];/* When the stop action is triggered, the elements' currently active call is immediately stopped. The active call might have
					 been applied to multiple elements, in which case all of the call's elements will be stopped. When an element
					 is stopped, the next item in its animation queue is immediately triggered. *//* An additional argument may be passed in to clear an element's remaining queued calls. Either true (which defaults to the "fx" queue)
					 or a custom queue string can be passed in. *//* Note: The stop command runs prior to Velocity's Queueing phase since its behavior is intended to take effect *immediately*,
					 regardless of the element's current queue state. *//* Iterate through every active call. */$.each(Velocity.State.calls,function(i,activeCall){/* Inactive calls are set to false by the logic inside completeCall(). Skip them. */if(activeCall){/* Iterate through the active call's targeted elements. */$.each(activeCall[1],function(k,activeElement){/* If true was passed in as a secondary argument, clear absolutely all calls on this element. Otherwise, only
								 clear calls associated with the relevant queue. *//* Call stopping logic works as follows:
								 - options === true --> stop current default queue calls (and queue:false calls), including remaining queued ones.
								 - options === undefined --> stop current queue:"" call and all queue:false calls.
								 - options === false --> stop only queue:false calls.
								 - options === "custom" --> stop current queue:"custom" call, including remaining queued ones (there is no functionality to only clear the currently-running queue:"custom" call). */var queueName=options===undefined?"":options;if(queueName!==true&&activeCall[2].queue!==queueName&&!(options===undefined&&activeCall[2].queue===false)){return true;}/* Iterate through the calls targeted by the stop command. */$.each(elements,function(l,element){/* Check that this call was applied to the target element. */if(element===activeElement){/* Optionally clear the remaining queued calls. If we're doing "finishAll" this won't find anything,
										 due to the queue-clearing above. */if(options===true||Type.isString(options)){/* Iterate through the items in the element's queue. */$.each($.queue(element,Type.isString(options)?options:""),function(_,item){/* The queue array can contain an "inprogress" string, which we skip. */if(Type.isFunction(item)){/* Pass the item's callback a flag indicating that we want to abort from the queue call.
													 (Specifically, the queue will resolve the call's associated promise then abort.)  */item(null,true);}});/* Clearing the $.queue() array is achieved by resetting it to []. */$.queue(element,Type.isString(options)?options:"",[]);}if(propertiesMap==="stop"){/* Since "reverse" uses cached start values (the previous call's endValues), these values must be
											 changed to reflect the final value that the elements were actually tweened to. *//* Note: If only queue:false animations are currently running on an element, it won't have a tweensContainer
											 object. Also, queue:false animations can't be reversed. */var data=Data(element);if(data&&data.tweensContainer&&queueName!==false){$.each(data.tweensContainer,function(m,activeTween){activeTween.endValue=activeTween.currentValue;});}callsToStop.push(i);}else if(propertiesMap==="finish"||propertiesMap==="finishAll"){/* To get active tweens to finish immediately, we forcefully shorten their durations to 1ms so that
											 they finish upon the next rAf tick then proceed with normal call completion logic. */activeCall[2].duration=1;}}});});}});/* Prematurely call completeCall() on each matched active call. Pass an additional flag for "stop" to indicate
					 that the complete callback and display:none setting should be skipped since we're completing prematurely. */if(propertiesMap==="stop"){$.each(callsToStop,function(i,j){completeCall(j,true);});if(promiseData.promise){/* Immediately resolve the promise associated with this stop call since stop runs synchronously. */promiseData.resolver(elements);}}/* Since we're stopping, and not proceeding with queueing, exit out of Velocity. */return getChain();default:/* Treat a non-empty plain object as a literal properties map. */if($.isPlainObject(propertiesMap)&&!Type.isEmptyObject(propertiesMap)){action="start";/****************
						 Redirects
						 ****************//* Check if a string matches a registered redirect (see Redirects above). */}else if(Type.isString(propertiesMap)&&Velocity.Redirects[propertiesMap]){opts=$.extend({},options);var durationOriginal=opts.duration,delayOriginal=opts.delay||0;/* If the backwards option was passed in, reverse the element set so that elements animate from the last to the first. */if(opts.backwards===true){elements=$.extend(true,[],elements).reverse();}/* Individually trigger the redirect for each element in the set to prevent users from having to handle iteration logic in their redirect. */$.each(elements,function(elementIndex,element){/* If the stagger option was passed in, successively delay each element by the stagger value (in ms). Retain the original delay value. */if(parseFloat(opts.stagger)){opts.delay=delayOriginal+parseFloat(opts.stagger)*elementIndex;}else if(Type.isFunction(opts.stagger)){opts.delay=delayOriginal+opts.stagger.call(element,elementIndex,elementsLength);}/* If the drag option was passed in, successively increase/decrease (depending on the presense of opts.backwards)
							 the duration of each element's animation, using floors to prevent producing very short durations. */if(opts.drag){/* Default the duration of UI pack effects (callouts and transitions) to 1000ms instead of the usual default duration of 400ms. */opts.duration=parseFloat(durationOriginal)||(/^(callout|transition)/.test(propertiesMap)?1000:DURATION_DEFAULT);/* For each element, take the greater duration of: A) animation completion percentage relative to the original duration,
								 B) 75% of the original duration, or C) a 200ms fallback (in case duration is already set to a low value).
								 The end result is a baseline of 75% of the redirect's duration that increases/decreases as the end of the element set is approached. */opts.duration=Math.max(opts.duration*(opts.backwards?1-elementIndex/elementsLength:(elementIndex+1)/elementsLength),opts.duration*0.75,200);}/* Pass in the call's opts object so that the redirect can optionally extend it. It defaults to an empty object instead of null to
							 reduce the opts checking logic required inside the redirect. */Velocity.Redirects[propertiesMap].call(element,element,opts||{},elementIndex,elementsLength,elements,promiseData.promise?promiseData:undefined);});/* Since the animation logic resides within the redirect's own code, abort the remainder of this call.
						 (The performance overhead up to this point is virtually non-existant.) *//* Note: The jQuery call chain is kept intact by returning the complete element set. */return getChain();}else{var abortError="Velocity: First argument ("+propertiesMap+") was not a property map, a known action, or a registered redirect. Aborting.";if(promiseData.promise){promiseData.rejecter(new Error(abortError));}else if(window.console){console.log(abortError);}return getChain();}}/**************************
			 Call-Wide Variables
			 **************************//* A container for CSS unit conversion ratios (e.g. %, rem, and em ==> px) that is used to cache ratios across all elements
			 being animated in a single Velocity call. Calculating unit ratios necessitates DOM querying and updating, and is therefore
			 avoided (via caching) wherever possible. This container is call-wide instead of page-wide to avoid the risk of using stale
			 conversion metrics across Velocity animations that are not immediately consecutively chained. */var callUnitConversionData={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null};/* A container for all the ensuing tween data and metadata associated with this call. This container gets pushed to the page-wide
			 Velocity.State.calls array that is processed during animation ticking. */var call=[];/************************
			 Element Processing
			 ************************//* Element processing consists of three parts -- data processing that cannot go stale and data processing that *can* go stale (i.e. third-party style modifications):
			 1) Pre-Queueing: Element-wide variables, including the element's data storage, are instantiated. Call options are prepared. If triggered, the Stop action is executed.
			 2) Queueing: The logic that runs once this call has reached its point of execution in the element's $.queue() stack. Most logic is placed here to avoid risking it becoming stale.
			 3) Pushing: Consolidation of the tween data followed by its push onto the global in-progress calls container.
			 `elementArrayIndex` allows passing index of the element in the original array to value functions.
			 If `elementsIndex` were used instead the index would be determined by the elements' per-element queue.
			 */function processElement(element,elementArrayIndex){/*************************
				 Part I: Pre-Queueing
				 *************************//***************************
				 Element-Wide Variables
				 ***************************/var/* The runtime opts object is the extension of the current call's options and Velocity's page-wide option defaults. */opts=$.extend({},Velocity.defaults,options),/* A container for the processed data associated with each property in the propertyMap.
						 (Each property in the map produces its own "tween".) */tweensContainer={},elementUnitConversionData;/******************
				 Element Init
				 ******************/if(Data(element)===undefined){Velocity.init(element);}/******************
				 Option: Delay
				 ******************//* Since queue:false doesn't respect the item's existing queue, we avoid injecting its delay here (it's set later on). *//* Note: Velocity rolls its own delay function since jQuery doesn't have a utility alias for $.fn.delay()
				 (and thus requires jQuery element creation, which we avoid since its overhead includes DOM querying). */if(parseFloat(opts.delay)&&opts.queue!==false){$.queue(element,opts.queue,function(next,clearQueue){if(clearQueue===true){/* Do not continue with animation queueing. */return true;}/* This is a flag used to indicate to the upcoming completeCall() function that this queue entry was initiated by Velocity. See completeCall() for further details. */Velocity.velocityQueueEntryFlag=true;/* The ensuing queue item (which is assigned to the "next" argument that $.queue() automatically passes in) will be triggered after a setTimeout delay.
						 The setTimeout is stored so that it can be subjected to clearTimeout() if this animation is prematurely stopped via Velocity's "stop" command, and
						 delayBegin/delayTime is used to ensure we can "pause" and "resume" a tween that is still mid-delay. *//* Temporarily store delayed elements to facilite access for global pause/resume */var callIndex=Velocity.State.delayedElements.count++;Velocity.State.delayedElements[callIndex]=element;var delayComplete=function(index){return function(){/* Clear the temporary element */Velocity.State.delayedElements[index]=false;/* Finally, issue the call */next();};}(callIndex);Data(element).delayBegin=new Date().getTime();Data(element).delay=parseFloat(opts.delay);Data(element).delayTimer={setTimeout:setTimeout(next,parseFloat(opts.delay)),next:delayComplete};});}/*********************
				 Option: Duration
				 *********************//* Support for jQuery's named durations. */switch(opts.duration.toString().toLowerCase()){case"fast":opts.duration=200;break;case"normal":opts.duration=DURATION_DEFAULT;break;case"slow":opts.duration=600;break;default:/* Remove the potential "ms" suffix and default to 1 if the user is attempting to set a duration of 0 (in order to produce an immediate style change). */opts.duration=parseFloat(opts.duration)||1;}/************************
				 Global Option: Mock
				 ************************/if(Velocity.mock!==false){/* In mock mode, all animations are forced to 1ms so that they occur immediately upon the next rAF tick.
					 Alternatively, a multiplier can be passed in to time remap all delays and durations. */if(Velocity.mock===true){opts.duration=opts.delay=1;}else{opts.duration*=parseFloat(Velocity.mock)||1;opts.delay*=parseFloat(Velocity.mock)||1;}}/*******************
				 Option: Easing
				 *******************/opts.easing=getEasing(opts.easing,opts.duration);/**********************
				 Option: Callbacks
				 **********************//* Callbacks must functions. Otherwise, default to null. */if(opts.begin&&!Type.isFunction(opts.begin)){opts.begin=null;}if(opts.progress&&!Type.isFunction(opts.progress)){opts.progress=null;}if(opts.complete&&!Type.isFunction(opts.complete)){opts.complete=null;}/*********************************
				 Option: Display & Visibility
				 *********************************//* Refer to Velocity's documentation (VelocityJS.org/#displayAndVisibility) for a description of the display and visibility options' behavior. *//* Note: We strictly check for undefined instead of falsiness because display accepts an empty string value. */if(opts.display!==undefined&&opts.display!==null){opts.display=opts.display.toString().toLowerCase();/* Users can pass in a special "auto" value to instruct Velocity to set the element to its default display value. */if(opts.display==="auto"){opts.display=Velocity.CSS.Values.getDisplayType(element);}}if(opts.visibility!==undefined&&opts.visibility!==null){opts.visibility=opts.visibility.toString().toLowerCase();}/**********************
				 Option: mobileHA
				 **********************//* When set to true, and if this is a mobile device, mobileHA automatically enables hardware acceleration (via a null transform hack)
				 on animating elements. HA is removed from the element at the completion of its animation. *//* Note: Android Gingerbread doesn't support HA. If a null transform hack (mobileHA) is in fact set, it will prevent other tranform subproperties from taking effect. *//* Note: You can read more about the use of mobileHA in Velocity's documentation: VelocityJS.org/#mobileHA. */opts.mobileHA=opts.mobileHA&&Velocity.State.isMobile&&!Velocity.State.isGingerbread;/***********************
				 Part II: Queueing
				 ***********************//* When a set of elements is targeted by a Velocity call, the set is broken up and each element has the current Velocity call individually queued onto it.
				 In this way, each element's existing queue is respected; some elements may already be animating and accordingly should not have this current Velocity call triggered immediately. *//* In each queue, tween data is processed for each animating property then pushed onto the call-wide calls array. When the last element in the set has had its tweens processed,
				 the call array is pushed to Velocity.State.calls for live processing by the requestAnimationFrame tick. */function buildQueue(next){var data,lastTweensContainer;/*******************
					 Option: Begin
					 *******************//* The begin callback is fired once per call -- not once per elemenet -- and is passed the full raw DOM element set as both its context and its first argument. */if(opts.begin&&elementsIndex===0){/* We throw callbacks in a setTimeout so that thrown errors don't halt the execution of Velocity itself. */try{opts.begin.call(elements,elements);}catch(error){setTimeout(function(){throw error;},1);}}/*****************************************
					 Tween Data Construction (for Scroll)
					 *****************************************//* Note: In order to be subjected to chaining and animation options, scroll's tweening is routed through Velocity as if it were a standard CSS property animation. */if(action==="scroll"){/* The scroll action uniquely takes an optional "offset" option -- specified in pixels -- that offsets the targeted scroll position. */var scrollDirection=/^x$/i.test(opts.axis)?"Left":"Top",scrollOffset=parseFloat(opts.offset)||0,scrollPositionCurrent,scrollPositionCurrentAlternate,scrollPositionEnd;/* Scroll also uniquely takes an optional "container" option, which indicates the parent element that should be scrolled --
						 as opposed to the browser window itself. This is useful for scrolling toward an element that's inside an overflowing parent element. */if(opts.container){/* Ensure that either a jQuery object or a raw DOM element was passed in. */if(Type.isWrapped(opts.container)||Type.isNode(opts.container)){/* Extract the raw DOM element from the jQuery wrapper. */opts.container=opts.container[0]||opts.container;/* Note: Unlike other properties in Velocity, the browser's scroll position is never cached since it so frequently changes
								 (due to the user's natural interaction with the page). */scrollPositionCurrent=opts.container["scroll"+scrollDirection];/* GET *//* $.position() values are relative to the container's currently viewable area (without taking into account the container's true dimensions
								 -- say, for example, if the container was not overflowing). Thus, the scroll end value is the sum of the child element's position *and*
								 the scroll container's current scroll position. */scrollPositionEnd=scrollPositionCurrent+$(element).position()[scrollDirection.toLowerCase()]+scrollOffset;/* GET *//* If a value other than a jQuery object or a raw DOM element was passed in, default to null so that this option is ignored. */}else{opts.container=null;}}else{/* If the window itself is being scrolled -- not a containing element -- perform a live scroll position lookup using
							 the appropriate cached property names (which differ based on browser type). */scrollPositionCurrent=Velocity.State.scrollAnchor[Velocity.State["scrollProperty"+scrollDirection]];/* GET *//* When scrolling the browser window, cache the alternate axis's current value since window.scrollTo() doesn't let us change only one value at a time. */scrollPositionCurrentAlternate=Velocity.State.scrollAnchor[Velocity.State["scrollProperty"+(scrollDirection==="Left"?"Top":"Left")]];/* GET *//* Unlike $.position(), $.offset() values are relative to the browser window's true dimensions -- not merely its currently viewable area --
							 and therefore end values do not need to be compounded onto current values. */scrollPositionEnd=$(element).offset()[scrollDirection.toLowerCase()]+scrollOffset;/* GET */}/* Since there's only one format that scroll's associated tweensContainer can take, we create it manually. */tweensContainer={scroll:{rootPropertyValue:false,startValue:scrollPositionCurrent,currentValue:scrollPositionCurrent,endValue:scrollPositionEnd,unitType:"",easing:opts.easing,scrollData:{container:opts.container,direction:scrollDirection,alternateValue:scrollPositionCurrentAlternate}},element:element};if(Velocity.debug){console.log("tweensContainer (scroll): ",tweensContainer.scroll,element);}/******************************************
						 Tween Data Construction (for Reverse)
						 ******************************************//* Reverse acts like a "start" action in that a property map is animated toward. The only difference is
						 that the property map used for reverse is the inverse of the map used in the previous call. Thus, we manipulate
						 the previous call to construct our new map: use the previous map's end values as our new map's start values. Copy over all other data. *//* Note: Reverse can be directly called via the "reverse" parameter, or it can be indirectly triggered via the loop option. (Loops are composed of multiple reverses.) *//* Note: Reverse calls do not need to be consecutively chained onto a currently-animating element in order to operate on cached values;
						 there is no harm to reverse being called on a potentially stale data cache since reverse's behavior is simply defined
						 as reverting to the element's values as they were prior to the previous *Velocity* call. */}else if(action==="reverse"){data=Data(element);/* Abort if there is no prior animation data to reverse to. */if(!data){return;}if(!data.tweensContainer){/* Dequeue the element so that this queue entry releases itself immediately, allowing subsequent queue entries to run. */$.dequeue(element,opts.queue);return;}else{/*********************
							 Options Parsing
							 *********************//* If the element was hidden via the display option in the previous call,
							 revert display to "auto" prior to reversal so that the element is visible again. */if(data.opts.display==="none"){data.opts.display="auto";}if(data.opts.visibility==="hidden"){data.opts.visibility="visible";}/* If the loop option was set in the previous call, disable it so that "reverse" calls aren't recursively generated.
							 Further, remove the previous call's callback options; typically, users do not want these to be refired. */data.opts.loop=false;data.opts.begin=null;data.opts.complete=null;/* Since we're extending an opts object that has already been extended with the defaults options object,
							 we remove non-explicitly-defined properties that are auto-assigned values. */if(!options.easing){delete opts.easing;}if(!options.duration){delete opts.duration;}/* The opts object used for reversal is an extension of the options object optionally passed into this
							 reverse call plus the options used in the previous Velocity call. */opts=$.extend({},data.opts,opts);/*************************************
							 Tweens Container Reconstruction
							 *************************************//* Create a deepy copy (indicated via the true flag) of the previous call's tweensContainer. */lastTweensContainer=$.extend(true,{},data?data.tweensContainer:null);/* Manipulate the previous tweensContainer by replacing its end values and currentValues with its start values. */for(var lastTween in lastTweensContainer){/* In addition to tween data, tweensContainers contain an element property that we ignore here. */if(lastTweensContainer.hasOwnProperty(lastTween)&&lastTween!=="element"){var lastStartValue=lastTweensContainer[lastTween].startValue;lastTweensContainer[lastTween].startValue=lastTweensContainer[lastTween].currentValue=lastTweensContainer[lastTween].endValue;lastTweensContainer[lastTween].endValue=lastStartValue;/* Easing is the only option that embeds into the individual tween data (since it can be defined on a per-property basis).
									 Accordingly, every property's easing value must be updated when an options object is passed in with a reverse call.
									 The side effect of this extensibility is that all per-property easing values are forcefully reset to the new value. */if(!Type.isEmptyObject(options)){lastTweensContainer[lastTween].easing=opts.easing;}if(Velocity.debug){console.log("reverse tweensContainer ("+lastTween+"): "+JSON.stringify(lastTweensContainer[lastTween]),element);}}}tweensContainer=lastTweensContainer;}/*****************************************
						 Tween Data Construction (for Start)
						 *****************************************/}else if(action==="start"){/*************************
						 Value Transferring
						 *************************//* If this queue entry follows a previous Velocity-initiated queue entry *and* if this entry was created
						 while the element was in the process of being animated by Velocity, then this current call is safe to use
						 the end values from the prior call as its start values. Velocity attempts to perform this value transfer
						 process whenever possible in order to avoid requerying the DOM. *//* If values aren't transferred from a prior call and start values were not forcefed by the user (more on this below),
						 then the DOM is queried for the element's current values as a last resort. *//* Note: Conversely, animation reversal (and looping) *always* perform inter-call value transfers; they never requery the DOM. */data=Data(element);/* The per-element isAnimating flag is used to indicate whether it's safe (i.e. the data isn't stale)
						 to transfer over end values to use as start values. If it's set to true and there is a previous
						 Velocity call to pull values from, do so. */if(data&&data.tweensContainer&&data.isAnimating===true){lastTweensContainer=data.tweensContainer;}/***************************
						 Tween Data Calculation
						 ***************************//* This function parses property data and defaults endValue, easing, and startValue as appropriate. *//* Property map values can either take the form of 1) a single value representing the end value,
						 or 2) an array in the form of [ endValue, [, easing] [, startValue] ].
						 The optional third parameter is a forcefed startValue to be used instead of querying the DOM for
						 the element's current value. Read Velocity's docmentation to learn more about forcefeeding: VelocityJS.org/#forcefeeding */var parsePropertyValue=function parsePropertyValue(valueData,skipResolvingEasing){var endValue,easing,startValue;/* If we have a function as the main argument then resolve it first, in case it returns an array that needs to be split */if(Type.isFunction(valueData)){valueData=valueData.call(element,elementArrayIndex,elementsLength);}/* Handle the array format, which can be structured as one of three potential overloads:
							 A) [ endValue, easing, startValue ], B) [ endValue, easing ], or C) [ endValue, startValue ] */if(Type.isArray(valueData)){/* endValue is always the first item in the array. Don't bother validating endValue's value now
								 since the ensuing property cycling logic does that. */endValue=valueData[0];/* Two-item array format: If the second item is a number, function, or hex string, treat it as a
								 start value since easings can only be non-hex strings or arrays. */if(!Type.isArray(valueData[1])&&/^[\d-]/.test(valueData[1])||Type.isFunction(valueData[1])||CSS.RegEx.isHex.test(valueData[1])){startValue=valueData[1];/* Two or three-item array: If the second item is a non-hex string easing name or an array, treat it as an easing. */}else if(Type.isString(valueData[1])&&!CSS.RegEx.isHex.test(valueData[1])&&Velocity.Easings[valueData[1]]||Type.isArray(valueData[1])){easing=skipResolvingEasing?valueData[1]:getEasing(valueData[1],opts.duration);/* Don't bother validating startValue's value now since the ensuing property cycling logic inherently does that. */startValue=valueData[2];}else{startValue=valueData[1]||valueData[2];}/* Handle the single-value format. */}else{endValue=valueData;}/* Default to the call's easing if a per-property easing type was not defined. */if(!skipResolvingEasing){easing=easing||opts.easing;}/* If functions were passed in as values, pass the function the current element as its context,
							 plus the element's index and the element set's size as arguments. Then, assign the returned value. */if(Type.isFunction(endValue)){endValue=endValue.call(element,elementArrayIndex,elementsLength);}if(Type.isFunction(startValue)){startValue=startValue.call(element,elementArrayIndex,elementsLength);}/* Allow startValue to be left as undefined to indicate to the ensuing code that its value was not forcefed. */return[endValue||0,easing,startValue];};var fixPropertyValue=function fixPropertyValue(property,valueData){/* In case this property is a hook, there are circumstances where we will intend to work on the hook's root property and not the hooked subproperty. */var rootProperty=CSS.Hooks.getRoot(property),rootPropertyValue=false,/* Parse out endValue, easing, and startValue from the property's data. */endValue=valueData[0],easing=valueData[1],startValue=valueData[2],pattern;/**************************
							 Start Value Sourcing
							 **************************//* Other than for the dummy tween property, properties that are not supported by the browser (and do not have an associated normalization) will
							 inherently produce no style changes when set, so they are skipped in order to decrease animation tick overhead.
							 Property support is determined via prefixCheck(), which returns a false flag when no supported is detected. *//* Note: Since SVG elements have some of their properties directly applied as HTML attributes,
							 there is no way to check for their explicit browser support, and so we skip skip this check for them. */if((!data||!data.isSVG)&&rootProperty!=="tween"&&CSS.Names.prefixCheck(rootProperty)[1]===false&&CSS.Normalizations.registered[rootProperty]===undefined){if(Velocity.debug){console.log("Skipping ["+rootProperty+"] due to a lack of browser support.");}return;}/* If the display option is being set to a non-"none" (e.g. "block") and opacity (filter on IE<=8) is being
							 animated to an endValue of non-zero, the user's intention is to fade in from invisible, thus we forcefeed opacity
							 a startValue of 0 if its startValue hasn't already been sourced by value transferring or prior forcefeeding. */if((opts.display!==undefined&&opts.display!==null&&opts.display!=="none"||opts.visibility!==undefined&&opts.visibility!=="hidden")&&/opacity|filter/.test(property)&&!startValue&&endValue!==0){startValue=0;}/* If values have been transferred from the previous Velocity call, extract the endValue and rootPropertyValue
							 for all of the current call's properties that were *also* animated in the previous call. *//* Note: Value transferring can optionally be disabled by the user via the _cacheValues option. */if(opts._cacheValues&&lastTweensContainer&&lastTweensContainer[property]){if(startValue===undefined){startValue=lastTweensContainer[property].endValue+lastTweensContainer[property].unitType;}/* The previous call's rootPropertyValue is extracted from the element's data cache since that's the
								 instance of rootPropertyValue that gets freshly updated by the tweening process, whereas the rootPropertyValue
								 attached to the incoming lastTweensContainer is equal to the root property's value prior to any tweening. */rootPropertyValue=data.rootPropertyValueCache[rootProperty];/* If values were not transferred from a previous Velocity call, query the DOM as needed. */}else{/* Handle hooked properties. */if(CSS.Hooks.registered[property]){if(startValue===undefined){rootPropertyValue=CSS.getPropertyValue(element,rootProperty);/* GET *//* Note: The following getPropertyValue() call does not actually trigger a DOM query;
										 getPropertyValue() will extract the hook from rootPropertyValue. */startValue=CSS.getPropertyValue(element,property,rootPropertyValue);/* If startValue is already defined via forcefeeding, do not query the DOM for the root property's value;
										 just grab rootProperty's zero-value template from CSS.Hooks. This overwrites the element's actual
										 root property value (if one is set), but this is acceptable since the primary reason users forcefeed is
										 to avoid DOM queries, and thus we likewise avoid querying the DOM for the root property's value. */}else{/* Grab this hook's zero-value template, e.g. "0px 0px 0px black". */rootPropertyValue=CSS.Hooks.templates[rootProperty][1];}/* Handle non-hooked properties that haven't already been defined via forcefeeding. */}else if(startValue===undefined){startValue=CSS.getPropertyValue(element,property);/* GET */}}/**************************
							 Value Data Extraction
							 **************************/var separatedValue,endValueUnitType,startValueUnitType,operator=false;/* Separates a property value into its numeric value and its unit type. */var separateValue=function separateValue(property,value){var unitType,numericValue;numericValue=(value||"0").toString().toLowerCase()/* Match the unit type at the end of the value. */.replace(/[%A-z]+$/,function(match){/* Grab the unit type. */unitType=match;/* Strip the unit type off of value. */return"";});/* If no unit type was supplied, assign one that is appropriate for this property (e.g. "deg" for rotateZ or "px" for width). */if(!unitType){unitType=CSS.Values.getUnitType(property);}return[numericValue,unitType];};if(startValue!==endValue&&Type.isString(startValue)&&Type.isString(endValue)){pattern="";var iStart=0,// index in startValue
iEnd=0,// index in endValue
aStart=[],// array of startValue numbers
aEnd=[],// array of endValue numbers
inCalc=0,// Keep track of being inside a "calc()" so we don't duplicate it
inRGB=0,// Keep track of being inside an RGB as we can't use fractional values
inRGBA=0;// Keep track of being inside an RGBA as we must pass fractional for the alpha channel
startValue=CSS.Hooks.fixColors(startValue);endValue=CSS.Hooks.fixColors(endValue);while(iStart<startValue.length&&iEnd<endValue.length){var cStart=startValue[iStart],cEnd=endValue[iEnd];if(/[\d\.-]/.test(cStart)&&/[\d\.-]/.test(cEnd)){var tStart=cStart,// temporary character buffer
tEnd=cEnd,// temporary character buffer
dotStart=".",// Make sure we can only ever match a single dot in a decimal
dotEnd=".";// Make sure we can only ever match a single dot in a decimal
while(++iStart<startValue.length){cStart=startValue[iStart];if(cStart===dotStart){dotStart="..";// Can never match two characters
}else if(!/\d/.test(cStart)){break;}tStart+=cStart;}while(++iEnd<endValue.length){cEnd=endValue[iEnd];if(cEnd===dotEnd){dotEnd="..";// Can never match two characters
}else if(!/\d/.test(cEnd)){break;}tEnd+=cEnd;}var uStart=CSS.Hooks.getUnit(startValue,iStart),// temporary unit type
uEnd=CSS.Hooks.getUnit(endValue,iEnd);// temporary unit type
iStart+=uStart.length;iEnd+=uEnd.length;if(uStart===uEnd){// Same units
if(tStart===tEnd){// Same numbers, so just copy over
pattern+=tStart+uStart;}else{// Different numbers, so store them
pattern+="{"+aStart.length+(inRGB?"!":"")+"}"+uStart;aStart.push(parseFloat(tStart));aEnd.push(parseFloat(tEnd));}}else{// Different units, so put into a "calc(from + to)" and animate each side to/from zero
var nStart=parseFloat(tStart),nEnd=parseFloat(tEnd);pattern+=(inCalc<5?"calc":"")+"("+(nStart?"{"+aStart.length+(inRGB?"!":"")+"}":"0")+uStart+" + "+(nEnd?"{"+(aStart.length+(nStart?1:0))+(inRGB?"!":"")+"}":"0")+uEnd+")";if(nStart){aStart.push(nStart);aEnd.push(0);}if(nEnd){aStart.push(0);aEnd.push(nEnd);}}}else if(cStart===cEnd){pattern+=cStart;iStart++;iEnd++;// Keep track of being inside a calc()
if(inCalc===0&&cStart==="c"||inCalc===1&&cStart==="a"||inCalc===2&&cStart==="l"||inCalc===3&&cStart==="c"||inCalc>=4&&cStart==="("){inCalc++;}else if(inCalc&&inCalc<5||inCalc>=4&&cStart===")"&&--inCalc<5){inCalc=0;}// Keep track of being inside an rgb() / rgba()
if(inRGB===0&&cStart==="r"||inRGB===1&&cStart==="g"||inRGB===2&&cStart==="b"||inRGB===3&&cStart==="a"||inRGB>=3&&cStart==="("){if(inRGB===3&&cStart==="a"){inRGBA=1;}inRGB++;}else if(inRGBA&&cStart===","){if(++inRGBA>3){inRGB=inRGBA=0;}}else if(inRGBA&&inRGB<(inRGBA?5:4)||inRGB>=(inRGBA?4:3)&&cStart===")"&&--inRGB<(inRGBA?5:4)){inRGB=inRGBA=0;}}else{inCalc=0;// TODO: changing units, fixing colours
break;}}if(iStart!==startValue.length||iEnd!==endValue.length){if(Velocity.debug){console.error("Trying to pattern match mis-matched strings [\""+endValue+"\", \""+startValue+"\"]");}pattern=undefined;}if(pattern){if(aStart.length){if(Velocity.debug){console.log("Pattern found \""+pattern+"\" -> ",aStart,aEnd,"["+startValue+","+endValue+"]");}startValue=aStart;endValue=aEnd;endValueUnitType=startValueUnitType="";}else{pattern=undefined;}}}if(!pattern){/* Separate startValue. */separatedValue=separateValue(property,startValue);startValue=separatedValue[0];startValueUnitType=separatedValue[1];/* Separate endValue, and extract a value operator (e.g. "+=", "-=") if one exists. */separatedValue=separateValue(property,endValue);endValue=separatedValue[0].replace(/^([+-\/*])=/,function(match,subMatch){operator=subMatch;/* Strip the operator off of the value. */return"";});endValueUnitType=separatedValue[1];/* Parse float values from endValue and startValue. Default to 0 if NaN is returned. */startValue=parseFloat(startValue)||0;endValue=parseFloat(endValue)||0;/***************************************
								 Property-Specific Value Conversion
								 ***************************************//* Custom support for properties that don't actually accept the % unit type, but where pollyfilling is trivial and relatively foolproof. */if(endValueUnitType==="%"){/* A %-value fontSize/lineHeight is relative to the parent's fontSize (as opposed to the parent's dimensions),
									 which is identical to the em unit's behavior, so we piggyback off of that. */if(/^(fontSize|lineHeight)$/.test(property)){/* Convert % into an em decimal value. */endValue=endValue/100;endValueUnitType="em";/* For scaleX and scaleY, convert the value into its decimal format and strip off the unit type. */}else if(/^scale/.test(property)){endValue=endValue/100;endValueUnitType="";/* For RGB components, take the defined percentage of 255 and strip off the unit type. */}else if(/(Red|Green|Blue)$/i.test(property)){endValue=endValue/100*255;endValueUnitType="";}}}/***************************
							 Unit Ratio Calculation
							 ***************************//* When queried, the browser returns (most) CSS property values in pixels. Therefore, if an endValue with a unit type of
							 %, em, or rem is animated toward, startValue must be converted from pixels into the same unit type as endValue in order
							 for value manipulation logic (increment/decrement) to proceed. Further, if the startValue was forcefed or transferred
							 from a previous call, startValue may also not be in pixels. Unit conversion logic therefore consists of two steps:
							 1) Calculating the ratio of %/em/rem/vh/vw relative to pixels
							 2) Converting startValue into the same unit of measurement as endValue based on these ratios. *//* Unit conversion ratios are calculated by inserting a sibling node next to the target node, copying over its position property,
							 setting values with the target unit type then comparing the returned pixel value. *//* Note: Even if only one of these unit types is being animated, all unit ratios are calculated at once since the overhead
							 of batching the SETs and GETs together upfront outweights the potential overhead
							 of layout thrashing caused by re-querying for uncalculated ratios for subsequently-processed properties. *//* Todo: Shift this logic into the calls' first tick instance so that it's synced with RAF. */var calculateUnitRatios=function calculateUnitRatios(){/************************
								 Same Ratio Checks
								 ************************//* The properties below are used to determine whether the element differs sufficiently from this call's
								 previously iterated element to also differ in its unit conversion ratios. If the properties match up with those
								 of the prior element, the prior element's conversion ratios are used. Like most optimizations in Velocity,
								 this is done to minimize DOM querying. */var sameRatioIndicators={myParent:element.parentNode||document.body,/* GET */position:CSS.getPropertyValue(element,"position"),/* GET */fontSize:CSS.getPropertyValue(element,"fontSize")/* GET */},/* Determine if the same % ratio can be used. % is based on the element's position value and its parent's width and height dimensions. */samePercentRatio=sameRatioIndicators.position===callUnitConversionData.lastPosition&&sameRatioIndicators.myParent===callUnitConversionData.lastParent,/* Determine if the same em ratio can be used. em is relative to the element's fontSize. */sameEmRatio=sameRatioIndicators.fontSize===callUnitConversionData.lastFontSize;/* Store these ratio indicators call-wide for the next element to compare against. */callUnitConversionData.lastParent=sameRatioIndicators.myParent;callUnitConversionData.lastPosition=sameRatioIndicators.position;callUnitConversionData.lastFontSize=sameRatioIndicators.fontSize;/***************************
								 Element-Specific Units
								 ***************************//* Note: IE8 rounds to the nearest pixel when returning CSS values, thus we perform conversions using a measurement
								 of 100 (instead of 1) to give our ratios a precision of at least 2 decimal values. */var measurement=100,unitRatios={};if(!sameEmRatio||!samePercentRatio){var dummy=data&&data.isSVG?document.createElementNS("http://www.w3.org/2000/svg","rect"):document.createElement("div");Velocity.init(dummy);sameRatioIndicators.myParent.appendChild(dummy);/* To accurately and consistently calculate conversion ratios, the element's cascaded overflow and box-sizing are stripped.
									 Similarly, since width/height can be artificially constrained by their min-/max- equivalents, these are controlled for as well. *//* Note: Overflow must be also be controlled for per-axis since the overflow property overwrites its per-axis values. */$.each(["overflow","overflowX","overflowY"],function(i,property){Velocity.CSS.setPropertyValue(dummy,property,"hidden");});Velocity.CSS.setPropertyValue(dummy,"position",sameRatioIndicators.position);Velocity.CSS.setPropertyValue(dummy,"fontSize",sameRatioIndicators.fontSize);Velocity.CSS.setPropertyValue(dummy,"boxSizing","content-box");/* width and height act as our proxy properties for measuring the horizontal and vertical % ratios. */$.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(i,property){Velocity.CSS.setPropertyValue(dummy,property,measurement+"%");});/* paddingLeft arbitrarily acts as our proxy property for the em ratio. */Velocity.CSS.setPropertyValue(dummy,"paddingLeft",measurement+"em");/* Divide the returned value by the measurement to get the ratio between 1% and 1px. Default to 1 since working with 0 can produce Infinite. */unitRatios.percentToPxWidth=callUnitConversionData.lastPercentToPxWidth=(parseFloat(CSS.getPropertyValue(dummy,"width",null,true))||1)/measurement;/* GET */unitRatios.percentToPxHeight=callUnitConversionData.lastPercentToPxHeight=(parseFloat(CSS.getPropertyValue(dummy,"height",null,true))||1)/measurement;/* GET */unitRatios.emToPx=callUnitConversionData.lastEmToPx=(parseFloat(CSS.getPropertyValue(dummy,"paddingLeft"))||1)/measurement;/* GET */sameRatioIndicators.myParent.removeChild(dummy);}else{unitRatios.emToPx=callUnitConversionData.lastEmToPx;unitRatios.percentToPxWidth=callUnitConversionData.lastPercentToPxWidth;unitRatios.percentToPxHeight=callUnitConversionData.lastPercentToPxHeight;}/***************************
								 Element-Agnostic Units
								 ***************************//* Whereas % and em ratios are determined on a per-element basis, the rem unit only needs to be checked
								 once per call since it's exclusively dependant upon document.body's fontSize. If this is the first time
								 that calculateUnitRatios() is being run during this call, remToPx will still be set to its default value of null,
								 so we calculate it now. */if(callUnitConversionData.remToPx===null){/* Default to browsers' default fontSize of 16px in the case of 0. */callUnitConversionData.remToPx=parseFloat(CSS.getPropertyValue(document.body,"fontSize"))||16;/* GET */}/* Similarly, viewport units are %-relative to the window's inner dimensions. */if(callUnitConversionData.vwToPx===null){callUnitConversionData.vwToPx=parseFloat(window.innerWidth)/100;/* GET */callUnitConversionData.vhToPx=parseFloat(window.innerHeight)/100;/* GET */}unitRatios.remToPx=callUnitConversionData.remToPx;unitRatios.vwToPx=callUnitConversionData.vwToPx;unitRatios.vhToPx=callUnitConversionData.vhToPx;if(Velocity.debug>=1){console.log("Unit ratios: "+JSON.stringify(unitRatios),element);}return unitRatios;};/********************
							 Unit Conversion
							 ********************//* The * and / operators, which are not passed in with an associated unit, inherently use startValue's unit. Skip value and unit conversion. */if(/[\/*]/.test(operator)){endValueUnitType=startValueUnitType;/* If startValue and endValue differ in unit type, convert startValue into the same unit type as endValue so that if endValueUnitType
								 is a relative unit (%, em, rem), the values set during tweening will continue to be accurately relative even if the metrics they depend
								 on are dynamically changing during the course of the animation. Conversely, if we always normalized into px and used px for setting values, the px ratio
								 would become stale if the original unit being animated toward was relative and the underlying metrics change during the animation. *//* Since 0 is 0 in any unit type, no conversion is necessary when startValue is 0 -- we just start at 0 with endValueUnitType. */}else if(startValueUnitType!==endValueUnitType&&startValue!==0){/* Unit conversion is also skipped when endValue is 0, but *startValueUnitType* must be used for tween values to remain accurate. *//* Note: Skipping unit conversion here means that if endValueUnitType was originally a relative unit, the animation won't relatively
								 match the underlying metrics if they change, but this is acceptable since we're animating toward invisibility instead of toward visibility,
								 which remains past the point of the animation's completion. */if(endValue===0){endValueUnitType=startValueUnitType;}else{/* By this point, we cannot avoid unit conversion (it's undesirable since it causes layout thrashing).
									 If we haven't already, we trigger calculateUnitRatios(), which runs once per element per call. */elementUnitConversionData=elementUnitConversionData||calculateUnitRatios();/* The following RegEx matches CSS properties that have their % values measured relative to the x-axis. *//* Note: W3C spec mandates that all of margin and padding's properties (even top and bottom) are %-relative to the *width* of the parent element. */var axis=/margin|padding|left|right|width|text|word|letter/i.test(property)||/X$/.test(property)||property==="x"?"x":"y";/* In order to avoid generating n^2 bespoke conversion functions, unit conversion is a two-step process:
									 1) Convert startValue into pixels. 2) Convert this new pixel value into endValue's unit type. */switch(startValueUnitType){case"%":/* Note: translateX and translateY are the only properties that are %-relative to an element's own dimensions -- not its parent's dimensions.
											 Velocity does not include a special conversion process to account for this behavior. Therefore, animating translateX/Y from a % value
											 to a non-% value will produce an incorrect start value. Fortunately, this sort of cross-unit conversion is rarely done by users in practice. */startValue*=axis==="x"?elementUnitConversionData.percentToPxWidth:elementUnitConversionData.percentToPxHeight;break;case"px":/* px acts as our midpoint in the unit conversion process; do nothing. */break;default:startValue*=elementUnitConversionData[startValueUnitType+"ToPx"];}/* Invert the px ratios to convert into to the target unit. */switch(endValueUnitType){case"%":startValue*=1/(axis==="x"?elementUnitConversionData.percentToPxWidth:elementUnitConversionData.percentToPxHeight);break;case"px":/* startValue is already in px, do nothing; we're done. */break;default:startValue*=1/elementUnitConversionData[endValueUnitType+"ToPx"];}}}/*********************
							 Relative Values
							 *********************//* Operator logic must be performed last since it requires unit-normalized start and end values. *//* Note: Relative *percent values* do not behave how most people think; while one would expect "+=50%"
							 to increase the property 1.5x its current value, it in fact increases the percent units in absolute terms:
							 50 points is added on top of the current % value. */switch(operator){case"+":endValue=startValue+endValue;break;case"-":endValue=startValue-endValue;break;case"*":endValue=startValue*endValue;break;case"/":endValue=startValue/endValue;break;}/**************************
							 tweensContainer Push
							 **************************//* Construct the per-property tween object, and push it to the element's tweensContainer. */tweensContainer[property]={rootPropertyValue:rootPropertyValue,startValue:startValue,currentValue:startValue,endValue:endValue,unitType:endValueUnitType,easing:easing};if(pattern){tweensContainer[property].pattern=pattern;}if(Velocity.debug){console.log("tweensContainer ("+property+"): "+JSON.stringify(tweensContainer[property]),element);}};/* Create a tween out of each property, and append its associated data to tweensContainer. */for(var property in propertiesMap){if(!propertiesMap.hasOwnProperty(property)){continue;}/* The original property name's format must be used for the parsePropertyValue() lookup,
							 but we then use its camelCase styling to normalize it for manipulation. */var propertyName=CSS.Names.camelCase(property),valueData=parsePropertyValue(propertiesMap[property]);/* Find shorthand color properties that have been passed a hex string. *//* Would be quicker to use CSS.Lists.colors.includes() if possible */if(_inArray(CSS.Lists.colors,propertyName)){/* Parse the value data for each shorthand. */var endValue=valueData[0],easing=valueData[1],startValue=valueData[2];if(CSS.RegEx.isHex.test(endValue)){/* Convert the hex strings into their RGB component arrays. */var colorComponents=["Red","Green","Blue"],endValueRGB=CSS.Values.hexToRgb(endValue),startValueRGB=startValue?CSS.Values.hexToRgb(startValue):undefined;/* Inject the RGB component tweens into propertiesMap. */for(var i=0;i<colorComponents.length;i++){var dataArray=[endValueRGB[i]];if(easing){dataArray.push(easing);}if(startValueRGB!==undefined){dataArray.push(startValueRGB[i]);}fixPropertyValue(propertyName+colorComponents[i],dataArray);}/* If we have replaced a shortcut color value then don't update the standard property name */continue;}}fixPropertyValue(propertyName,valueData);}/* Along with its property data, store a reference to the element itself onto tweensContainer. */tweensContainer.element=element;}/*****************
					 Call Push
					 *****************//* Note: tweensContainer can be empty if all of the properties in this call's property map were skipped due to not
					 being supported by the browser. The element property is used for checking that the tweensContainer has been appended to. */if(tweensContainer.element){/* Apply the "velocity-animating" indicator class. */CSS.Values.addClass(element,"velocity-animating");/* The call array houses the tweensContainers for each element being animated in the current call. */call.push(tweensContainer);data=Data(element);if(data){/* Store the tweensContainer and options if we're working on the default effects queue, so that they can be used by the reverse command. */if(opts.queue===""){data.tweensContainer=tweensContainer;data.opts=opts;}/* Switch on the element's animating flag. */data.isAnimating=true;}/* Once the final element in this call's element set has been processed, push the call array onto
						 Velocity.State.calls for the animation tick to immediately begin processing. */if(elementsIndex===elementsLength-1){/* Add the current call plus its associated metadata (the element set and the call's options) onto the global call container.
							 Anything on this call container is subjected to tick() processing. */Velocity.State.calls.push([call,elements,opts,null,promiseData.resolver,null,0]);/* If the animation tick isn't running, start it. (Velocity shuts it off when there are no active calls to process.) */if(Velocity.State.isTicking===false){Velocity.State.isTicking=true;/* Start the tick loop. */tick();}}else{elementsIndex++;}}}/* When the queue option is set to false, the call skips the element's queue and fires immediately. */if(opts.queue===false){/* Since this buildQueue call doesn't respect the element's existing queue (which is where a delay option would have been appended),
					 we manually inject the delay property here with an explicit setTimeout. */if(opts.delay){/* Temporarily store delayed elements to facilitate access for global pause/resume */var callIndex=Velocity.State.delayedElements.count++;Velocity.State.delayedElements[callIndex]=element;var delayComplete=function(index){return function(){/* Clear the temporary element */Velocity.State.delayedElements[index]=false;/* Finally, issue the call */buildQueue();};}(callIndex);Data(element).delayBegin=new Date().getTime();Data(element).delay=parseFloat(opts.delay);Data(element).delayTimer={setTimeout:setTimeout(buildQueue,parseFloat(opts.delay)),next:delayComplete};}else{buildQueue();}/* Otherwise, the call undergoes element queueing as normal. *//* Note: To interoperate with jQuery, Velocity uses jQuery's own $.queue() stack for queuing logic. */}else{$.queue(element,opts.queue,function(next,clearQueue){/* If the clearQueue flag was passed in by the stop command, resolve this call's promise. (Promises can only be resolved once,
						 so it's fine if this is repeatedly triggered for each element in the associated call.) */if(clearQueue===true){if(promiseData.promise){promiseData.resolver(elements);}/* Do not continue with animation queueing. */return true;}/* This flag indicates to the upcoming completeCall() function that this queue entry was initiated by Velocity.
						 See completeCall() for further details. */Velocity.velocityQueueEntryFlag=true;buildQueue(next);});}/*********************
				 Auto-Dequeuing
				 *********************//* As per jQuery's $.queue() behavior, to fire the first non-custom-queue entry on an element, the element
				 must be dequeued if its queue stack consists *solely* of the current call. (This can be determined by checking
				 for the "inprogress" item that jQuery prepends to active queue stack arrays.) Regardless, whenever the element's
				 queue is further appended with additional items -- including $.delay()'s or even $.animate() calls, the queue's
				 first entry is automatically fired. This behavior contrasts that of custom queues, which never auto-fire. *//* Note: When an element set is being subjected to a non-parallel Velocity call, the animation will not begin until
				 each one of the elements in the set has reached the end of its individually pre-existing queue chain. *//* Note: Unfortunately, most people don't fully grasp jQuery's powerful, yet quirky, $.queue() function.
				 Lean more here: http://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me */if((opts.queue===""||opts.queue==="fx")&&$.queue(element)[0]!=="inprogress"){$.dequeue(element);}}/**************************
			 Element Set Iteration
			 **************************//* If the "nodeType" property exists on the elements variable, we're animating a single element.
			 Place it in an array so that $.each() can iterate over it. */$.each(elements,function(i,element){/* Ensure each element in a set has a nodeType (is a real element) to avoid throwing errors. */if(Type.isNode(element)){processElement(element,i);}});/******************
			 Option: Loop
			 ******************//* The loop option accepts an integer indicating how many times the element should loop between the values in the
			 current call's properties map and the element's property values prior to this call. *//* Note: The loop option's logic is performed here -- after element processing -- because the current call needs
			 to undergo its queue insertion prior to the loop option generating its series of constituent "reverse" calls,
			 which chain after the current call. Two reverse calls (two "alternations") constitute one loop. */opts=$.extend({},Velocity.defaults,options);opts.loop=parseInt(opts.loop,10);var reverseCallsCount=opts.loop*2-1;if(opts.loop){/* Double the loop count to convert it into its appropriate number of "reverse" calls.
				 Subtract 1 from the resulting value since the current call is included in the total alternation count. */for(var x=0;x<reverseCallsCount;x++){/* Since the logic for the reverse action occurs inside Queueing and therefore this call's options object
					 isn't parsed until then as well, the current call's delay option must be explicitly passed into the reverse
					 call so that the delay logic that occurs inside *Pre-Queueing* can process it. */var reverseOptions={delay:opts.delay,progress:opts.progress};/* If a complete callback was passed into this call, transfer it to the loop redirect's final "reverse" call
					 so that it's triggered when the entire redirect is complete (and not when the very first animation is complete). */if(x===reverseCallsCount-1){reverseOptions.display=opts.display;reverseOptions.visibility=opts.visibility;reverseOptions.complete=opts.complete;}animate(elements,"reverse",reverseOptions);}}/***************
			 Chaining
			 ***************//* Return the elements back to the call chain, with wrapped elements taking precedence in case Velocity was called via the $.fn. extension. */return getChain();};/* Turn Velocity into the animation function, extended with the pre-existing Velocity object. */Velocity=$.extend(animate,Velocity);/* For legacy support, also expose the literal animate method. */Velocity.animate=animate;/**************
		 Timing
		 **************//* Ticker function. */var ticker=window.requestAnimationFrame||rAFShim;/* Inactive browser tabs pause rAF, which results in all active animations immediately sprinting to their completion states when the tab refocuses.
		 To get around this, we dynamically switch rAF to setTimeout (which the browser *doesn't* pause) when the tab loses focus. We skip this for mobile
		 devices to avoid wasting battery power on inactive tabs. *//* Note: Tab focus detection doesn't work on older versions of IE, but that's okay since they don't support rAF to begin with. */if(!Velocity.State.isMobile&&document.hidden!==undefined){var updateTicker=function updateTicker(){/* Reassign the rAF function (which the global tick() function uses) based on the tab's focus state. */if(document.hidden){ticker=function ticker(callback){/* The tick function needs a truthy first argument in order to pass its internal timestamp check. */return setTimeout(function(){callback(true);},16);};/* The rAF loop has been paused by the browser, so we manually restart the tick. */tick();}else{ticker=window.requestAnimationFrame||rAFShim;}};/* Page could be sitting in the background at this time (i.e. opened as new tab) so making sure we use correct ticker from the start */updateTicker();/* And then run check again every time visibility changes */document.addEventListener("visibilitychange",updateTicker);}/************
		 Tick
		 ************//* Note: All calls to Velocity are pushed to the Velocity.State.calls array, which is fully iterated through upon each tick. */function tick(timestamp){/* An empty timestamp argument indicates that this is the first tick occurence since ticking was turned on.
			 We leverage this metadata to fully ignore the first tick pass since RAF's initial pass is fired whenever
			 the browser's next tick sync time occurs, which results in the first elements subjected to Velocity
			 calls being animated out of sync with any elements animated immediately thereafter. In short, we ignore
			 the first RAF tick pass so that elements being immediately consecutively animated -- instead of simultaneously animated
			 by the same Velocity call -- are properly batched into the same initial RAF tick and consequently remain in sync thereafter. */if(timestamp){/* We normally use RAF's high resolution timestamp but as it can be significantly offset when the browser is
				 under high stress we give the option for choppiness over allowing the browser to drop huge chunks of frames.
				 We use performance.now() and shim it if it doesn't exist for when the tab is hidden. */var timeCurrent=Velocity.timestamp&&timestamp!==true?timestamp:performance.now();/********************
				 Call Iteration
				 ********************/var callsLength=Velocity.State.calls.length;/* To speed up iterating over this array, it is compacted (falsey items -- calls that have completed -- are removed)
				 when its length has ballooned to a point that can impact tick performance. This only becomes necessary when animation
				 has been continuous with many elements over a long period of time; whenever all active calls are completed, completeCall() clears Velocity.State.calls. */if(callsLength>10000){Velocity.State.calls=compactSparseArray(Velocity.State.calls);callsLength=Velocity.State.calls.length;}/* Iterate through each active call. */for(var i=0;i<callsLength;i++){/* When a Velocity call is completed, its Velocity.State.calls entry is set to false. Continue on to the next call. */if(!Velocity.State.calls[i]){continue;}/************************
					 Call-Wide Variables
					 ************************/var callContainer=Velocity.State.calls[i],call=callContainer[0],opts=callContainer[2],timeStart=callContainer[3],firstTick=!timeStart,tweenDummyValue=null,pauseObject=callContainer[5],millisecondsEllapsed=callContainer[6];/* If timeStart is undefined, then this is the first time that this call has been processed by tick().
					 We assign timeStart now so that its value is as close to the real animation start time as possible.
					 (Conversely, had timeStart been defined when this call was added to Velocity.State.calls, the delay
					 between that time and now would cause the first few frames of the tween to be skipped since
					 percentComplete is calculated relative to timeStart.) *//* Further, subtract 16ms (the approximate resolution of RAF) from the current time value so that the
					 first tick iteration isn't wasted by animating at 0% tween completion, which would produce the
					 same style value as the element's current value. */if(!timeStart){timeStart=Velocity.State.calls[i][3]=timeCurrent-16;}/* If a pause object is present, skip processing unless it has been set to resume */if(pauseObject){if(pauseObject.resume===true){/* Update the time start to accomodate the paused completion amount */timeStart=callContainer[3]=Math.round(timeCurrent-millisecondsEllapsed-16);/* Remove pause object after processing */callContainer[5]=null;}else{continue;}}millisecondsEllapsed=callContainer[6]=timeCurrent-timeStart;/* The tween's completion percentage is relative to the tween's start time, not the tween's start value
					 (which would result in unpredictable tween durations since JavaScript's timers are not particularly accurate).
					 Accordingly, we ensure that percentComplete does not exceed 1. */var percentComplete=Math.min(millisecondsEllapsed/opts.duration,1);/**********************
					 Element Iteration
					 **********************//* For every call, iterate through each of the elements in its set. */for(var j=0,callLength=call.length;j<callLength;j++){var tweensContainer=call[j],element=tweensContainer.element;/* Check to see if this element has been deleted midway through the animation by checking for the
						 continued existence of its data cache. If it's gone, or the element is currently paused, skip animating this element. */if(!Data(element)){continue;}var transformPropertyExists=false;/**********************************
						 Display & Visibility Toggling
						 **********************************//* If the display option is set to non-"none", set it upfront so that the element can become visible before tweening begins.
						 (Otherwise, display's "none" value is set in completeCall() once the animation has completed.) */if(opts.display!==undefined&&opts.display!==null&&opts.display!=="none"){if(opts.display==="flex"){var flexValues=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];$.each(flexValues,function(i,flexValue){CSS.setPropertyValue(element,"display",flexValue);});}CSS.setPropertyValue(element,"display",opts.display);}/* Same goes with the visibility option, but its "none" equivalent is "hidden". */if(opts.visibility!==undefined&&opts.visibility!=="hidden"){CSS.setPropertyValue(element,"visibility",opts.visibility);}/************************
						 Property Iteration
						 ************************//* For every element, iterate through each property. */for(var property in tweensContainer){/* Note: In addition to property tween data, tweensContainer contains a reference to its associated element. */if(tweensContainer.hasOwnProperty(property)&&property!=="element"){var tween=tweensContainer[property],currentValue,/* Easing can either be a pre-genereated function or a string that references a pre-registered easing
										 on the Velocity.Easings object. In either case, return the appropriate easing *function*. */easing=Type.isString(tween.easing)?Velocity.Easings[tween.easing]:tween.easing;/******************************
								 Current Value Calculation
								 ******************************/if(Type.isString(tween.pattern)){var patternReplace=percentComplete===1?function($0,index,round){var result=tween.endValue[index];return round?Math.round(result):result;}:function($0,index,round){var startValue=tween.startValue[index],tweenDelta=tween.endValue[index]-startValue,result=startValue+tweenDelta*easing(percentComplete,opts,tweenDelta);return round?Math.round(result):result;};currentValue=tween.pattern.replace(/{(\d+)(!)?}/g,patternReplace);}else if(percentComplete===1){/* If this is the last tick pass (if we've reached 100% completion for this tween),
									 ensure that currentValue is explicitly set to its target endValue so that it's not subjected to any rounding. */currentValue=tween.endValue;}else{/* Otherwise, calculate currentValue based on the current delta from startValue. */var tweenDelta=tween.endValue-tween.startValue;currentValue=tween.startValue+tweenDelta*easing(percentComplete,opts,tweenDelta);/* If no value change is occurring, don't proceed with DOM updating. */}if(!firstTick&&currentValue===tween.currentValue){continue;}tween.currentValue=currentValue;/* If we're tweening a fake 'tween' property in order to log transition values, update the one-per-call variable so that
								 it can be passed into the progress callback. */if(property==="tween"){tweenDummyValue=currentValue;}else{/******************
									 Hooks: Part I
									 ******************/var hookRoot;/* For hooked properties, the newly-updated rootPropertyValueCache is cached onto the element so that it can be used
									 for subsequent hooks in this call that are associated with the same root property. If we didn't cache the updated
									 rootPropertyValue, each subsequent update to the root property in this tick pass would reset the previous hook's
									 updates to rootPropertyValue prior to injection. A nice performance byproduct of rootPropertyValue caching is that
									 subsequently chained animations using the same hookRoot but a different hook can use this cached rootPropertyValue. */if(CSS.Hooks.registered[property]){hookRoot=CSS.Hooks.getRoot(property);var rootPropertyValueCache=Data(element).rootPropertyValueCache[hookRoot];if(rootPropertyValueCache){tween.rootPropertyValue=rootPropertyValueCache;}}/*****************
									 DOM Update
									 *****************//* setPropertyValue() returns an array of the property name and property value post any normalization that may have been performed. *//* Note: To solve an IE<=8 positioning bug, the unit type is dropped when setting a property value of 0. */var adjustedSetData=CSS.setPropertyValue(element,/* SET */property,tween.currentValue+(IE<9&&parseFloat(currentValue)===0?"":tween.unitType),tween.rootPropertyValue,tween.scrollData);/*******************
									 Hooks: Part II
									 *******************//* Now that we have the hook's updated rootPropertyValue (the post-processed value provided by adjustedSetData), cache it onto the element. */if(CSS.Hooks.registered[property]){/* Since adjustedSetData contains normalized data ready for DOM updating, the rootPropertyValue needs to be re-extracted from its normalized form. ?? */if(CSS.Normalizations.registered[hookRoot]){Data(element).rootPropertyValueCache[hookRoot]=CSS.Normalizations.registered[hookRoot]("extract",null,adjustedSetData[1]);}else{Data(element).rootPropertyValueCache[hookRoot]=adjustedSetData[1];}}/***************
									 Transforms
									 ***************//* Flag whether a transform property is being animated so that flushTransformCache() can be triggered once this tick pass is complete. */if(adjustedSetData[0]==="transform"){transformPropertyExists=true;}}}}/****************
						 mobileHA
						 ****************//* If mobileHA is enabled, set the translate3d transform to null to force hardware acceleration.
						 It's safe to override this property since Velocity doesn't actually support its animation (hooks are used in its place). */if(opts.mobileHA){/* Don't set the null transform hack if we've already done so. */if(Data(element).transformCache.translate3d===undefined){/* All entries on the transformCache object are later concatenated into a single transform string via flushTransformCache(). */Data(element).transformCache.translate3d="(0px, 0px, 0px)";transformPropertyExists=true;}}if(transformPropertyExists){CSS.flushTransformCache(element);}}/* The non-"none" display value is only applied to an element once -- when its associated call is first ticked through.
					 Accordingly, it's set to false so that it isn't re-processed by this call in the next tick. */if(opts.display!==undefined&&opts.display!=="none"){Velocity.State.calls[i][2].display=false;}if(opts.visibility!==undefined&&opts.visibility!=="hidden"){Velocity.State.calls[i][2].visibility=false;}/* Pass the elements and the timing data (percentComplete, msRemaining, timeStart, tweenDummyValue) into the progress callback. */if(opts.progress){opts.progress.call(callContainer[1],callContainer[1],percentComplete,Math.max(0,timeStart+opts.duration-timeCurrent),timeStart,tweenDummyValue);}/* If this call has finished tweening, pass its index to completeCall() to handle call cleanup. */if(percentComplete===1){completeCall(i);}}}/* Note: completeCall() sets the isTicking flag to false when the last call on Velocity.State.calls has completed. */if(Velocity.State.isTicking){ticker(tick);}}/**********************
		 Call Completion
		 **********************//* Note: Unlike tick(), which processes all active calls at once, call completion is handled on a per-call basis. */function completeCall(callIndex,isStopped){/* Ensure the call exists. */if(!Velocity.State.calls[callIndex]){return false;}/* Pull the metadata from the call. */var call=Velocity.State.calls[callIndex][0],elements=Velocity.State.calls[callIndex][1],opts=Velocity.State.calls[callIndex][2],resolver=Velocity.State.calls[callIndex][4];var remainingCallsExist=false;/*************************
			 Element Finalization
			 *************************/for(var i=0,callLength=call.length;i<callLength;i++){var element=call[i].element;/* If the user set display to "none" (intending to hide the element), set it now that the animation has completed. *//* Note: display:none isn't set when calls are manually stopped (via Velocity("stop"). *//* Note: Display gets ignored with "reverse" calls and infinite loops, since this behavior would be undesirable. */if(!isStopped&&!opts.loop){if(opts.display==="none"){CSS.setPropertyValue(element,"display",opts.display);}if(opts.visibility==="hidden"){CSS.setPropertyValue(element,"visibility",opts.visibility);}}/* If the element's queue is empty (if only the "inprogress" item is left at position 0) or if its queue is about to run
				 a non-Velocity-initiated entry, turn off the isAnimating flag. A non-Velocity-initiatied queue entry's logic might alter
				 an element's CSS values and thereby cause Velocity's cached value data to go stale. To detect if a queue entry was initiated by Velocity,
				 we check for the existence of our special Velocity.queueEntryFlag declaration, which minifiers won't rename since the flag
				 is assigned to jQuery's global $ object and thus exists out of Velocity's own scope. */var data=Data(element);if(opts.loop!==true&&($.queue(element)[1]===undefined||!/\.velocityQueueEntryFlag/i.test($.queue(element)[1]))){/* The element may have been deleted. Ensure that its data cache still exists before acting on it. */if(data){data.isAnimating=false;/* Clear the element's rootPropertyValueCache, which will become stale. */data.rootPropertyValueCache={};var transformHAPropertyExists=false;/* If any 3D transform subproperty is at its default value (regardless of unit type), remove it. */$.each(CSS.Lists.transforms3D,function(i,transformName){var defaultValue=/^scale/.test(transformName)?1:0,currentValue=data.transformCache[transformName];if(data.transformCache[transformName]!==undefined&&new RegExp("^\\("+defaultValue+"[^.]").test(currentValue)){transformHAPropertyExists=true;delete data.transformCache[transformName];}});/* Mobile devices have hardware acceleration removed at the end of the animation in order to avoid hogging the GPU's memory. */if(opts.mobileHA){transformHAPropertyExists=true;delete data.transformCache.translate3d;}/* Flush the subproperty removals to the DOM. */if(transformHAPropertyExists){CSS.flushTransformCache(element);}/* Remove the "velocity-animating" indicator class. */CSS.Values.removeClass(element,"velocity-animating");}}/*********************
				 Option: Complete
				 *********************//* Complete is fired once per call (not once per element) and is passed the full raw DOM element set as both its context and its first argument. *//* Note: Callbacks aren't fired when calls are manually stopped (via Velocity("stop"). */if(!isStopped&&opts.complete&&!opts.loop&&i===callLength-1){/* We throw callbacks in a setTimeout so that thrown errors don't halt the execution of Velocity itself. */try{opts.complete.call(elements,elements);}catch(error){setTimeout(function(){throw error;},1);}}/**********************
				 Promise Resolving
				 **********************//* Note: Infinite loops don't return promises. */if(resolver&&opts.loop!==true){resolver(elements);}/****************************
				 Option: Loop (Infinite)
				 ****************************/if(data&&opts.loop===true&&!isStopped){/* If a rotateX/Y/Z property is being animated by 360 deg with loop:true, swap tween start/end values to enable
					 continuous iterative rotation looping. (Otherise, the element would just rotate back and forth.) */$.each(data.tweensContainer,function(propertyName,tweenContainer){if(/^rotate/.test(propertyName)&&(parseFloat(tweenContainer.startValue)-parseFloat(tweenContainer.endValue))%360===0){var oldStartValue=tweenContainer.startValue;tweenContainer.startValue=tweenContainer.endValue;tweenContainer.endValue=oldStartValue;}if(/^backgroundPosition/.test(propertyName)&&parseFloat(tweenContainer.endValue)===100&&tweenContainer.unitType==="%"){tweenContainer.endValue=0;tweenContainer.startValue=100;}});Velocity(element,"reverse",{loop:true,delay:opts.delay});}/***************
				 Dequeueing
				 ***************//* Fire the next call in the queue so long as this call's queue wasn't set to false (to trigger a parallel animation),
				 which would have already caused the next call to fire. Note: Even if the end of the animation queue has been reached,
				 $.dequeue() must still be called in order to completely clear jQuery's animation queue. */if(opts.queue!==false){$.dequeue(element,opts.queue);}}/************************
			 Calls Array Cleanup
			 ************************//* Since this call is complete, set it to false so that the rAF tick skips it. This array is later compacted via compactSparseArray().
			 (For performance reasons, the call is set to false instead of being deleted from the array: http://www.html5rocks.com/en/tutorials/speed/v8/) */Velocity.State.calls[callIndex]=false;/* Iterate through the calls array to determine if this was the final in-progress animation.
			 If so, set a flag to end ticking and clear the calls array. */for(var j=0,callsLength=Velocity.State.calls.length;j<callsLength;j++){if(Velocity.State.calls[j]!==false){remainingCallsExist=true;break;}}if(remainingCallsExist===false){/* tick() will detect this flag upon its next iteration and subsequently turn itself off. */Velocity.State.isTicking=false;/* Clear the calls array so that its length is reset. */delete Velocity.State.calls;Velocity.State.calls=[];}}/******************
		 Frameworks
		 ******************//* Both jQuery and Zepto allow their $.fn object to be extended to allow wrapped elements to be subjected to plugin calls.
		 If either framework is loaded, register a "velocity" extension pointing to Velocity's core animate() method.  Velocity
		 also registers itself onto a global container (window.jQuery || window.Zepto || window) so that certain features are
		 accessible beyond just a per-element scope. This master object contains an .animate() method, which is later assigned to $.fn
		 (if jQuery or Zepto are present). Accordingly, Velocity can both act on wrapped DOM elements and stand alone for targeting raw DOM elements. */global.Velocity=Velocity;if(global!==window){/* Assign the element function to Velocity's core animate() method. */global.fn.velocity=animate;/* Assign the object function's defaults to Velocity's global defaults object. */global.fn.velocity.defaults=Velocity.defaults;}/***********************
		 Packaged Redirects
		 ***********************//* slideUp, slideDown */$.each(["Down","Up"],function(i,direction){Velocity.Redirects["slide"+direction]=function(element,options,elementsIndex,elementsSize,elements,promiseData){var opts=$.extend({},options),begin=opts.begin,complete=opts.complete,inlineValues={},computedValues={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""};if(opts.display===undefined){/* Show the element before slideDown begins and hide the element after slideUp completes. *//* Note: Inline elements cannot have dimensions animated, so they're reverted to inline-block. */opts.display=direction==="Down"?Velocity.CSS.Values.getDisplayType(element)==="inline"?"inline-block":"block":"none";}opts.begin=function(){/* If the user passed in a begin callback, fire it now. */if(elementsIndex===0&&begin){begin.call(elements,elements);}/* Cache the elements' original vertical dimensional property values so that we can animate back to them. */for(var property in computedValues){if(!computedValues.hasOwnProperty(property)){continue;}inlineValues[property]=element.style[property];/* For slideDown, use forcefeeding to animate all vertical properties from 0. For slideUp,
						 use forcefeeding to start from computed values and animate down to 0. */var propertyValue=CSS.getPropertyValue(element,property);computedValues[property]=direction==="Down"?[propertyValue,0]:[0,propertyValue];}/* Force vertical overflow content to clip so that sliding works as expected. */inlineValues.overflow=element.style.overflow;element.style.overflow="hidden";};opts.complete=function(){/* Reset element to its pre-slide inline values once its slide animation is complete. */for(var property in inlineValues){if(inlineValues.hasOwnProperty(property)){element.style[property]=inlineValues[property];}}/* If the user passed in a complete callback, fire it now. */if(elementsIndex===elementsSize-1){if(complete){complete.call(elements,elements);}if(promiseData){promiseData.resolver(elements);}}};Velocity(element,computedValues,opts);};});/* fadeIn, fadeOut */$.each(["In","Out"],function(i,direction){Velocity.Redirects["fade"+direction]=function(element,options,elementsIndex,elementsSize,elements,promiseData){var opts=$.extend({},options),complete=opts.complete,propertiesMap={opacity:direction==="In"?1:0};/* Since redirects are triggered individually for each element in the animated set, avoid repeatedly triggering
				 callbacks by firing them only when the final element has been reached. */if(elementsIndex!==0){opts.begin=null;}if(elementsIndex!==elementsSize-1){opts.complete=null;}else{opts.complete=function(){if(complete){complete.call(elements,elements);}if(promiseData){promiseData.resolver(elements);}};}/* If a display was passed in, use it. Otherwise, default to "none" for fadeOut or the element-specific default for fadeIn. *//* Note: We allow users to pass in "null" to skip display setting altogether. */if(opts.display===undefined){opts.display=direction==="In"?"auto":"none";}Velocity(this,propertiesMap,opts);};});return Velocity;}(window.jQuery||window.Zepto||window,window,window?window.document:undefined);});/******************
 Known Issues
 ******************//* The CSS spec mandates that the translateX/Y/Z transforms are %-relative to the element itself -- not its parent.
 Velocity, however, doesn't make this distinction. Thus, converting to or from the % unit with these subproperties
 will produce an inaccurate conversion value. The same issue exists with the cx/cy attributes of SVG circles and ellipses. */;/**********************
 Velocity UI Pack
 **********************//* VelocityJS.org UI Pack (5.2.0). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License. Portions copyright Daniel Eden, Christian Pucci. */(function(factory){"use strict";/* CommonJS module. */if(typeof require==="function"&&(typeof exports==="undefined"?"undefined":_typeof2(exports))==="object"){module.exports=factory();/* AMD module. */}else if(typeof define==="function"&&define.amd){define(["velocity"],factory);/* Browser globals. */}else{factory();}})(function(){"use strict";return function(global,window,document,undefined){/*************
		 Checks
		 *************/var Velocity=global.Velocity;if(!Velocity||!Velocity.Utilities){if(window.console){console.log("Velocity UI Pack: Velocity must be loaded first. Aborting.");}return;}var $=Velocity.Utilities;var velocityVersion=Velocity.version,requiredVersion={major:1,minor:1,patch:0};function greaterSemver(primary,secondary){var versionInts=[];if(!primary||!secondary){return false;}$.each([primary,secondary],function(i,versionObject){var versionIntsComponents=[];$.each(versionObject,function(component,value){while(value.toString().length<5){value="0"+value;}versionIntsComponents.push(value);});versionInts.push(versionIntsComponents.join(""));});return parseFloat(versionInts[0])>parseFloat(versionInts[1]);}if(greaterSemver(requiredVersion,velocityVersion)){var abortError="Velocity UI Pack: You need to update Velocity (velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";alert(abortError);throw new Error(abortError);}/************************
		 Effect Registration
		 ************************//* Note: RegisterUI is a legacy name. */Velocity.RegisterEffect=Velocity.RegisterUI=function(effectName,properties){/* Animate the expansion/contraction of the elements' parent's height for In/Out effects. */function animateParentHeight(elements,direction,totalDuration,stagger){var totalHeightDelta=0,parentNode;/* Sum the total height (including padding and margin) of all targeted elements. */$.each(elements.nodeType?[elements]:elements,function(i,element){if(stagger){/* Increase the totalDuration by the successive delay amounts produced by the stagger option. */totalDuration+=i*stagger;}parentNode=element.parentNode;var propertiesToSum=["height","paddingTop","paddingBottom","marginTop","marginBottom"];/* If box-sizing is border-box, the height already includes padding and margin */if(Velocity.CSS.getPropertyValue(element,"boxSizing").toString().toLowerCase()==="border-box"){propertiesToSum=["height"];}$.each(propertiesToSum,function(i,property){totalHeightDelta+=parseFloat(Velocity.CSS.getPropertyValue(element,property));});});/* Animate the parent element's height adjustment (with a varying duration multiplier for aesthetic benefits). */Velocity.animate(parentNode,{height:(direction==="In"?"+":"-")+"="+totalHeightDelta},{queue:false,easing:"ease-in-out",duration:totalDuration*(direction==="In"?0.6:1)});}/* Register a custom redirect for each effect. */Velocity.Redirects[effectName]=function(element,redirectOptions,elementsIndex,elementsSize,elements,promiseData,loop){var finalElement=elementsIndex===elementsSize-1,totalDuration=0;loop=loop||properties.loop;if(typeof properties.defaultDuration==="function"){properties.defaultDuration=properties.defaultDuration.call(elements,elements);}else{properties.defaultDuration=parseFloat(properties.defaultDuration);}/* Get the total duration used, so we can share it out with everything that doesn't have a duration */for(var callIndex=0;callIndex<properties.calls.length;callIndex++){durationPercentage=properties.calls[callIndex][1];if(typeof durationPercentage==="number"){totalDuration+=durationPercentage;}}var shareDuration=totalDuration>=1?0:properties.calls.length?(1-totalDuration)/properties.calls.length:1;/* Iterate through each effect's call array. */for(callIndex=0;callIndex<properties.calls.length;callIndex++){var call=properties.calls[callIndex],propertyMap=call[0],redirectDuration=1000,durationPercentage=call[1],callOptions=call[2]||{},opts={};if(redirectOptions.duration!==undefined){redirectDuration=redirectOptions.duration;}else if(properties.defaultDuration!==undefined){redirectDuration=properties.defaultDuration;}/* Assign the whitelisted per-call options. */opts.duration=redirectDuration*(typeof durationPercentage==="number"?durationPercentage:shareDuration);opts.queue=redirectOptions.queue||"";opts.easing=callOptions.easing||"ease";opts.delay=parseFloat(callOptions.delay)||0;opts.loop=!properties.loop&&callOptions.loop;opts._cacheValues=callOptions._cacheValues||true;/* Special processing for the first effect call. */if(callIndex===0){/* If a delay was passed into the redirect, combine it with the first call's delay. */opts.delay+=parseFloat(redirectOptions.delay)||0;if(elementsIndex===0){opts.begin=function(){/* Only trigger a begin callback on the first effect call with the first element in the set. */if(redirectOptions.begin){redirectOptions.begin.call(elements,elements);}var direction=effectName.match(/(In|Out)$/);/* Make "in" transitioning elements invisible immediately so that there's no FOUC between now
								 and the first RAF tick. */if(direction&&direction[0]==="In"&&propertyMap.opacity!==undefined){$.each(elements.nodeType?[elements]:elements,function(i,element){Velocity.CSS.setPropertyValue(element,"opacity",0);});}/* Only trigger animateParentHeight() if we're using an In/Out transition. */if(redirectOptions.animateParentHeight&&direction){animateParentHeight(elements,direction[0],redirectDuration+opts.delay,redirectOptions.stagger);}};}/* If the user isn't overriding the display option, default to "auto" for "In"-suffixed transitions. */if(redirectOptions.display!==null){if(redirectOptions.display!==undefined&&redirectOptions.display!=="none"){opts.display=redirectOptions.display;}else if(/In$/.test(effectName)){/* Inline elements cannot be subjected to transforms, so we switch them to inline-block. */var defaultDisplay=Velocity.CSS.Values.getDisplayType(element);opts.display=defaultDisplay==="inline"?"inline-block":defaultDisplay;}}if(redirectOptions.visibility&&redirectOptions.visibility!=="hidden"){opts.visibility=redirectOptions.visibility;}}/* Special processing for the last effect call. */if(callIndex===properties.calls.length-1){/* Append promise resolving onto the user's redirect callback. */var injectFinalCallbacks=function injectFinalCallbacks(){if((redirectOptions.display===undefined||redirectOptions.display==="none")&&/Out$/.test(effectName)){$.each(elements.nodeType?[elements]:elements,function(i,element){Velocity.CSS.setPropertyValue(element,"display","none");});}if(redirectOptions.complete){redirectOptions.complete.call(elements,elements);}if(promiseData){promiseData.resolver(elements||element);}};opts.complete=function(){if(loop){Velocity.Redirects[effectName](element,redirectOptions,elementsIndex,elementsSize,elements,promiseData,loop===true?true:Math.max(0,loop-1));}if(properties.reset){for(var resetProperty in properties.reset){if(!properties.reset.hasOwnProperty(resetProperty)){continue;}var resetValue=properties.reset[resetProperty];/* Format each non-array value in the reset property map to [ value, value ] so that changes apply
									 immediately and DOM querying is avoided (via forcefeeding). *//* Note: Don't forcefeed hooks, otherwise their hook roots will be defaulted to their null values. */if(Velocity.CSS.Hooks.registered[resetProperty]===undefined&&(typeof resetValue==="string"||typeof resetValue==="number")){properties.reset[resetProperty]=[properties.reset[resetProperty],properties.reset[resetProperty]];}}/* So that the reset values are applied instantly upon the next rAF tick, use a zero duration and parallel queueing. */var resetOptions={duration:0,queue:false};/* Since the reset option uses up the complete callback, we trigger the user's complete callback at the end of ours. */if(finalElement){resetOptions.complete=injectFinalCallbacks;}Velocity.animate(element,properties.reset,resetOptions);/* Only trigger the user's complete callback on the last effect call with the last element in the set. */}else if(finalElement){injectFinalCallbacks();}};if(redirectOptions.visibility==="hidden"){opts.visibility=redirectOptions.visibility;}}Velocity.animate(element,propertyMap,opts);}};/* Return the Velocity object so that RegisterUI calls can be chained. */return Velocity;};/*********************
		 Packaged Effects
		 *********************//* Externalize the packagedEffects data so that they can optionally be modified and re-registered. *//* Support: <=IE8: Callouts will have no effect, and transitions will simply fade in/out. IE9/Android 2.3: Most effects are fully supported, the rest fade in/out. All other browsers: full support. */Velocity.RegisterEffect.packagedEffects={/* Animate.css */"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},0.25],[{translateY:0},0.125],[{translateY:-15},0.125],[{translateY:0},0.25]]},/* Animate.css */"callout.shake":{defaultDuration:800,calls:[[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:0}]]},/* Animate.css */"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]}],[{opacity:[1,"easeInOutQuad"]}],[{opacity:[0,"easeInOutQuad"]}],[{opacity:[1,"easeInOutQuad"]}]]},/* Animate.css */"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},0.50,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},0.50]]},/* Animate.css */"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15}],[{rotateZ:-10}],[{rotateZ:5}],[{rotateZ:-5}],[{rotateZ:0}]]},/* Animate.css */"callout.tada":{defaultDuration:1000,calls:[[{scaleX:0.9,scaleY:0.9,rotateZ:-3},0.10],[{scaleX:1.1,scaleY:1.1,rotateZ:3},0.10],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},0.10],["reverse",0.125],["reverse",0.125],["reverse",0.125],["reverse",0.125],["reverse",0.125],[{scaleX:1,scaleY:1,rotateZ:0},0.20]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},/* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},/* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},/* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},/* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},/* Animate.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[0.725,0],transformPerspective:[400,400],rotateY:[-10,90]},0.50],[{opacity:0.80,rotateY:10},0.25],[{opacity:1,rotateY:0},0.25]],reset:{transformPerspective:0}},/* Animate.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[0.9,1],transformPerspective:[400,400],rotateY:-10}],[{opacity:0,rotateY:90}]],reset:{transformPerspective:0,rotateY:0}},/* Animate.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[0.725,0],transformPerspective:[400,400],rotateX:[-10,90]},0.50],[{opacity:0.80,rotateX:10},0.25],[{opacity:1,rotateX:0},0.25]],reset:{transformPerspective:0}},/* Animate.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[0.9,1],transformPerspective:[400,400],rotateX:-15}],[{opacity:0,rotateX:90}]],reset:{transformPerspective:0,rotateX:0}},/* Magic.css */"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},/* Magic.css */"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3. (Fades and scales only.) */"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3. (Fades and scales only.) */"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0.625],scaleY:[1,0.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0.5,scaleY:0.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},/* Animate.css */"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,0.3],scaleY:[1.05,0.3]},0.35],[{scaleX:0.9,scaleY:0.9,translateZ:0},0.20],[{scaleX:1,scaleY:1},0.45]]},/* Animate.css */"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:0.95,scaleY:0.95},0.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},0.35],[{opacity:[0,1],scaleX:0.3,scaleY:0.3},0.30]],reset:{scaleX:1,scaleY:1}},/* Animate.css */"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1000]},0.60,{easing:"easeOutCirc"}],[{translateY:10},0.20],[{translateY:0},0.20]]},/* Animate.css */"transition.bounceUpOut":{defaultDuration:1000,calls:[[{translateY:20},0.20],[{opacity:[0,"easeInCirc",1],translateY:-1000},0.80]],reset:{translateY:0}},/* Animate.css */"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1000]},0.60,{easing:"easeOutCirc"}],[{translateY:-10},0.20],[{translateY:0},0.20]]},/* Animate.css */"transition.bounceDownOut":{defaultDuration:1000,calls:[[{translateY:-20},0.20],[{opacity:[0,"easeInCirc",1],translateY:1000},0.80]],reset:{translateY:0}},/* Animate.css */"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},0.60,{easing:"easeOutCirc"}],[{translateX:-10},0.20],[{translateX:0},0.20]]},/* Animate.css */"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},0.20],[{opacity:[0,"easeInCirc",1],translateX:-1250},0.80]],reset:{translateX:0}},/* Animate.css */"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},0.60,{easing:"easeOutCirc"}],[{translateX:10},0.20],[{translateX:0},0.20]]},/* Animate.css */"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},0.20],[{opacity:[0,"easeInCirc",1],translateX:1250},0.80]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1000,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1000,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},/* Magic.css */"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2000,2000],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2000,2000],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2000,2000],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},/* Magic.css *//* Support: Loses rotation in IE9/Android 2.3 (fades only). */"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2000,2000],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}};/* Register the packaged effects. */for(var effectName in Velocity.RegisterEffect.packagedEffects){if(Velocity.RegisterEffect.packagedEffects.hasOwnProperty(effectName)){Velocity.RegisterEffect(effectName,Velocity.RegisterEffect.packagedEffects[effectName]);}}/*********************
		 Sequence Running
		 **********************//* Note: Sequence calls must use Velocity's single-object arguments syntax. */Velocity.RunSequence=function(originalSequence){var sequence=$.extend(true,[],originalSequence);if(sequence.length>1){$.each(sequence.reverse(),function(i,currentCall){var nextCall=sequence[i+1];if(nextCall){/* Parallel sequence calls (indicated via sequenceQueue:false) are triggered
						 in the previous call's begin callback. Otherwise, chained calls are normally triggered
						 in the previous call's complete callback. */var currentCallOptions=currentCall.o||currentCall.options,nextCallOptions=nextCall.o||nextCall.options;var timing=currentCallOptions&&currentCallOptions.sequenceQueue===false?"begin":"complete",callbackOriginal=nextCallOptions&&nextCallOptions[timing],options={};options[timing]=function(){var nextCallElements=nextCall.e||nextCall.elements;var elements=nextCallElements.nodeType?[nextCallElements]:nextCallElements;if(callbackOriginal){callbackOriginal.call(elements,elements);}Velocity(currentCall);};if(nextCall.o){nextCall.o=$.extend({},nextCallOptions,options);}else{nextCall.options=$.extend({},nextCallOptions,options);}}});sequence.reverse();}Velocity(sequence[0]);};}(window.jQuery||window.Zepto||window,window,window?window.document:undefined);});;if(!Array.prototype.find){Object.defineProperty(Array.prototype,'find',{value:function value(predicate){// 1. Let O be ? ToObject(this value).
if(this==null){throw new TypeError('"this" is null or not defined');}var o=Object(this);// 2. Let len be ? ToLength(? Get(O, "length")).
var len=o.length>>>0;// 3. If IsCallable(predicate) is false, throw a TypeError exception.
if(typeof predicate!=='function'){throw new TypeError('predicate must be a function');}// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
var thisArg=arguments[1];// 5. Let k be 0.
var k=0;// 6. Repeat, while k < len
while(k<len){// a. Let Pk be ! ToString(k).
// b. Let kValue be ? Get(O, Pk).
// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).
// d. If testResult is true, return kValue.
var kValue=o[k];if(predicate.call(thisArg,kValue,k,o)){return kValue;}// e. Increase k by 1.
k++;}// 7. Return undefined.
return undefined;}});}if(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,'findIndex',{value:function value(predicate){// 1. Let O be ? ToObject(this value).
if(this==null){throw new TypeError('"this" is null or not defined');}var o=Object(this);// 2. Let len be ? ToLength(? Get(O, "length")).
var len=o.length>>>0;// 3. If IsCallable(predicate) is false, throw a TypeError exception.
if(typeof predicate!=='function'){throw new TypeError('predicate must be a function');}// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
var thisArg=arguments[1];// 5. Let k be 0.
var k=0;// 6. Repeat, while k < len
while(k<len){// a. Let Pk be ! ToString(k).
// b. Let kValue be ? Get(O, Pk).
// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).
// d. If testResult is true, return k.
var kValue=o[k];if(predicate.call(thisArg,kValue,k,o)){return k;}// e. Increase k by 1.
k++;}// 7. Return -1.
return-1;}});}// Production steps of ECMA-262, Edition 5, 15.4.4.19
// Reference: http://es5.github.io/#x15.4.4.19
if(!Array.prototype.map){Array.prototype.map=function(callback/*, thisArg*/){var T,A,k;if(this==null){throw new TypeError('this is null or not defined');}// 1. Let O be the result of calling ToObject passing the |this|
//    value as the argument.
var O=Object(this);// 2. Let lenValue be the result of calling the Get internal
//    method of O with the argument "length".
// 3. Let len be ToUint32(lenValue).
var len=O.length>>>0;// 4. If IsCallable(callback) is false, throw a TypeError exception.
// See: http://es5.github.com/#x9.11
if(typeof callback!=='function'){throw new TypeError(callback+' is not a function');}// 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
if(arguments.length>1){T=arguments[1];}// 6. Let A be a new array created as if by the expression new Array(len)
//    where Array is the standard built-in constructor with that name and
//    len is the value of len.
A=new Array(len);// 7. Let k be 0
k=0;// 8. Repeat, while k < len
while(k<len){var kValue,mappedValue;// a. Let Pk be ToString(k).
//   This is implicit for LHS operands of the in operator
// b. Let kPresent be the result of calling the HasProperty internal
//    method of O with argument Pk.
//   This step can be combined with c
// c. If kPresent is true, then
if(k in O){// i. Let kValue be the result of calling the Get internal
//    method of O with argument Pk.
kValue=O[k];// ii. Let mappedValue be the result of calling the Call internal
//     method of callback with T as the this value and argument
//     list containing kValue, k, and O.
mappedValue=callback.call(T,kValue,k,O);// iii. Call the DefineOwnProperty internal method of A with arguments
// Pk, Property Descriptor
// { Value: mappedValue,
//   Writable: true,
//   Enumerable: true,
//   Configurable: true },
// and false.
// In browsers that support Object.defineProperty, use the following:
// Object.defineProperty(A, k, {
//   value: mappedValue,
//   writable: true,
//   enumerable: true,
//   configurable: true
// });
// For best browser support, use the following:
A[k]=mappedValue;}// d. Increase k by 1.
k++;}// 9. return A
return A;};};(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}return n[o].exports;}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o]);}return s;})({1:[function(require,module,exports){"use strict";var asap=require("asap/raw");function noop(){}var LAST_ERROR=null;var IS_ERROR={};function getThen(obj){try{return obj.then;}catch(ex){LAST_ERROR=ex;return IS_ERROR;}}function tryCallOne(fn,a){try{return fn(a);}catch(ex){LAST_ERROR=ex;return IS_ERROR;}}function tryCallTwo(fn,a,b){try{fn(a,b);}catch(ex){LAST_ERROR=ex;return IS_ERROR;}}module.exports=Promise;function Promise(fn){if(_typeof2(this)!=="object"){throw new TypeError("Promises must be constructed via new");}if(typeof fn!=="function"){throw new TypeError("not a function");}this._37=0;this._12=null;this._59=[];if(fn===noop)return;doResolve(fn,this);}Promise._99=noop;Promise.prototype.then=function(onFulfilled,onRejected){if(this.constructor!==Promise){return safeThen(this,onFulfilled,onRejected);}var res=new Promise(noop);handle(this,new Handler(onFulfilled,onRejected,res));return res;};function safeThen(self,onFulfilled,onRejected){return new self.constructor(function(resolve,reject){var res=new Promise(noop);res.then(resolve,reject);handle(self,new Handler(onFulfilled,onRejected,res));});}function handle(self,deferred){while(self._37===3){self=self._12;}if(self._37===0){self._59.push(deferred);return;}asap(function(){var cb=self._37===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){if(self._37===1){resolve(deferred.promise,self._12);}else{reject(deferred.promise,self._12);}return;}var ret=tryCallOne(cb,self._12);if(ret===IS_ERROR){reject(deferred.promise,LAST_ERROR);}else{resolve(deferred.promise,ret);}});}function resolve(self,newValue){if(newValue===self){return reject(self,new TypeError("A promise cannot be resolved with itself."));}if(newValue&&((typeof newValue==="undefined"?"undefined":_typeof2(newValue))==="object"||typeof newValue==="function")){var then=getThen(newValue);if(then===IS_ERROR){return reject(self,LAST_ERROR);}if(then===self.then&&newValue instanceof Promise){self._37=3;self._12=newValue;finale(self);return;}else if(typeof then==="function"){doResolve(then.bind(newValue),self);return;}}self._37=1;self._12=newValue;finale(self);}function reject(self,newValue){self._37=2;self._12=newValue;finale(self);}function finale(self){for(var i=0;i<self._59.length;i++){handle(self,self._59[i]);}self._59=null;}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.promise=promise;}function doResolve(fn,promise){var done=false;var res=tryCallTwo(fn,function(value){if(done)return;done=true;resolve(promise,value);},function(reason){if(done)return;done=true;reject(promise,reason);});if(!done&&res===IS_ERROR){done=true;reject(promise,LAST_ERROR);}}},{"asap/raw":4}],2:[function(require,module,exports){"use strict";var Promise=require("./core.js");module.exports=Promise;var TRUE=valuePromise(true);var FALSE=valuePromise(false);var NULL=valuePromise(null);var UNDEFINED=valuePromise(undefined);var ZERO=valuePromise(0);var EMPTYSTRING=valuePromise("");function valuePromise(value){var p=new Promise(Promise._99);p._37=1;p._12=value;return p;}Promise.resolve=function(value){if(value instanceof Promise)return value;if(value===null)return NULL;if(value===undefined)return UNDEFINED;if(value===true)return TRUE;if(value===false)return FALSE;if(value===0)return ZERO;if(value==="")return EMPTYSTRING;if((typeof value==="undefined"?"undefined":_typeof2(value))==="object"||typeof value==="function"){try{var then=value.then;if(typeof then==="function"){return new Promise(then.bind(value));}}catch(ex){return new Promise(function(resolve,reject){reject(ex);});}}return valuePromise(value);};Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){if(val&&((typeof val==="undefined"?"undefined":_typeof2(val))==="object"||typeof val==="function")){if(val instanceof Promise&&val.then===Promise.prototype.then){while(val._37===3){val=val._12;}if(val._37===1)return res(i,val._12);if(val._37===2)reject(val._12);val.then(function(val){res(i,val);},reject);return;}else{var then=val.then;if(typeof then==="function"){var p=new Promise(then.bind(val));p.then(function(val){res(i,val);},reject);return;}}}args[i]=val;if(--remaining===0){resolve(args);}}for(var i=0;i<args.length;i++){res(i,args[i]);}});};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value);});};Promise.race=function(values){return new Promise(function(resolve,reject){values.forEach(function(value){Promise.resolve(value).then(resolve,reject);});});};Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected);};},{"./core.js":1}],3:[function(require,module,exports){"use strict";var rawAsap=require("./raw");var freeTasks=[];var pendingErrors=[];var requestErrorThrow=rawAsap.makeRequestCallFromTimer(throwFirstError);function throwFirstError(){if(pendingErrors.length){throw pendingErrors.shift();}}module.exports=asap;function asap(task){var rawTask;if(freeTasks.length){rawTask=freeTasks.pop();}else{rawTask=new RawTask();}rawTask.task=task;rawAsap(rawTask);}function RawTask(){this.task=null;}RawTask.prototype.call=function(){try{this.task.call();}catch(error){if(asap.onerror){asap.onerror(error);}else{pendingErrors.push(error);requestErrorThrow();}}finally{this.task=null;freeTasks[freeTasks.length]=this;}};},{"./raw":4}],4:[function(require,module,exports){(function(global){"use strict";module.exports=rawAsap;function rawAsap(task){if(!queue.length){requestFlush();flushing=true;}queue[queue.length]=task;}var queue=[];var flushing=false;var requestFlush;var index=0;var capacity=1024;function flush(){while(index<queue.length){var currentIndex=index;index=index+1;queue[currentIndex].call();if(index>capacity){for(var scan=0,newLength=queue.length-index;scan<newLength;scan++){queue[scan]=queue[scan+index];}queue.length-=index;index=0;}}queue.length=0;index=0;flushing=false;}var BrowserMutationObserver=global.MutationObserver||global.WebKitMutationObserver;if(typeof BrowserMutationObserver==="function"){requestFlush=makeRequestCallFromMutationObserver(flush);}else{requestFlush=makeRequestCallFromTimer(flush);}rawAsap.requestFlush=requestFlush;function makeRequestCallFromMutationObserver(callback){var toggle=1;var observer=new BrowserMutationObserver(callback);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function requestCall(){toggle=-toggle;node.data=toggle;};}function makeRequestCallFromTimer(callback){return function requestCall(){var timeoutHandle=setTimeout(handleTimer,0);var intervalHandle=setInterval(handleTimer,50);function handleTimer(){clearTimeout(timeoutHandle);clearInterval(intervalHandle);callback();}};}rawAsap.makeRequestCallFromTimer=makeRequestCallFromTimer;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],5:[function(require,module,exports){if(typeof Promise.prototype.done!=="function"){Promise.prototype.done=function(onFulfilled,onRejected){var self=arguments.length?this.then.apply(this,arguments):this;self.then(null,function(err){setTimeout(function(){throw err;},0);});};}},{}],6:[function(require,module,exports){var asap=require("asap");if(typeof Promise==="undefined"){Promise=require("./lib/core.js");require("./lib/es6-extensions.js");}require("./polyfill-done.js");},{"./lib/core.js":1,"./lib/es6-extensions.js":2,"./polyfill-done.js":5,asap:3}]},{},[6]);//# sourceMappingURL=/polyfills/promise-7.0.4.js.map;
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=b();}):"object"==(typeof module==="undefined"?"undefined":_typeof2(module))&&module.exports?module.exports=b():a.svg4everybody=b();}(this,function(){function a(a,b,c){if(c){var d=document.createDocumentFragment(),e=!b.hasAttribute("viewBox")&&c.getAttribute("viewBox");e&&b.setAttribute("viewBox",e);for(var f=c.cloneNode(!0);f.childNodes.length;){d.appendChild(f.firstChild);}a.appendChild(d);}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.parent,d.svg,e);});}},b.onreadystatechange();}function c(c){function e(){for(var c=0;c<o.length;){var h=o[c],i=h.parentNode,j=d(i),k=h.getAttribute("xlink:href")||h.getAttribute("href");if(!k&&g.attributeName&&(k=h.getAttribute(g.attributeName)),j&&k){if(f)if(!g.validate||g.validate(k,j,h)){i.removeChild(h);var l=k.split("#"),q=l.shift(),r=l.join("#");if(q.length){var s=m[q];s||(s=m[q]=new XMLHttpRequest(),s.open("GET",q),s.send(),s._embeds=[]),s._embeds.push({parent:i,svg:j,id:r}),b(s);}else a(i,j,document.getElementById(r));}else++c,++p;}else++c;}(!o.length||o.length-p>0)&&n(e,67);}var f,g=Object(c),h=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,i=/\bAppleWebKit\/(\d+)\b/,j=/\bEdge\/12\.(\d+)\b/,k=/\bEdge\/.(\d+)\b/,l=window.top!==window.self;f="polyfill"in g?g.polyfill:h.test(navigator.userAgent)||(navigator.userAgent.match(j)||[])[1]<10547||(navigator.userAgent.match(i)||[])[1]<537||k.test(navigator.userAgent)&&l;var m={},n=window.requestAnimationFrame||setTimeout,o=document.getElementsByTagName("use"),p=0;f&&e();}function d(a){for(var b=a;"svg"!==b.nodeName.toLowerCase()&&(b=b.parentNode);){}return b;}return c;});;/*! loadCSS. [c]2017 Filament Group, Inc. MIT License *//* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/(function(w){"use strict";// rel=preload support test
if(!w.loadCSS){w.loadCSS=function(){};}// define on the loadCSS obj
var rp=loadCSS.relpreload={};// rel=preload feature support test
// runs once and returns a function for compat purposes
rp.support=function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload");}catch(e){ret=false;}return function(){return ret;};}();// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
// then change that media back to its intended value on load
rp.bindMediaToggle=function(link){// remember existing media attr for ultimate state, or default to 'all'
var finalMedia=link.media||"all";function enableStylesheet(){link.media=finalMedia;}// bind load handlers to enable media
if(link.addEventListener){link.addEventListener("load",enableStylesheet);}else if(link.attachEvent){link.attachEvent("onload",enableStylesheet);}// Set rel and non-applicable media type to start an async request
// note: timeout allows this to happen async to let rendering continue in IE
setTimeout(function(){link.rel="stylesheet";link.media="only x";});// also enable media after 3 seconds,
// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
setTimeout(enableStylesheet,3000);};// loop through link elements in DOM
rp.poly=function(){// double check this to prevent external calls from running
if(rp.support()){return;}var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];// qualify links to those with rel=preload and as=style attrs
if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){// prevent rerunning on link
link.setAttribute("data-loadcss",true);// bind listeners to toggle media back
rp.bindMediaToggle(link);}}};// if unsupported, run the polyfill
if(!rp.support()){// run once at least
rp.poly();// rerun poly on an interval until onload
var run=w.setInterval(rp.poly,500);if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run);});}else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run);});}}// commonjs
if(typeof exports!=="undefined"){exports.loadCSS=loadCSS;}else{w.loadCSS=loadCSS;}})(typeof global!=="undefined"?global:this);;// https://unmanner.github.io/imaskjs/
(function(global,factory){(typeof exports==="undefined"?"undefined":_typeof2(exports))==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.IMask=factory();})(this,function(){'use strict';// 7.2.1 RequireObjectCoercible(argument)
var _defined=function _defined(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it;};// 7.1.13 ToObject(argument)
var _toObject=function _toObject(it){return Object(_defined(it));};var hasOwnProperty={}.hasOwnProperty;var _has=function _has(it,key){return hasOwnProperty.call(it,key);};var toString={}.toString;var _cof=function _cof(it){return toString.call(it).slice(8,-1);};// fallback for non-array-like ES3 and non-enumerable old V8 strings
// eslint-disable-next-line no-prototype-builtins
var _iobject=Object('z').propertyIsEnumerable(0)?Object:function(it){return _cof(it)=='String'?it.split(''):Object(it);};// to indexed object, toObject with fallback for non-array-like ES3 strings
var _toIobject=function _toIobject(it){return _iobject(_defined(it));};// 7.1.4 ToInteger
var ceil=Math.ceil;var floor=Math.floor;var _toInteger=function _toInteger(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it);};// 7.1.15 ToLength
var min=Math.min;var _toLength=function _toLength(it){return it>0?min(_toInteger(it),0x1fffffffffffff):0;// pow(2, 53) - 1 == 9007199254740991
};var max=Math.max;var min$1=Math.min;var _toAbsoluteIndex=function _toAbsoluteIndex(index,length){index=_toInteger(index);return index<0?max(index+length,0):min$1(index,length);};// false -> Array#indexOf
// true  -> Array#includes
var _arrayIncludes=function _arrayIncludes(IS_INCLUDES){return function($this,el,fromIndex){var O=_toIobject($this);var length=_toLength(O.length);var index=_toAbsoluteIndex(fromIndex,length);var value;// Array#includes uses SameValueZero equality algorithm
// eslint-disable-next-line no-self-compare
if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];// eslint-disable-next-line no-self-compare
if(value!=value)return true;// Array#indexOf ignores holes, Array#includes - not
}else for(;length>index;index++){if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0;}}return!IS_INCLUDES&&-1;};};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports;}var _global=createCommonjsModule(function(module){// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global=module.exports=typeof window!='undefined'&&window.Math==Math?window:typeof self!='undefined'&&self.Math==Math?self// eslint-disable-next-line no-new-func
:Function('return this')();if(typeof __g=='number')__g=global;// eslint-disable-line no-undef
});var SHARED='__core-js_shared__';var store=_global[SHARED]||(_global[SHARED]={});var _shared=function _shared(key){return store[key]||(store[key]={});};var id=0;var px=Math.random();var _uid=function _uid(key){return'Symbol('.concat(key===undefined?'':key,')_',(++id+px).toString(36));};var shared=_shared('keys');var _sharedKey=function _sharedKey(key){return shared[key]||(shared[key]=_uid(key));};var arrayIndexOf=_arrayIncludes(false);var IE_PROTO=_sharedKey('IE_PROTO');var _objectKeysInternal=function _objectKeysInternal(object,names){var O=_toIobject(object);var i=0;var result=[];var key;for(key in O){if(key!=IE_PROTO)_has(O,key)&&result.push(key);}// Don't enum bug & hidden keys
while(names.length>i){if(_has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key);}}return result;};// IE 8- don't enum bug keys
var _enumBugKeys='constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',');// 19.1.2.14 / 15.2.3.14 Object.keys(O)
var _objectKeys=Object.keys||function keys(O){return _objectKeysInternal(O,_enumBugKeys);};var _core=createCommonjsModule(function(module){var core=module.exports={version:'2.5.5'};if(typeof __e=='number')__e=core;// eslint-disable-line no-undef
});var _core_1=_core.version;var _isObject=function _isObject(it){return(typeof it==="undefined"?"undefined":_typeof2(it))==='object'?it!==null:typeof it==='function';};var _anObject=function _anObject(it){if(!_isObject(it))throw TypeError(it+' is not an object!');return it;};var _fails=function _fails(exec){try{return!!exec();}catch(e){return true;}};// Thank's IE8 for his funny defineProperty
var _descriptors=!_fails(function(){return Object.defineProperty({},'a',{get:function get(){return 7;}}).a!=7;});var document$1=_global.document;// typeof document.createElement is 'object' in old IE
var is=_isObject(document$1)&&_isObject(document$1.createElement);var _domCreate=function _domCreate(it){return is?document$1.createElement(it):{};};var _ie8DomDefine=!_descriptors&&!_fails(function(){return Object.defineProperty(_domCreate('div'),'a',{get:function get(){return 7;}}).a!=7;});// 7.1.1 ToPrimitive(input [, PreferredType])
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
var _toPrimitive=function _toPrimitive(it,S){if(!_isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=='function'&&!_isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=='function'&&!_isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=='function'&&!_isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value");};var dP=Object.defineProperty;var f=_descriptors?Object.defineProperty:function defineProperty(O,P,Attributes){_anObject(O);P=_toPrimitive(P,true);_anObject(Attributes);if(_ie8DomDefine)try{return dP(O,P,Attributes);}catch(e){/* empty */}if('get'in Attributes||'set'in Attributes)throw TypeError('Accessors not supported!');if('value'in Attributes)O[P]=Attributes.value;return O;};var _objectDp={f:f};var _propertyDesc=function _propertyDesc(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value};};var _hide=_descriptors?function(object,key,value){return _objectDp.f(object,key,_propertyDesc(1,value));}:function(object,key,value){object[key]=value;return object;};var _redefine=createCommonjsModule(function(module){var SRC=_uid('src');var TO_STRING='toString';var $toString=Function[TO_STRING];var TPL=(''+$toString).split(TO_STRING);_core.inspectSource=function(it){return $toString.call(it);};(module.exports=function(O,key,val,safe){var isFunction=typeof val=='function';if(isFunction)_has(val,'name')||_hide(val,'name',key);if(O[key]===val)return;if(isFunction)_has(val,SRC)||_hide(val,SRC,O[key]?''+O[key]:TPL.join(String(key)));if(O===_global){O[key]=val;}else if(!safe){delete O[key];_hide(O,key,val);}else if(O[key]){O[key]=val;}else{_hide(O,key,val);}// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype,TO_STRING,function toString(){return typeof this=='function'&&this[SRC]||$toString.call(this);});});var _aFunction=function _aFunction(it){if(typeof it!='function')throw TypeError(it+' is not a function!');return it;};// optional / simple context binding
var _ctx=function _ctx(fn,that,length){_aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a);};case 2:return function(a,b){return fn.call(that,a,b);};case 3:return function(a,b,c){return fn.call(that,a,b,c);};}return function()/* ...args */{return fn.apply(that,arguments);};};var PROTOTYPE='prototype';var $export=function $export(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var target=IS_GLOBAL?_global:IS_STATIC?_global[name]||(_global[name]={}):(_global[name]||{})[PROTOTYPE];var exports=IS_GLOBAL?_core:_core[name]||(_core[name]={});var expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={});var key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){// contains in native
own=!IS_FORCED&&target&&target[key]!==undefined;// export native or passed
out=(own?target:source)[key];// bind timers to global for call from export context
exp=IS_BIND&&own?_ctx(out,_global):IS_PROTO&&typeof out=='function'?_ctx(Function.call,out):out;// extend global
if(target)_redefine(target,key,out,type&$export.U);// export
if(exports[key]!=out)_hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out;}};_global.core=_core;// type bitmap
$export.F=1;// forced
$export.G=2;// global
$export.S=4;// static
$export.P=8;// proto
$export.B=16;// bind
$export.W=32;// wrap
$export.U=64;// safe
$export.R=128;// real proto method for `library`
var _export=$export;// most Object methods by ES6 should accept primitives
var _objectSap=function _objectSap(KEY,exec){var fn=(_core.Object||{})[KEY]||Object[KEY];var exp={};exp[KEY]=exec(fn);_export(_export.S+_export.F*_fails(function(){fn(1);}),'Object',exp);};// 19.1.2.14 Object.keys(O)
_objectSap('keys',function(){return function keys(it){return _objectKeys(_toObject(it));};});var keys=_core.Object.keys;var _stringRepeat=function repeat(count){var str=String(_defined(this));var res='';var n=_toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str)){if(n&1)res+=str;}return res;};_export(_export.P,'String',{// 21.1.3.13 String.prototype.repeat(count)
repeat:_stringRepeat});var repeat=_core.String.repeat;// https://github.com/tc39/proposal-string-pad-start-end
var _stringPad=function _stringPad(that,maxLength,fillString,left){var S=String(_defined(that));var stringLength=S.length;var fillStr=fillString===undefined?' ':String(fillString);var intMaxLength=_toLength(maxLength);if(intMaxLength<=stringLength||fillStr=='')return S;var fillLen=intMaxLength-stringLength;var stringFiller=_stringRepeat.call(fillStr,Math.ceil(fillLen/fillStr.length));if(stringFiller.length>fillLen)stringFiller=stringFiller.slice(0,fillLen);return left?stringFiller+S:S+stringFiller;};var navigator=_global.navigator;var _userAgent=navigator&&navigator.userAgent||'';// https://github.com/tc39/proposal-string-pad-start-end
// https://github.com/zloirock/core-js/issues/280
_export(_export.P+_export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(_userAgent),'String',{padStart:function padStart(maxLength/* , fillString = ' ' */){return _stringPad(this,maxLength,arguments.length>1?arguments[1]:undefined,true);}});var padStart=_core.String.padStart;// https://github.com/tc39/proposal-string-pad-start-end
// https://github.com/zloirock/core-js/issues/280
_export(_export.P+_export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(_userAgent),'String',{padEnd:function padEnd(maxLength/* , fillString = ' ' */){return _stringPad(this,maxLength,arguments.length>1?arguments[1]:undefined,false);}});var padEnd=_core.String.padEnd;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _possibleConstructorReturn(self,call){if(call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function set(target,property,value,receiver){if(typeof Reflect!=="undefined"&&Reflect.set){set=Reflect.set;}else{set=function set(target,property,value,receiver){var base=_superPropBase(target,property);var desc;if(base){desc=Object.getOwnPropertyDescriptor(base,property);if(desc.set){desc.set.call(receiver,value);return true;}else if(!desc.writable){return false;}}desc=Object.getOwnPropertyDescriptor(receiver,property);if(desc){if(!desc.writable){return false;}desc.value=value;Object.defineProperty(receiver,property,desc);}else{_defineProperty(receiver,property,value);}return true;};}return set(target,property,value,receiver);}function _set(target,property,value,receiver,isStrict){var s=set(target,property,value,receiver||target);if(!s&&isStrict){throw new Error('failed to set property');}return value;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}/** Checks if value is string */function isString(str){return typeof str==='string'||str instanceof String;}/**
    Direction
    @prop {string} NONE
    @prop {string} LEFT
    @prop {string} FORCE_LEFT
    @prop {string} RIGHT
    @prop {string} FORCE_RIGHT
  */var DIRECTION={NONE:'NONE',LEFT:'LEFT',FORCE_LEFT:'FORCE_LEFT',RIGHT:'RIGHT',FORCE_RIGHT:'FORCE_RIGHT'/**
      Direction
      @enum {string}
    */};/** Returns next char index in direction */function indexInDirection(pos,direction){if(direction===DIRECTION.LEFT)--pos;return pos;}/** Returns next char position in direction */function posInDirection(pos,direction){switch(direction){case DIRECTION.LEFT:return--pos;case DIRECTION.RIGHT:case DIRECTION.FORCE_RIGHT:return++pos;default:return pos;}}/** */function forceDirection(direction){switch(direction){case DIRECTION.LEFT:return DIRECTION.FORCE_LEFT;case DIRECTION.RIGHT:return DIRECTION.FORCE_RIGHT;default:return direction;}}/** Escapes regular expression control chars */function escapeRegExp(str){return str.replace(/([.*+?^=!:${}()|[\]/\\])/g,'\\$1');}// cloned from https://github.com/epoberezkin/fast-deep-equal with small changes
function objectIncludes(b,a){if(a===b)return true;var arrA=Array.isArray(a),arrB=Array.isArray(b),i;if(arrA&&arrB){if(a.length!=b.length)return false;for(i=0;i<a.length;i++){if(!objectIncludes(a[i],b[i]))return false;}return true;}if(arrA!=arrB)return false;if(a&&b&&_typeof(a)==='object'&&_typeof(b)==='object'){var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA&&dateB)return a.getTime()==b.getTime();if(dateA!=dateB)return false;var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA&&regexpB)return a.toString()==b.toString();if(regexpA!=regexpB)return false;var keys=Object.keys(a);// if (keys.length !== Object.keys(b).length) return false;
for(i=0;i<keys.length;i++){if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return false;}for(i=0;i<keys.length;i++){if(!objectIncludes(b[keys[i]],a[keys[i]]))return false;}return true;}return false;}/* eslint-disable no-undef */var g=typeof window!=='undefined'&&window||typeof global!=='undefined'&&global.global===global&&global||typeof self!=='undefined'&&self.self===self&&self||{};/* eslint-enable no-undef *//** Selection range *//** Provides details of changing input */var ActionDetails=/*#__PURE__*/function(){/** Current input value *//** Current cursor position *//** Old input value *//** Old selection */function ActionDetails(value,cursorPos,oldValue,oldSelection){_classCallCheck(this,ActionDetails);this.value=value;this.cursorPos=cursorPos;this.oldValue=oldValue;this.oldSelection=oldSelection;// double check if left part was changed (autofilling, other non-standard input triggers)
while(this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos)){--this.oldSelection.start;}}/**
      Start changing position
      @readonly
    */_createClass(ActionDetails,[{key:"startChangePos",get:function get(){return Math.min(this.cursorPos,this.oldSelection.start);}/**
        Inserted symbols count
        @readonly
      */},{key:"insertedCount",get:function get(){return this.cursorPos-this.startChangePos;}/**
        Inserted symbols
        @readonly
      */},{key:"inserted",get:function get(){return this.value.substr(this.startChangePos,this.insertedCount);}/**
        Removed symbols count
        @readonly
      */},{key:"removedCount",get:function get(){// Math.max for opposite operation
return Math.max(this.oldSelection.end-this.startChangePos||// for Delete
this.oldValue.length-this.value.length,0);}/**
        Removed symbols
        @readonly
      */},{key:"removed",get:function get(){return this.oldValue.substr(this.startChangePos,this.removedCount);}/**
        Unchanged head symbols
        @readonly
      */},{key:"head",get:function get(){return this.value.substring(0,this.startChangePos);}/**
        Unchanged tail symbols
        @readonly
      */},{key:"tail",get:function get(){return this.value.substring(this.startChangePos+this.insertedCount);}/**
        Remove direction
        @readonly
      */},{key:"removeDirection",get:function get(){if(!this.removedCount||this.insertedCount)return DIRECTION.NONE;// align right if delete at right or if range removed (event with backspace)
return this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos?DIRECTION.RIGHT:DIRECTION.LEFT;}}]);return ActionDetails;}();/**
    Provides details of changing model value
    @param {Object} [details]
    @param {string} [details.inserted] - Inserted symbols
    @param {boolean} [details.skip] - Can skip chars
    @param {number} [details.removeCount] - Removed symbols count
    @param {number} [details.tailShift] - Additional offset if any changes occurred before tail
  */var ChangeDetails=/*#__PURE__*/function(){/** Inserted symbols *//** Can skip chars *//** Additional offset if any changes occurred before tail *//** Raw inserted is used by dynamic mask */function ChangeDetails(details){_classCallCheck(this,ChangeDetails);_extends(this,{inserted:'',rawInserted:'',skip:false,tailShift:0},details);}/**
      Aggregate changes
      @returns {ChangeDetails} `this`
    */_createClass(ChangeDetails,[{key:"aggregate",value:function aggregate(details){this.rawInserted+=details.rawInserted;this.skip=this.skip||details.skip;this.inserted+=details.inserted;this.tailShift+=details.tailShift;return this;}/** Total offset considering all changes */},{key:"offset",get:function get(){return this.tailShift+this.inserted.length;}}]);return ChangeDetails;}();/** Provides common masking stuff */var Masked=/*#__PURE__*/function(){// $Shape<MaskedOptions>; TODO after fix https://github.com/facebook/flow/issues/4773
/** @type {Mask} *//** */// $FlowFixMe TODO no ideas
/** Transforms value before mask processing *//** Validates if value is acceptable *//** Does additional processing in the end of editing *//** */function Masked(opts){_classCallCheck(this,Masked);this._value='';this._update(opts);this.isInitialized=true;}/** Sets and applies new options */_createClass(Masked,[{key:"updateOptions",value:function updateOptions(opts){this.withValueRefresh(this._update.bind(this,opts));}/**
        Sets new options
        @protected
      */},{key:"_update",value:function _update(opts){_extends(this,opts);}},{key:"reset",/** Resets value */value:function reset(){this._value='';}/** */},{key:"resolve",/** Resolve new value */value:function resolve(value){this.reset();this.append(value,{input:true},{value:''});this.doCommit();return this.value;}/** */},{key:"nearestInputPos",/** Finds nearest input position in direction */value:function nearestInputPos(cursorPos,direction){return cursorPos;}/** Extracts value in range considering flags */},{key:"extractInput",value:function extractInput(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return this.value.slice(fromPos,toPos);}/** Extracts tail in range */},{key:"extractTail",value:function extractTail(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return{value:this.extractInput(fromPos,toPos)};}/** Stores state before tail */},{key:"_storeBeforeTailState",value:function _storeBeforeTailState(){this._beforeTailState=this.state;}/** Restores state before tail */},{key:"_restoreBeforeTailState",value:function _restoreBeforeTailState(){this.state=this._beforeTailState;}/** Resets state before tail */},{key:"_resetBeforeTailState",value:function _resetBeforeTailState(){this._beforeTailState=null;}/** Appends tail */},{key:"appendTail",value:function appendTail(tail){return this.append(tail?tail.value:'',{tail:true});}/** Appends char */},{key:"_appendCharRaw",value:function _appendCharRaw(ch){this._value+=ch;return new ChangeDetails({inserted:ch,rawInserted:ch});}/** Appends char */},{key:"_appendChar",value:function _appendChar(ch){var flags=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var checkTail=arguments.length>2?arguments[2]:undefined;ch=this.doPrepare(ch,flags);if(!ch)return new ChangeDetails();var consistentState=this.state;var details=this._appendCharRaw(ch,flags);if(details.inserted){var appended=this.doValidate(flags)!==false;if(appended&&checkTail!=null){// validation ok, check tail
this._storeBeforeTailState();var tailDetails=this.appendTail(checkTail);appended=tailDetails.rawInserted===checkTail.value;// if ok, rollback state after tail
if(appended&&tailDetails.inserted)this._restoreBeforeTailState();}// revert all if something went wrong
if(!appended){details.rawInserted=details.inserted='';this.state=consistentState;}}return details;}/** Appends symbols considering flags */},{key:"append",value:function append(str,flags,tail){var oldValueLength=this.value.length;var details=new ChangeDetails();for(var ci=0;ci<str.length;++ci){details.aggregate(this._appendChar(str[ci],flags,tail));}// append tail but aggregate only tailShift
if(tail!=null){this._storeBeforeTailState();details.tailShift+=this.appendTail(tail).tailShift;// TODO it's a good idea to clear state after appending ends
// but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)
// this._resetBeforeTailState();
}return details;}/** */},{key:"remove",value:function remove(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;this._value=this.value.slice(0,fromPos)+this.value.slice(toPos);return new ChangeDetails();}/** Calls function and reapplies current value */},{key:"withValueRefresh",value:function withValueRefresh(fn){if(this._refreshing||!this.isInitialized)return fn();this._refreshing=true;var unmasked=this.unmaskedValue;var value=this.value;var ret=fn();// try to update with raw value first to keep fixed chars
if(this.resolve(value)!==value){// or fallback to unmasked
this.unmaskedValue=unmasked;}delete this._refreshing;return ret;}/**
        Prepares string before mask processing
        @protected
      */},{key:"doPrepare",value:function doPrepare(str){var flags=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.prepare?this.prepare(str,this,flags):str;}/**
        Validates if value is acceptable
        @protected
      */},{key:"doValidate",value:function doValidate(flags){return(!this.validate||this.validate(this.value,this,flags))&&(!this.parent||this.parent.doValidate(flags));}/**
        Does additional processing in the end of editing
        @protected
      */},{key:"doCommit",value:function doCommit(){if(this.commit)this.commit(this.value,this);}/** */},{key:"splice",value:function splice(start,deleteCount,inserted,removeDirection){var tailPos=start+deleteCount;var tail=this.extractTail(tailPos);var startChangePos=this.nearestInputPos(start,removeDirection);var changeDetails=new ChangeDetails({tailShift:startChangePos-start// adjust tailShift if start was aligned
}).aggregate(this.remove(startChangePos)).aggregate(this.append(inserted,{input:true},tail));return changeDetails;}},{key:"state",get:function get(){return{_value:this.value};},set:function set(state){this._value=state._value;}},{key:"value",get:function get(){return this._value;},set:function set(value){this.resolve(value);}},{key:"unmaskedValue",get:function get(){return this.value;},set:function set(value){this.reset();this.append(value,{},{value:''});this.doCommit();}/** */},{key:"typedValue",get:function get(){return this.unmaskedValue;},set:function set(value){this.unmaskedValue=value;}/** Value that includes raw user input */},{key:"rawInputValue",get:function get(){return this.extractInput(0,this.value.length,{raw:true});},set:function set(value){this.reset();this.append(value,{raw:true},{value:''});this.doCommit();}/** */},{key:"isComplete",get:function get(){return true;}}]);return Masked;}();/** Get Masked class by mask type */function maskedClass(mask){if(mask==null){throw new Error('mask property should be defined');}if(mask instanceof RegExp)return g.IMask.MaskedRegExp;if(isString(mask))return g.IMask.MaskedPattern;if(mask instanceof Date||mask===Date)return g.IMask.MaskedDate;if(mask instanceof Number||typeof mask==='number'||mask===Number)return g.IMask.MaskedNumber;if(Array.isArray(mask)||mask===Array)return g.IMask.MaskedDynamic;// $FlowFixMe
if(mask.prototype instanceof g.IMask.Masked)return mask;// $FlowFixMe
if(mask instanceof Function)return g.IMask.MaskedFunction;console.warn('Mask not found for mask',mask);// eslint-disable-line no-console
return g.IMask.Masked;}/** Creates new {@link Masked} depending on mask type */function createMask(opts){opts=_objectSpread({},opts);var mask=opts.mask;if(mask instanceof g.IMask.Masked)return mask;var MaskedClass=maskedClass(mask);return new MaskedClass(opts);}var DEFAULT_INPUT_DEFINITIONS={'0':/\d/,'a':/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,// http://stackoverflow.com/a/22075070
'*':/./};/** */var PatternInputDefinition=/*#__PURE__*/function(){/** *//** *//** *//** *//** *//** */function PatternInputDefinition(opts){_classCallCheck(this,PatternInputDefinition);var mask=opts.mask,blockOpts=_objectWithoutProperties(opts,["mask"]);this.masked=createMask({mask:mask});_extends(this,blockOpts);}_createClass(PatternInputDefinition,[{key:"reset",value:function reset(){this._isFilled=false;this.masked.reset();}},{key:"remove",value:function remove(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;if(fromPos===0&&toPos>=1){this._isFilled=false;return this.masked.remove(fromPos,toPos);}return new ChangeDetails();}},{key:"_appendChar",value:function _appendChar(str){var flags=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this._isFilled)return new ChangeDetails();var state=this.masked.state;// simulate input
var details=this.masked._appendChar(str,flags);if(details.inserted&&this.doValidate(flags)===false){details.inserted=details.rawInserted='';this.masked.state=state;}if(!details.inserted&&!this.isOptional&&!this.lazy&&!flags.input){details.inserted=this.placeholderChar;}details.skip=!details.inserted&&!this.isOptional;this._isFilled=Boolean(details.inserted);return details;}},{key:"_appendPlaceholder",value:function _appendPlaceholder(){var details=new ChangeDetails();if(this._isFilled||this.isOptional)return details;this._isFilled=true;details.inserted=this.placeholderChar;return details;}},{key:"extractTail",value:function extractTail(){var _this$masked;return(_this$masked=this.masked).extractTail.apply(_this$masked,arguments);}},{key:"appendTail",value:function appendTail(){var _this$masked2;return(_this$masked2=this.masked).appendTail.apply(_this$masked2,arguments);}},{key:"extractInput",value:function extractInput(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;var flags=arguments.length>2?arguments[2]:undefined;return this.masked.extractInput(fromPos,toPos,flags);}},{key:"nearestInputPos",value:function nearestInputPos(cursorPos){var direction=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DIRECTION.NONE;var minPos=0;var maxPos=this.value.length;var boundPos=Math.min(Math.max(cursorPos,minPos),maxPos);switch(direction){case DIRECTION.LEFT:case DIRECTION.FORCE_LEFT:return this.isComplete?boundPos:minPos;case DIRECTION.RIGHT:case DIRECTION.FORCE_RIGHT:return this.isComplete?boundPos:maxPos;case DIRECTION.NONE:default:return boundPos;}}},{key:"doValidate",value:function doValidate(){var _this$masked3,_this$parent;return(_this$masked3=this.masked).doValidate.apply(_this$masked3,arguments)&&(!this.parent||(_this$parent=this.parent).doValidate.apply(_this$parent,arguments));}},{key:"doCommit",value:function doCommit(){this.masked.doCommit();}},{key:"value",get:function get(){return this.masked.value||(this._isFilled&&!this.isOptional?this.placeholderChar:'');}},{key:"unmaskedValue",get:function get(){return this.masked.unmaskedValue;}},{key:"isComplete",get:function get(){return Boolean(this.masked.value)||this.isOptional;}},{key:"state",get:function get(){return{masked:this.masked.state,_isFilled:this._isFilled};},set:function set(state){this.masked.state=state.masked;this._isFilled=state._isFilled;}}]);return PatternInputDefinition;}();var PatternFixedDefinition=/*#__PURE__*/function(){/** *//** *//** *//** */function PatternFixedDefinition(opts){_classCallCheck(this,PatternFixedDefinition);_extends(this,opts);this._value='';}_createClass(PatternFixedDefinition,[{key:"reset",value:function reset(){this._isRawInput=false;this._value='';}},{key:"remove",value:function remove(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._value.length;this._value=this._value.slice(0,fromPos)+this._value.slice(toPos);if(!this._value)this._isRawInput=false;return new ChangeDetails();}},{key:"nearestInputPos",value:function nearestInputPos(cursorPos){var direction=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DIRECTION.NONE;var minPos=0;var maxPos=this._value.length;switch(direction){case DIRECTION.LEFT:case DIRECTION.FORCE_LEFT:return minPos;case DIRECTION.NONE:case DIRECTION.RIGHT:case DIRECTION.FORCE_RIGHT:default:return maxPos;}}},{key:"extractInput",value:function extractInput(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._value.length;var flags=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return flags.raw&&this._isRawInput&&this._value.slice(fromPos,toPos)||'';}},{key:"_appendChar",value:function _appendChar(str,flags){var details=new ChangeDetails();if(this._value)return details;var appended=this.char===str[0];var isResolved=appended&&(this.isUnmasking||flags.input||flags.raw)&&!flags.tail;if(isResolved)details.rawInserted=this.char;this._value=details.inserted=this.char;this._isRawInput=isResolved&&(flags.raw||flags.input);return details;}},{key:"_appendPlaceholder",value:function _appendPlaceholder(){var details=new ChangeDetails();if(this._value)return details;this._value=details.inserted=this.char;return details;}},{key:"extractTail",value:function extractTail(){var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return{value:''};}},{key:"appendTail",value:function appendTail(tail){return this._appendChar(tail?tail.value:'',{tail:true});}},{key:"doCommit",value:function doCommit(){}},{key:"value",get:function get(){return this._value;}},{key:"unmaskedValue",get:function get(){return this.isUnmasking?this.value:'';}},{key:"isComplete",get:function get(){return true;}},{key:"state",get:function get(){return{_value:this._value,_isRawInput:this._isRawInput};},set:function set(state){_extends(this,state);}}]);return PatternFixedDefinition;}();var ChunksTailDetails=/*#__PURE__*/function(){function ChunksTailDetails(chunks){_classCallCheck(this,ChunksTailDetails);this.chunks=chunks;}_createClass(ChunksTailDetails,[{key:"value",get:function get(){return this.chunks.map(function(c){return c.value;}).join('');}}]);return ChunksTailDetails;}();/**
    Pattern mask
    @param {Object} opts
    @param {Object} opts.blocks
    @param {Object} opts.definitions
    @param {string} opts.placeholderChar
    @param {boolean} opts.lazy
  */var MaskedPattern=/*#__PURE__*/function(_Masked){_inherits(MaskedPattern,_Masked);/** *//** *//** Single char for empty input *//** Show placeholder only when needed */function MaskedPattern(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,MaskedPattern);// TODO type $Shape<MaskedPatternOptions>={} does not work
opts.definitions=_extends({},DEFAULT_INPUT_DEFINITIONS,opts.definitions);return _possibleConstructorReturn(this,_getPrototypeOf(MaskedPattern).call(this,_objectSpread({},MaskedPattern.DEFAULTS,opts)));}/**
      @override
      @param {Object} opts
    */_createClass(MaskedPattern,[{key:"_update",value:function _update(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};opts.definitions=_extends({},this.definitions,opts.definitions);_get(_getPrototypeOf(MaskedPattern.prototype),"_update",this).call(this,opts);this._rebuildMask();}/** */},{key:"_rebuildMask",value:function _rebuildMask(){var _this=this;var defs=this.definitions;this._blocks=[];this._stops=[];this._maskedBlocks={};var pattern=this.mask;if(!pattern||!defs)return;var unmaskingBlock=false;var optionalBlock=false;for(var i=0;i<pattern.length;++i){if(this.blocks){var _ret=function(){var p=pattern.slice(i);var bNames=Object.keys(_this.blocks).filter(function(bName){return p.indexOf(bName)===0;});// order by key length
bNames.sort(function(a,b){return b.length-a.length;});// use block name with max length
var bName=bNames[0];if(bName){var maskedBlock=createMask(_objectSpread({parent:_this,lazy:_this.lazy,placeholderChar:_this.placeholderChar},_this.blocks[bName]));if(maskedBlock){_this._blocks.push(maskedBlock);// store block index
if(!_this._maskedBlocks[bName])_this._maskedBlocks[bName]=[];_this._maskedBlocks[bName].push(_this._blocks.length-1);}i+=bName.length-1;return"continue";}}();if(_ret==="continue")continue;}var char=pattern[i];var _isInput=char in defs;if(char===MaskedPattern.STOP_CHAR){this._stops.push(this._blocks.length);continue;}if(char==='{'||char==='}'){unmaskingBlock=!unmaskingBlock;continue;}if(char==='['||char===']'){optionalBlock=!optionalBlock;continue;}if(char===MaskedPattern.ESCAPE_CHAR){++i;char=pattern[i];if(!char)break;_isInput=false;}var def=void 0;if(_isInput){def=new PatternInputDefinition({parent:this,lazy:this.lazy,placeholderChar:this.placeholderChar,mask:defs[char],isOptional:optionalBlock});}else{def=new PatternFixedDefinition({char:char,isUnmasking:unmaskingBlock});}this._blocks.push(def);}}/**
        @override
      */},{key:"_storeBeforeTailState",/**
        @override
      */value:function _storeBeforeTailState(){this._blocks.forEach(function(b){// $FlowFixMe _storeBeforeTailState is not exist in PatternBlock
if(typeof b._storeBeforeTailState==='function'){b._storeBeforeTailState();}});_get(_getPrototypeOf(MaskedPattern.prototype),"_storeBeforeTailState",this).call(this);}/**
        @override
      */},{key:"_restoreBeforeTailState",value:function _restoreBeforeTailState(){this._blocks.forEach(function(b){// $FlowFixMe _restoreBeforeTailState is not exist in PatternBlock
if(typeof b._restoreBeforeTailState==='function'){b._restoreBeforeTailState();}});_get(_getPrototypeOf(MaskedPattern.prototype),"_restoreBeforeTailState",this).call(this);}/**
        @override
      */},{key:"_resetBeforeTailState",value:function _resetBeforeTailState(){this._blocks.forEach(function(b){// $FlowFixMe _resetBeforeTailState is not exist in PatternBlock
if(typeof b._resetBeforeTailState==='function'){b._resetBeforeTailState();}});_get(_getPrototypeOf(MaskedPattern.prototype),"_resetBeforeTailState",this).call(this);}/**
        @override
      */},{key:"reset",value:function reset(){_get(_getPrototypeOf(MaskedPattern.prototype),"reset",this).call(this);this._blocks.forEach(function(b){return b.reset();});}/**
        @override
      */},{key:"doCommit",/**
        @override
      */value:function doCommit(){this._blocks.forEach(function(b){return b.doCommit();});_get(_getPrototypeOf(MaskedPattern.prototype),"doCommit",this).call(this);}/**
        @override
      */},{key:"appendTail",/**
        @override
      */value:function appendTail(tail){var details=new ChangeDetails();if(tail){details.aggregate(tail instanceof ChunksTailDetails?this._appendTailChunks(tail.chunks):_get(_getPrototypeOf(MaskedPattern.prototype),"appendTail",this).call(this,tail));}return details.aggregate(this._appendPlaceholder());}/**
        @override
      */},{key:"_appendCharRaw",value:function _appendCharRaw(ch){var flags=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var blockData=this._mapPosToBlock(this.value.length);var details=new ChangeDetails();if(!blockData)return details;for(var bi=blockData.index;;++bi){var _block=this._blocks[bi];if(!_block)break;var blockDetails=_block._appendChar(ch,flags);var skip=blockDetails.skip;details.aggregate(blockDetails);if(skip||blockDetails.rawInserted)break;// go next char
}return details;}/** Appends chunks splitted by stop chars */},{key:"_appendTailChunks",value:function _appendTailChunks(chunks){var details=new ChangeDetails();for(var ci=0;ci<chunks.length&&!details.skip;++ci){var chunk=chunks[ci];var lastBlock=this._mapPosToBlock(this.value.length);var chunkBlock=chunk instanceof ChunksTailDetails&&chunk.index!=null&&(!lastBlock||lastBlock.index<=chunk.index)&&this._blocks[chunk.index];if(chunkBlock){// $FlowFixMe we already check index above
details.aggregate(this._appendPlaceholder(chunk.index));var tailDetails=chunkBlock.appendTail(chunk);tailDetails.skip=false;// always ignore skip, it will be set on last
details.aggregate(tailDetails);this._value+=tailDetails.inserted;// get not inserted chars
var remainChars=chunk.value.slice(tailDetails.rawInserted.length);if(remainChars)details.aggregate(this.append(remainChars,{tail:true}));}else{var _ref=chunk,stop=_ref.stop,value=_ref.value;if(stop!=null&&this._stops.indexOf(stop)>=0)details.aggregate(this._appendPlaceholder(stop));details.aggregate(this.append(value,{tail:true}));}}return details;}/**
        @override
      */},{key:"extractTail",value:function extractTail(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return new ChunksTailDetails(this._extractTailChunks(fromPos,toPos));}/**
        @override
      */},{key:"extractInput",value:function extractInput(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;var flags=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(fromPos===toPos)return'';var input='';this._forEachBlocksInRange(fromPos,toPos,function(b,_,fromPos,toPos){input+=b.extractInput(fromPos,toPos,flags);});return input;}/** Extracts chunks from input splitted by stop chars */},{key:"_extractTailChunks",value:function _extractTailChunks(){var _this2=this;var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;if(fromPos===toPos)return[];var chunks=[];var lastChunk;this._forEachBlocksInRange(fromPos,toPos,function(b,bi,fromPos,toPos){var blockChunk=b.extractTail(fromPos,toPos);var nearestStop;for(var si=0;si<_this2._stops.length;++si){var stop=_this2._stops[si];if(stop<=bi)nearestStop=stop;else break;}if(blockChunk instanceof ChunksTailDetails){// TODO append to lastChunk with same index
if(nearestStop==null){// try append floating chunks to existed lastChunk
var headFloatChunksCount=blockChunk.chunks.length;for(var ci=0;ci<blockChunk.chunks.length;++ci){if(blockChunk.chunks[ci].stop!=null){headFloatChunksCount=ci;break;}}var headFloatChunks=blockChunk.chunks.splice(0,headFloatChunksCount);headFloatChunks.filter(function(chunk){return chunk.value;}).forEach(function(chunk){if(lastChunk)lastChunk.value+=chunk.value;// will flat nested chunks
else lastChunk={value:chunk.value};});}// if block chunk has stops
if(blockChunk.chunks.length){if(lastChunk)chunks.push(lastChunk);blockChunk.index=nearestStop;chunks.push(blockChunk);// we cant append to ChunksTailDetails, so just reset lastChunk to force adding new
lastChunk=null;}}else{if(nearestStop!=null){// on middle chunks consider stop flag and do not consider value
// add block even if it is empty
if(lastChunk)chunks.push(lastChunk);blockChunk.stop=nearestStop;}else if(lastChunk){lastChunk.value+=blockChunk.value;return;}lastChunk=blockChunk;}});if(lastChunk&&lastChunk.value)chunks.push(lastChunk);return chunks;}/** Appends placeholder depending on laziness */},{key:"_appendPlaceholder",value:function _appendPlaceholder(toBlockIndex){var _this3=this;var details=new ChangeDetails();if(this.lazy&&toBlockIndex==null)return details;var startBlockData=this._mapPosToBlock(this.value.length);if(!startBlockData)return details;var startBlockIndex=startBlockData.index;var endBlockIndex=toBlockIndex!=null?toBlockIndex:this._blocks.length;this._blocks.slice(startBlockIndex,endBlockIndex).forEach(function(b){if(typeof b._appendPlaceholder==='function'){// $FlowFixMe `_blocks` may not be present
var args=b._blocks!=null?[b._blocks.length]:[];var bDetails=b._appendPlaceholder.apply(b,args);_this3._value+=bDetails.inserted;details.aggregate(bDetails);}});return details;}/** Finds block in pos */},{key:"_mapPosToBlock",value:function _mapPosToBlock(pos){var accVal='';for(var bi=0;bi<this._blocks.length;++bi){var _block2=this._blocks[bi];var blockStartPos=accVal.length;accVal+=_block2.value;if(pos<=accVal.length){return{index:bi,offset:pos-blockStartPos};}}}},{key:"_blockStartPos",value:function _blockStartPos(blockIndex){return this._blocks.slice(0,blockIndex).reduce(function(pos,b){return pos+=b.value.length;},0);}},{key:"_forEachBlocksInRange",value:function _forEachBlocksInRange(fromPos){var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;var fn=arguments.length>2?arguments[2]:undefined;var fromBlock=this._mapPosToBlock(fromPos);if(fromBlock){var toBlock=this._mapPosToBlock(toPos);// process first block
var isSameBlock=toBlock&&fromBlock.index===toBlock.index;var fromBlockRemoveBegin=fromBlock.offset;var fromBlockRemoveEnd=toBlock&&isSameBlock?toBlock.offset:undefined;fn(this._blocks[fromBlock.index],fromBlock.index,fromBlockRemoveBegin,fromBlockRemoveEnd);if(toBlock&&!isSameBlock){// process intermediate blocks
for(var bi=fromBlock.index+1;bi<toBlock.index;++bi){fn(this._blocks[bi],bi);}// process last block
fn(this._blocks[toBlock.index],toBlock.index,0,toBlock.offset);}}}/**
        @override
      */},{key:"remove",value:function remove(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;var removeDetails=_get(_getPrototypeOf(MaskedPattern.prototype),"remove",this).call(this,fromPos,toPos);this._forEachBlocksInRange(fromPos,toPos,function(b,_,bFromPos,bToPos){removeDetails.aggregate(b.remove(bFromPos,bToPos));});return removeDetails;}/**
        @override
      */},{key:"nearestInputPos",value:function nearestInputPos(cursorPos){var direction=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DIRECTION.NONE;// TODO refactor - extract alignblock
var beginBlockData=this._mapPosToBlock(cursorPos)||{index:0,offset:0};var beginBlockOffset=beginBlockData.offset,beginBlockIndex=beginBlockData.index;var beginBlock=this._blocks[beginBlockIndex];if(!beginBlock)return cursorPos;var beginBlockCursorPos=beginBlockOffset;// if position inside block - try to adjust it
if(beginBlockCursorPos!==0&&beginBlockCursorPos<beginBlock.value.length){beginBlockCursorPos=beginBlock.nearestInputPos(beginBlockOffset,forceDirection(direction));}var cursorAtRight=beginBlockCursorPos===beginBlock.value.length;var cursorAtLeft=beginBlockCursorPos===0;//  cursor is INSIDE first block (not at bounds)
if(!cursorAtLeft&&!cursorAtRight)return this._blockStartPos(beginBlockIndex)+beginBlockCursorPos;var searchBlockIndex=cursorAtRight?beginBlockIndex+1:beginBlockIndex;if(direction===DIRECTION.NONE){// NONE direction used to calculate start input position if no chars were removed
// FOR NONE:
// -
// input|any
// ->
//  any|input
// <-
//  filled-input|any
// check if first block at left is input
if(searchBlockIndex>0){var blockIndexAtLeft=searchBlockIndex-1;var blockAtLeft=this._blocks[blockIndexAtLeft];var blockInputPos=blockAtLeft.nearestInputPos(0,DIRECTION.NONE);// is input
if(!blockAtLeft.value.length||blockInputPos!==blockAtLeft.value.length){return this._blockStartPos(searchBlockIndex);}}// ->
var firstInputAtRight=searchBlockIndex;for(var bi=firstInputAtRight;bi<this._blocks.length;++bi){var _block3=this._blocks[bi];var _blockInputPos=_block3.nearestInputPos(0,DIRECTION.NONE);if(_blockInputPos!==_block3.value.length){return this._blockStartPos(bi)+_blockInputPos;}}return this.value.length;// // <-
// for (let bi=Math.min(searchBlockIndex, this._blocks.length-1); bi >= 0; --bi) {
//   const block = this._blocks[bi];
//   const blockInputPos = block.nearestInputPos(block.value.length, DIRECTION.LEFT);
//   if (blockInputPos !== 0) {
//     return this._blockStartPos(bi) + blockInputPos;
//   }
// }
// return 0;
}if(direction===DIRECTION.LEFT||direction===DIRECTION.FORCE_LEFT){// -
//  any|filled-input
// <-
//  any|first not empty is not-len-aligned
//  not-0-aligned|any
// ->
//  any|not-len-aligned or end
// check if first block at right is filled input
var firstFilledBlockIndexAtRight;for(var _bi=searchBlockIndex;_bi<this._blocks.length;++_bi){if(this._blocks[_bi].value){firstFilledBlockIndexAtRight=_bi;break;}}if(firstFilledBlockIndexAtRight!=null){var filledBlock=this._blocks[firstFilledBlockIndexAtRight];var _blockInputPos2=filledBlock.nearestInputPos(0,DIRECTION.RIGHT);if(_blockInputPos2===0&&filledBlock.unmaskedValue.length){// filled block is input
return this._blockStartPos(firstFilledBlockIndexAtRight)+_blockInputPos2;}}// <-
// find this vars
var firstFilledInputBlockIndex=-1;var firstEmptyInputBlockIndex;// TODO consider nested empty inputs
for(var _bi2=searchBlockIndex-1;_bi2>=0;--_bi2){var _block4=this._blocks[_bi2];var _blockInputPos3=_block4.nearestInputPos(_block4.value.length,DIRECTION.FORCE_LEFT);if(firstEmptyInputBlockIndex==null&&(!_block4.value||_blockInputPos3!==0)){firstEmptyInputBlockIndex=_bi2;}if(_blockInputPos3!==0){if(_blockInputPos3!==_block4.value.length){// aligned inside block - return immediately
return this._blockStartPos(_bi2)+_blockInputPos3;}else{// found filled
firstFilledInputBlockIndex=_bi2;break;}}}if(direction===DIRECTION.LEFT){// try find first empty input before start searching position only when not forced
for(var _bi3=firstFilledInputBlockIndex+1;_bi3<=Math.min(searchBlockIndex,this._blocks.length-1);++_bi3){var _block5=this._blocks[_bi3];var _blockInputPos4=_block5.nearestInputPos(0,DIRECTION.NONE);var blockAlignedPos=this._blockStartPos(_bi3)+_blockInputPos4;// if block is empty and last or not lazy input
if((!_block5.value.length&&blockAlignedPos===this.value.length||_blockInputPos4!==_block5.value.length)&&blockAlignedPos<=cursorPos){return blockAlignedPos;}}}// process overflow
if(firstFilledInputBlockIndex>=0){return this._blockStartPos(firstFilledInputBlockIndex)+this._blocks[firstFilledInputBlockIndex].value.length;}// for lazy if has aligned left inside fixed and has came to the start - use start position
if(direction===DIRECTION.FORCE_LEFT||this.lazy&&!this.extractInput()&&!isInput(this._blocks[searchBlockIndex])){return 0;}if(firstEmptyInputBlockIndex!=null){return this._blockStartPos(firstEmptyInputBlockIndex);}// find first input
for(var _bi4=searchBlockIndex;_bi4<this._blocks.length;++_bi4){var _block6=this._blocks[_bi4];var _blockInputPos5=_block6.nearestInputPos(0,DIRECTION.NONE);// is input
if(!_block6.value.length||_blockInputPos5!==_block6.value.length){return this._blockStartPos(_bi4)+_blockInputPos5;}}return 0;}if(direction===DIRECTION.RIGHT||direction===DIRECTION.FORCE_RIGHT){// ->
//  any|not-len-aligned and filled
//  any|not-len-aligned
// <-
var firstInputBlockAlignedIndex;var firstInputBlockAlignedPos;for(var _bi5=searchBlockIndex;_bi5<this._blocks.length;++_bi5){var _block7=this._blocks[_bi5];var _blockInputPos6=_block7.nearestInputPos(0,DIRECTION.NONE);if(_blockInputPos6!==_block7.value.length){firstInputBlockAlignedPos=this._blockStartPos(_bi5)+_blockInputPos6;firstInputBlockAlignedIndex=_bi5;break;}}if(firstInputBlockAlignedIndex!=null&&firstInputBlockAlignedPos!=null){for(var _bi6=firstInputBlockAlignedIndex;_bi6<this._blocks.length;++_bi6){var _block8=this._blocks[_bi6];var _blockInputPos7=_block8.nearestInputPos(0,DIRECTION.FORCE_RIGHT);if(_blockInputPos7!==_block8.value.length){return this._blockStartPos(_bi6)+_blockInputPos7;}}return direction===DIRECTION.FORCE_RIGHT?this.value.length:firstInputBlockAlignedPos;}for(var _bi7=Math.min(searchBlockIndex,this._blocks.length-1);_bi7>=0;--_bi7){var _block9=this._blocks[_bi7];var _blockInputPos8=_block9.nearestInputPos(_block9.value.length,DIRECTION.LEFT);if(_blockInputPos8!==0){var alignedPos=this._blockStartPos(_bi7)+_blockInputPos8;if(alignedPos>=cursorPos)return alignedPos;break;}}}return cursorPos;}/** Get block by name */},{key:"maskedBlock",value:function maskedBlock(name){return this.maskedBlocks(name)[0];}/** Get all blocks by name */},{key:"maskedBlocks",value:function maskedBlocks(name){var _this4=this;var indices=this._maskedBlocks[name];if(!indices)return[];return indices.map(function(gi){return _this4._blocks[gi];});}},{key:"state",get:function get$$1(){return _objectSpread({},_get(_getPrototypeOf(MaskedPattern.prototype),"state",this),{_blocks:this._blocks.map(function(b){return b.state;})});},set:function set$$1(state){var _blocks=state._blocks,maskedState=_objectWithoutProperties(state,["_blocks"]);this._blocks.forEach(function(b,bi){return b.state=_blocks[bi];});_set(_getPrototypeOf(MaskedPattern.prototype),"state",maskedState,this,true);}},{key:"isComplete",get:function get$$1(){return this._blocks.every(function(b){return b.isComplete;});}},{key:"unmaskedValue",get:function get$$1(){return this._blocks.reduce(function(str,b){return str+=b.unmaskedValue;},'');},set:function set$$1(unmaskedValue){_set(_getPrototypeOf(MaskedPattern.prototype),"unmaskedValue",unmaskedValue,this,true);}/**
        @override
      */},{key:"value",get:function get$$1(){// TODO return _value when not in change?
return this._blocks.reduce(function(str,b){return str+=b.value;},'');},set:function set$$1(value){_set(_getPrototypeOf(MaskedPattern.prototype),"value",value,this,true);}}]);return MaskedPattern;}(Masked);MaskedPattern.DEFAULTS={lazy:true,placeholderChar:'_'};MaskedPattern.STOP_CHAR='`';MaskedPattern.ESCAPE_CHAR='\\';MaskedPattern.InputDefinition=PatternInputDefinition;MaskedPattern.FixedDefinition=PatternFixedDefinition;function isInput(block){if(!block)return false;var value=block.value;return!value||block.nearestInputPos(0,DIRECTION.NONE)!==value.length;}/** Pattern which accepts ranges */var MaskedRange=/*#__PURE__*/function(_MaskedPattern){_inherits(MaskedRange,_MaskedPattern);function MaskedRange(){_classCallCheck(this,MaskedRange);return _possibleConstructorReturn(this,_getPrototypeOf(MaskedRange).apply(this,arguments));}_createClass(MaskedRange,[{key:"_update",/**
        @override
      */value:function _update(opts){// TODO type
var maxLength=String(opts.to).length;if(opts.maxLength!=null)maxLength=Math.max(maxLength,opts.maxLength);opts.maxLength=maxLength;var toStr=String(opts.to).padStart(maxLength,'0');var fromStr=String(opts.from).padStart(maxLength,'0');var sameCharsCount=0;while(sameCharsCount<toStr.length&&toStr[sameCharsCount]===fromStr[sameCharsCount]){++sameCharsCount;}opts.mask=toStr.slice(0,sameCharsCount).replace(/0/g,'\\0')+'0'.repeat(maxLength-sameCharsCount);_get(_getPrototypeOf(MaskedRange.prototype),"_update",this).call(this,opts);}/**
        @override
      */},{key:"doValidate",/**
        @override
      */value:function doValidate(){var _get2;var str=this.value;var minstr='';var maxstr='';var _ref=str.match(/^(\D*)(\d*)(\D*)/)||[],_ref2=_slicedToArray(_ref,3),placeholder=_ref2[1],num=_ref2[2];if(num){minstr='0'.repeat(placeholder.length)+num;maxstr='9'.repeat(placeholder.length)+num;}var firstNonZero=str.search(/[^0]/);if(firstNonZero===-1&&str.length<=this._matchFrom)return true;minstr=minstr.padEnd(this.maxLength,'0');maxstr=maxstr.padEnd(this.maxLength,'9');for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return this.from<=Number(maxstr)&&Number(minstr)<=this.to&&(_get2=_get(_getPrototypeOf(MaskedRange.prototype),"doValidate",this)).call.apply(_get2,[this].concat(args));}},{key:"_matchFrom",/**
        Optionally sets max length of pattern.
        Used when pattern length is longer then `to` param length. Pads zeros at start in this case.
      *//** Min bound *//** Max bound */get:function get$$1(){return this.maxLength-String(this.from).length;}},{key:"isComplete",get:function get$$1(){return _get(_getPrototypeOf(MaskedRange.prototype),"isComplete",this)&&Boolean(this.value);}}]);return MaskedRange;}(MaskedPattern);/** Date mask */var MaskedDate=/*#__PURE__*/function(_MaskedPattern){_inherits(MaskedDate,_MaskedPattern);/** Parse string to Date *//** Format Date to string *//** Pattern mask for date according to {@link MaskedDate#format} *//** Start date *//** End date *//**
      @param {Object} opts
    */function MaskedDate(opts){_classCallCheck(this,MaskedDate);return _possibleConstructorReturn(this,_getPrototypeOf(MaskedDate).call(this,_objectSpread({},MaskedDate.DEFAULTS,opts)));}/**
      @override
    */_createClass(MaskedDate,[{key:"_update",value:function _update(opts){if(opts.mask===Date)delete opts.mask;if(opts.pattern){opts.mask=opts.pattern;delete opts.pattern;}var blocks=opts.blocks;opts.blocks=_extends({},MaskedDate.GET_DEFAULT_BLOCKS());// adjust year block
if(opts.min)opts.blocks.Y.from=opts.min.getFullYear();if(opts.max)opts.blocks.Y.to=opts.max.getFullYear();if(opts.min&&opts.max&&opts.blocks.Y.from===opts.blocks.Y.to){opts.blocks.m.from=opts.min.getMonth()+1;opts.blocks.m.to=opts.max.getMonth()+1;if(opts.blocks.m.from===opts.blocks.m.to){opts.blocks.d.from=opts.min.getDate();opts.blocks.d.to=opts.max.getDate();}}_extends(opts.blocks,blocks);_get(_getPrototypeOf(MaskedDate.prototype),"_update",this).call(this,opts);}/**
        @override
      */},{key:"doValidate",value:function doValidate(){var _get2;var date=this.date;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return(_get2=_get(_getPrototypeOf(MaskedDate.prototype),"doValidate",this)).call.apply(_get2,[this].concat(args))&&(!this.isComplete||this.isDateExist(this.value)&&date!=null&&(this.min==null||this.min<=date)&&(this.max==null||date<=this.max));}/** Checks if date is exists */},{key:"isDateExist",value:function isDateExist(str){return this.format(this.parse(str))===str;}/** Parsed Date */},{key:"date",get:function get$$1(){return this.isComplete?this.parse(this.value):null;},set:function set(date){this.value=this.format(date);}/**
        @override
      */},{key:"typedValue",get:function get$$1(){return this.date;},set:function set(value){this.date=value;}}]);return MaskedDate;}(MaskedPattern);MaskedDate.DEFAULTS={pattern:'d{.}`m{.}`Y',format:function format(date){var day=String(date.getDate()).padStart(2,'0');var month=String(date.getMonth()+1).padStart(2,'0');var year=date.getFullYear();return[day,month,year].join('.');},parse:function parse(str){var _str$split=str.split('.'),_str$split2=_slicedToArray(_str$split,3),day=_str$split2[0],month=_str$split2[1],year=_str$split2[2];return new Date(year,month-1,day);}};MaskedDate.GET_DEFAULT_BLOCKS=function(){return{d:{mask:MaskedRange,from:1,to:31,maxLength:2},m:{mask:MaskedRange,from:1,to:12,maxLength:2},Y:{mask:MaskedRange,from:1900,to:9999}};};/**
    Generic element API to use with mask
    @interface
  */var MaskElement=/*#__PURE__*/function(){function MaskElement(){_classCallCheck(this,MaskElement);}_createClass(MaskElement,[{key:"select",/** Safely sets element selection */value:function select(start,end){if(start==null||end==null||start===this.selectionStart&&end===this.selectionEnd)return;try{this._unsafeSelect(start,end);}catch(e){}}/** Should be overriden in subclasses */},{key:"_unsafeSelect",value:function _unsafeSelect(start,end){}/** Should be overriden in subclasses */},{key:"bindEvents",/** Should be overriden in subclasses */value:function bindEvents(handlers){}/** Should be overriden in subclasses */},{key:"unbindEvents",value:function unbindEvents(){}},{key:"selectionStart",/** *//** *//** *//** Safely returns selection start */get:function get(){var start;try{start=this._unsafeSelectionStart;}catch(e){}return start!=null?start:this.value.length;}/** Safely returns selection end */},{key:"selectionEnd",get:function get(){var end;try{end=this._unsafeSelectionEnd;}catch(e){}return end!=null?end:this.value.length;}},{key:"isActive",get:function get(){return false;}}]);return MaskElement;}();/** Bridge between HTMLElement and {@link Masked} */var HTMLMaskElement=/*#__PURE__*/function(_MaskElement){_inherits(HTMLMaskElement,_MaskElement);/** Mapping between HTMLElement events and mask internal events *//** HTMLElement to use mask on *//**
      @param {HTMLInputElement|HTMLTextAreaElement} input
    */function HTMLMaskElement(input){var _this;_classCallCheck(this,HTMLMaskElement);_this=_possibleConstructorReturn(this,_getPrototypeOf(HTMLMaskElement).call(this));_this.input=input;_this._handlers={};return _this;}/**
      Is element in focus
      @readonly
    */_createClass(HTMLMaskElement,[{key:"_unsafeSelect",/**
        Sets HTMLElement selection
        @override
      */value:function _unsafeSelect(start,end){this.input.setSelectionRange(start,end);}/**
        HTMLElement value
        @override
      */},{key:"bindEvents",/**
        Binds HTMLElement events to mask internal events
        @override
      */value:function bindEvents(handlers){var _this2=this;Object.keys(handlers).forEach(function(event){return _this2._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event],handlers[event]);});}/**
        Unbinds HTMLElement events to mask internal events
        @override
      */},{key:"unbindEvents",value:function unbindEvents(){var _this3=this;Object.keys(this._handlers).forEach(function(event){return _this3._toggleEventHandler(event);});}},{key:"_toggleEventHandler",value:function _toggleEventHandler(event,handler){if(this._handlers[event]){this.input.removeEventListener(event,this._handlers[event]);delete this._handlers[event];}if(handler){this.input.addEventListener(event,handler);this._handlers[event]=handler;}}},{key:"isActive",get:function get(){return this.input===document.activeElement;}/**
        Returns HTMLElement selection start
        @override
      */},{key:"_unsafeSelectionStart",get:function get(){return this.input.selectionStart;}/**
        Returns HTMLElement selection end
        @override
      */},{key:"_unsafeSelectionEnd",get:function get(){return this.input.selectionEnd;}},{key:"value",get:function get(){return this.input.value;},set:function set(value){this.input.value=value;}}]);return HTMLMaskElement;}(MaskElement);HTMLMaskElement.EVENTS_MAP={selectionChange:'keydown',input:'input',drop:'drop',click:'click',focus:'focus',commit:'change'};/** Listens to element events and controls changes between element and {@link Masked} */var InputMask=/*#__PURE__*/function(){/**
      View element
      @readonly
    *//**
      Internal {@link Masked} model
      @readonly
    *//**
      @param {MaskElement|HTMLInputElement|HTMLTextAreaElement} el
      @param {Object} opts
    */function InputMask(el,opts){_classCallCheck(this,InputMask);this.el=el instanceof MaskElement?el:new HTMLMaskElement(el);this.masked=createMask(opts);this._listeners={};this._value='';this._unmaskedValue='';this._saveSelection=this._saveSelection.bind(this);this._onInput=this._onInput.bind(this);this._onChange=this._onChange.bind(this);this._onDrop=this._onDrop.bind(this);this.alignCursor=this.alignCursor.bind(this);this.alignCursorFriendly=this.alignCursorFriendly.bind(this);this._bindEvents();// refresh
this.updateValue();this._onChange();}/** Read or update mask */_createClass(InputMask,[{key:"_bindEvents",/**
        Starts listening to element events
        @protected
      */value:function _bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this.alignCursorFriendly,focus:this.alignCursorFriendly,commit:this._onChange});}/**
        Stops listening to element events
        @protected
       */},{key:"_unbindEvents",value:function _unbindEvents(){this.el.unbindEvents();}/**
        Fires custom event
        @protected
       */},{key:"_fireEvent",value:function _fireEvent(ev){var listeners=this._listeners[ev];if(!listeners)return;listeners.forEach(function(l){return l();});}/**
        Current selection start
        @readonly
      */},{key:"_saveSelection",/**
        Stores current selection
        @protected
      */value:function _saveSelection()/* ev */{if(this.value!==this.el.value){console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.');// eslint-disable-line no-console
}this._selection={start:this.selectionStart,end:this.cursorPos};}/** Syncronizes model value from view */},{key:"updateValue",value:function updateValue(){this.masked.value=this.el.value;}/** Syncronizes view from model value, fires change events */},{key:"updateControl",value:function updateControl(){var newUnmaskedValue=this.masked.unmaskedValue;var newValue=this.masked.value;var isChanged=this.unmaskedValue!==newUnmaskedValue||this.value!==newValue;this._unmaskedValue=newUnmaskedValue;this._value=newValue;if(this.el.value!==newValue)this.el.value=newValue;if(isChanged)this._fireChangeEvents();}/** Updates options with deep equal check, recreates @{link Masked} model if mask type changes */},{key:"updateOptions",value:function updateOptions(opts){opts=_objectSpread({},opts);this.mask=opts.mask;delete opts.mask;// check if changed
if(!objectIncludes(this.masked,opts)){this.masked.updateOptions(opts);}this.updateControl();}/** Updates cursor */},{key:"updateCursor",value:function updateCursor(cursorPos){if(cursorPos==null)return;this.cursorPos=cursorPos;// also queue change cursor for mobile browsers
this._delayUpdateCursor(cursorPos);}/**
        Delays cursor update to support mobile browsers
        @private
      */},{key:"_delayUpdateCursor",value:function _delayUpdateCursor(cursorPos){var _this=this;this._abortUpdateCursor();this._changingCursorPos=cursorPos;this._cursorChanging=setTimeout(function(){if(!_this.el)return;// if was destroyed
_this.cursorPos=_this._changingCursorPos;_this._abortUpdateCursor();},10);}/**
        Fires custom events
        @protected
      */},{key:"_fireChangeEvents",value:function _fireChangeEvents(){this._fireEvent('accept');if(this.masked.isComplete)this._fireEvent('complete');}/**
        Aborts delayed cursor update
        @private
      */},{key:"_abortUpdateCursor",value:function _abortUpdateCursor(){if(this._cursorChanging){clearTimeout(this._cursorChanging);delete this._cursorChanging;}}/** Aligns cursor to nearest available position */},{key:"alignCursor",value:function alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.cursorPos,DIRECTION.LEFT);}/** Aligns cursor only if selection is empty */},{key:"alignCursorFriendly",value:function alignCursorFriendly(){if(this.selectionStart!==this.cursorPos)return;this.alignCursor();}/** Adds listener on custom event */},{key:"on",value:function on(ev,handler){if(!this._listeners[ev])this._listeners[ev]=[];this._listeners[ev].push(handler);return this;}/** Removes custom event listener */},{key:"off",value:function off(ev,handler){if(!this._listeners[ev])return;if(!handler){delete this._listeners[ev];return;}var hIndex=this._listeners[ev].indexOf(handler);if(hIndex>=0)this._listeners[ev].splice(hIndex,1);return this;}/** Handles view input event */},{key:"_onInput",value:function _onInput(){this._abortUpdateCursor();// fix strange IE behavior
if(!this._selection)return this.updateValue();var details=new ActionDetails(// new state
this.el.value,this.cursorPos,// old state
this.value,this._selection);var offset=this.masked.splice(details.startChangePos,details.removed.length,details.inserted,details.removeDirection).offset;var cursorPos=this.masked.nearestInputPos(details.startChangePos+offset,details.removeDirection);this.updateControl();this.updateCursor(cursorPos);}/** Handles view change event and commits model value */},{key:"_onChange",value:function _onChange(){if(this.value!==this.el.value){this.updateValue();}this.masked.doCommit();this.updateControl();}/** Handles view drop event, prevents by default */},{key:"_onDrop",value:function _onDrop(ev){ev.preventDefault();ev.stopPropagation();}/** Unbind view events and removes element reference */},{key:"destroy",value:function destroy(){this._unbindEvents();// $FlowFixMe why not do so?
this._listeners.length=0;delete this.el;}},{key:"mask",get:function get(){return this.masked.mask;},set:function set(mask){if(mask==null||mask===this.masked.mask||mask===Date&&this.masked instanceof MaskedDate)return;if(this.masked.constructor===maskedClass(mask)){this.masked.updateOptions({mask:mask});return;}var masked=createMask({mask:mask});masked.unmaskedValue=this.masked.unmaskedValue;this.masked=masked;}/** Raw value */},{key:"value",get:function get(){return this._value;},set:function set(str){this.masked.value=str;this.updateControl();this.alignCursor();}/** Unmasked value */},{key:"unmaskedValue",get:function get(){return this._unmaskedValue;},set:function set(str){this.masked.unmaskedValue=str;this.updateControl();this.alignCursor();}/** Typed unmasked value */},{key:"typedValue",get:function get(){return this.masked.typedValue;},set:function set(val){this.masked.typedValue=val;this.updateControl();this.alignCursor();}},{key:"selectionStart",get:function get(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart;}/** Current cursor position */},{key:"cursorPos",get:function get(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd;},set:function set(pos){if(!this.el.isActive)return;this.el.select(pos,pos);this._saveSelection();}}]);return InputMask;}();/** Pattern which validates enum values */var MaskedEnum=/*#__PURE__*/function(_MaskedPattern){_inherits(MaskedEnum,_MaskedPattern);function MaskedEnum(){_classCallCheck(this,MaskedEnum);return _possibleConstructorReturn(this,_getPrototypeOf(MaskedEnum).apply(this,arguments));}_createClass(MaskedEnum,[{key:"_update",/**
        @override
        @param {Object} opts
      */value:function _update(opts){// TODO type
if(opts.enum)opts.mask='*'.repeat(opts.enum[0].length);_get(_getPrototypeOf(MaskedEnum.prototype),"_update",this).call(this,opts);}/**
        @override
      */},{key:"doValidate",value:function doValidate(){var _this=this,_get2;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return this.enum.some(function(e){return e.indexOf(_this.unmaskedValue)>=0;})&&(_get2=_get(_getPrototypeOf(MaskedEnum.prototype),"doValidate",this)).call.apply(_get2,[this].concat(args));}}]);return MaskedEnum;}(MaskedPattern);/**
    Number mask
    @param {Object} opts
    @param {string} opts.radix - Single char
    @param {string} opts.thousandsSeparator - Single char
    @param {Array<string>} opts.mapToRadix - Array of single chars
    @param {number} opts.min
    @param {number} opts.max
    @param {number} opts.scale - Digits after point
    @param {boolean} opts.signed - Allow negative
    @param {boolean} opts.normalizeZeros - Flag to remove leading and trailing zeros in the end of editing
    @param {boolean} opts.padFractionalZeros - Flag to pad trailing zeros after point in the end of editing
  */var MaskedNumber=/*#__PURE__*/function(_Masked){_inherits(MaskedNumber,_Masked);/** Single char *//** Single char *//** Array of single chars *//** *//** *//** Digits after point *//** *//** Flag to remove leading and trailing zeros in the end of editing *//** Flag to pad trailing zeros after point in the end of editing */function MaskedNumber(opts){_classCallCheck(this,MaskedNumber);return _possibleConstructorReturn(this,_getPrototypeOf(MaskedNumber).call(this,_objectSpread({},MaskedNumber.DEFAULTS,opts)));}/**
      @override
    */_createClass(MaskedNumber,[{key:"_update",value:function _update(opts){_get(_getPrototypeOf(MaskedNumber.prototype),"_update",this).call(this,opts);this._updateRegExps();}/** */},{key:"_updateRegExps",value:function _updateRegExps(){// use different regexp to process user input (more strict, input suffix) and tail shifting
var start='^';var midInput='';var mid='';if(this.allowNegative){midInput+='([+|\\-]?|([+|\\-]?(0|([1-9]+\\d*))))';mid+='[+|\\-]?';}else{midInput+='(0|([1-9]+\\d*))';}mid+='\\d*';var end=(this.scale?'('+this.radix+'\\d{0,'+this.scale+'})?':'')+'$';this._numberRegExpInput=new RegExp(start+midInput+end);this._numberRegExp=new RegExp(start+mid+end);this._mapToRadixRegExp=new RegExp('['+this.mapToRadix.map(escapeRegExp).join('')+']','g');this._thousandsSeparatorRegExp=new RegExp(escapeRegExp(this.thousandsSeparator),'g');}/**
        @override
      */},{key:"extractTail",value:function extractTail(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;var tail=_get(_getPrototypeOf(MaskedNumber.prototype),"extractTail",this).call(this,fromPos,toPos);// $FlowFixMe no ideas
return _objectSpread({},tail,{value:this._removeThousandsSeparators(tail.value)});}/** */},{key:"_removeThousandsSeparators",value:function _removeThousandsSeparators(value){return value.replace(this._thousandsSeparatorRegExp,'');}/** */},{key:"_insertThousandsSeparators",value:function _insertThousandsSeparators(value){// https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript
var parts=value.split(this.radix);parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator);return parts.join(this.radix);}/**
        @override
      */},{key:"doPrepare",value:function doPrepare(str){var _get2;for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}return(_get2=_get(_getPrototypeOf(MaskedNumber.prototype),"doPrepare",this)).call.apply(_get2,[this,this._removeThousandsSeparators(str.replace(this._mapToRadixRegExp,this.radix))].concat(args));}},{key:"_separatorsCount",value:function _separatorsCount(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._value;var rawValueLength=this._removeThousandsSeparators(value).length;var valueWithSeparatorsLength=rawValueLength;for(var pos=0;pos<=valueWithSeparatorsLength;++pos){if(this._value[pos]===this.thousandsSeparator)++valueWithSeparatorsLength;}return valueWithSeparatorsLength-rawValueLength;}/**
        @override
      */},{key:"_appendCharRaw",value:function _appendCharRaw(ch){var flags=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!this.thousandsSeparator)return _get(_getPrototypeOf(MaskedNumber.prototype),"_appendCharRaw",this).call(this,ch,flags);var previousBeforeTailSeparatorsCount=this._separatorsCount(flags.tail&&this._beforeTailState?this._beforeTailState._value:this._value);this._value=this._removeThousandsSeparators(this.value);var appendDetails=_get(_getPrototypeOf(MaskedNumber.prototype),"_appendCharRaw",this).call(this,ch,flags);this._value=this._insertThousandsSeparators(this._value);var beforeTailSeparatorsCount=this._separatorsCount(flags.tail&&this._beforeTailState?this._beforeTailState._value:this._value);appendDetails.tailShift+=beforeTailSeparatorsCount-previousBeforeTailSeparatorsCount;return appendDetails;}/**
        @override
      */},{key:"remove",value:function remove(){var fromPos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var toPos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;var valueBeforePos=this.value.slice(0,fromPos);var valueAfterPos=this.value.slice(toPos);var previousBeforeTailSeparatorsCount=this._separatorsCount(valueBeforePos);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos+valueAfterPos));var beforeTailSeparatorsCount=this._separatorsCount(valueBeforePos);return new ChangeDetails({tailShift:beforeTailSeparatorsCount-previousBeforeTailSeparatorsCount});}/**
        @override
      */},{key:"nearestInputPos",value:function nearestInputPos(cursorPos,direction){if(!direction)return cursorPos;var nextPos=indexInDirection(cursorPos,direction);if(this.value[nextPos]===this.thousandsSeparator)cursorPos=posInDirection(cursorPos,direction);return cursorPos;}/**
        @override
      */},{key:"doValidate",value:function doValidate(flags){var regexp=flags.input?this._numberRegExpInput:this._numberRegExp;// validate as string
var valid=regexp.test(this._removeThousandsSeparators(this.value));if(valid){// validate as number
var number=this.number;valid=valid&&!isNaN(number)&&(// check min bound for negative values
this.min==null||this.min>=0||this.min<=this.number)&&(// check max bound for positive values
this.max==null||this.max<=0||this.number<=this.max);}return valid&&_get(_getPrototypeOf(MaskedNumber.prototype),"doValidate",this).call(this,flags);}/**
        @override
      */},{key:"doCommit",value:function doCommit(){var number=this.number;var validnum=number;// check bounds
if(this.min!=null)validnum=Math.max(validnum,this.min);if(this.max!=null)validnum=Math.min(validnum,this.max);if(validnum!==number)this.unmaskedValue=String(validnum);var formatted=this.value;if(this.normalizeZeros)formatted=this._normalizeZeros(formatted);if(this.padFractionalZeros)formatted=this._padFractionalZeros(formatted);this._value=this._insertThousandsSeparators(formatted);_get(_getPrototypeOf(MaskedNumber.prototype),"doCommit",this).call(this);}/** */},{key:"_normalizeZeros",value:function _normalizeZeros(value){var parts=this._removeThousandsSeparators(value).split(this.radix);// remove leading zeros
parts[0]=parts[0].replace(/^(\D*)(0*)(\d*)/,function(match,sign,zeros,num){return sign+num;});// add leading zero
if(value.length&&!/\d$/.test(parts[0]))parts[0]=parts[0]+'0';if(parts.length>1){parts[1]=parts[1].replace(/0*$/,'');// remove trailing zeros
if(!parts[1].length)parts.length=1;// remove fractional
}return this._insertThousandsSeparators(parts.join(this.radix));}/** */},{key:"_padFractionalZeros",value:function _padFractionalZeros(value){if(!value)return value;var parts=value.split(this.radix);if(parts.length<2)parts.push('');parts[1]=parts[1].padEnd(this.scale,'0');return parts.join(this.radix);}/**
        @override
      */},{key:"unmaskedValue",get:function get$$1(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,'.');},set:function set$$1(unmaskedValue){_set(_getPrototypeOf(MaskedNumber.prototype),"unmaskedValue",unmaskedValue.replace('.',this.radix),this,true);}/** Parsed Number */},{key:"number",get:function get$$1(){return Number(this.unmaskedValue);},set:function set$$1(number){this.unmaskedValue=String(number);}/**
        @override
      */},{key:"typedValue",get:function get$$1(){return this.number;},set:function set$$1(value){this.number=value;}/**
        Is negative allowed
        @readonly
      */},{key:"allowNegative",get:function get$$1(){return this.signed||this.min!=null&&this.min<0||this.max!=null&&this.max<0;}}]);return MaskedNumber;}(Masked);MaskedNumber.DEFAULTS={radix:',',thousandsSeparator:'',mapToRadix:['.'],scale:2,signed:false,normalizeZeros:true,padFractionalZeros:false};/** Masking by RegExp */var MaskedRegExp=/*#__PURE__*/function(_Masked){_inherits(MaskedRegExp,_Masked);function MaskedRegExp(){_classCallCheck(this,MaskedRegExp);return _possibleConstructorReturn(this,_getPrototypeOf(MaskedRegExp).apply(this,arguments));}_createClass(MaskedRegExp,[{key:"_update",/**
        @override
        @param {Object} opts
      */value:function _update(opts){opts.validate=function(value){return value.search(opts.mask)>=0;};_get(_getPrototypeOf(MaskedRegExp.prototype),"_update",this).call(this,opts);}}]);return MaskedRegExp;}(Masked);/** Masking by custom Function */var MaskedFunction=/*#__PURE__*/function(_Masked){_inherits(MaskedFunction,_Masked);function MaskedFunction(){_classCallCheck(this,MaskedFunction);return _possibleConstructorReturn(this,_getPrototypeOf(MaskedFunction).apply(this,arguments));}_createClass(MaskedFunction,[{key:"_update",/**
        @override
        @param {Object} opts
      */value:function _update(opts){opts.validate=opts.mask;_get(_getPrototypeOf(MaskedFunction.prototype),"_update",this).call(this,opts);}}]);return MaskedFunction;}(Masked);/** Dynamic mask for choosing apropriate mask in run-time */var MaskedDynamic=/*#__PURE__*/function(_Masked){_inherits(MaskedDynamic,_Masked);/** Currently chosen mask *//** Compliled {@link Masked} options *//** Chooses {@link Masked} depending on input value *//**
      @param {Object} opts
    */function MaskedDynamic(opts){var _this;_classCallCheck(this,MaskedDynamic);_this=_possibleConstructorReturn(this,_getPrototypeOf(MaskedDynamic).call(this,_objectSpread({},MaskedDynamic.DEFAULTS,opts)));_this.currentMask=null;return _this;}/**
      @override
    */_createClass(MaskedDynamic,[{key:"_update",value:function _update(opts){_get(_getPrototypeOf(MaskedDynamic.prototype),"_update",this).call(this,opts);// mask could be totally dynamic with only `dispatch` option
this.compiledMasks=Array.isArray(opts.mask)?opts.mask.map(function(m){return createMask(m);}):[];}/**
        @override
      */},{key:"_appendCharRaw",value:function _appendCharRaw(){var details=this._applyDispatch.apply(this,arguments);if(this.currentMask){var _this$currentMask;details.aggregate((_this$currentMask=this.currentMask)._appendChar.apply(_this$currentMask,arguments));}return details;}/**
        @override
      */},{key:"_storeBeforeTailState",value:function _storeBeforeTailState(){_get(_getPrototypeOf(MaskedDynamic.prototype),"_storeBeforeTailState",this).call(this);if(this.currentMask)this.currentMask._storeBeforeTailState();}/**
        @override
      */},{key:"_restoreBeforeTailState",value:function _restoreBeforeTailState(){_get(_getPrototypeOf(MaskedDynamic.prototype),"_restoreBeforeTailState",this).call(this);if(this.currentMask)this.currentMask._restoreBeforeTailState();}/**
        @override
      */},{key:"_resetBeforeTailState",value:function _resetBeforeTailState(){_get(_getPrototypeOf(MaskedDynamic.prototype),"_resetBeforeTailState",this).call(this);if(this.currentMask)this.currentMask._resetBeforeTailState();}},{key:"_applyDispatch",value:function _applyDispatch(){var appended=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var flags=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var prevValueBeforeTail=flags.tail&&this._beforeTailState?this._beforeTailState._value:this.value;var inputValue=this.rawInputValue;var insertValue=flags.tail&&this._beforeTailState?// $FlowFixMe - tired to fight with type system
this._beforeTailState._rawInputValue:inputValue;var tailValue=inputValue.slice(insertValue.length);var prevMask=this.currentMask;var details=new ChangeDetails();// dispatch SHOULD NOT modify mask
this.currentMask=this.doDispatch(appended,flags);// restore state after dispatch
if(this.currentMask&&this.currentMask!==prevMask){// if mask changed reapply input
this.currentMask.reset();// $FlowFixMe - it's ok, we don't change current mask above
var d=this.currentMask.append(insertValue,{raw:true});details.tailShift=d.inserted.length-prevValueBeforeTail.length;this._storeBeforeTailState();if(tailValue){// $FlowFixMe - it's ok, we don't change current mask above
details.tailShift+=this.currentMask.append(tailValue,{raw:true,tail:true}).tailShift;}}return details;}/**
      */},{key:"doDispatch",value:function doDispatch(appended){var flags=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.dispatch(appended,this,flags);}/**
        @override
      */},{key:"doValidate",value:function doValidate(){var _get2,_this$currentMask2;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return(_get2=_get(_getPrototypeOf(MaskedDynamic.prototype),"doValidate",this)).call.apply(_get2,[this].concat(args))&&(!this.currentMask||(_this$currentMask2=this.currentMask).doValidate.apply(_this$currentMask2,args));}/**
        @override
      */},{key:"reset",value:function reset(){if(this.currentMask)this.currentMask.reset();this.compiledMasks.forEach(function(m){return m.reset();});}/**
        @override
      */},{key:"remove",/**
        @override
      */value:function remove(){var details=new ChangeDetails();if(this.currentMask){var _this$currentMask3;details.aggregate((_this$currentMask3=this.currentMask).remove.apply(_this$currentMask3,arguments))// update with dispatch
.aggregate(this._applyDispatch());}return details;}/**
        @override
      */},{key:"extractInput",/**
        @override
      */value:function extractInput(){var _this$currentMask4;return this.currentMask?(_this$currentMask4=this.currentMask).extractInput.apply(_this$currentMask4,arguments):'';}/**
        @override
      */},{key:"extractTail",value:function extractTail(){var _this$currentMask5,_get3;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return this.currentMask?(_this$currentMask5=this.currentMask).extractTail.apply(_this$currentMask5,args):(_get3=_get(_getPrototypeOf(MaskedDynamic.prototype),"extractTail",this)).call.apply(_get3,[this].concat(args));}/**
        @override
      */},{key:"doCommit",value:function doCommit(){if(this.currentMask)this.currentMask.doCommit();_get(_getPrototypeOf(MaskedDynamic.prototype),"doCommit",this).call(this);}/**
        @override
      */},{key:"nearestInputPos",value:function nearestInputPos(){var _this$currentMask6,_get4;for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}return this.currentMask?(_this$currentMask6=this.currentMask).nearestInputPos.apply(_this$currentMask6,args):(_get4=_get(_getPrototypeOf(MaskedDynamic.prototype),"nearestInputPos",this)).call.apply(_get4,[this].concat(args));}},{key:"value",get:function get$$1(){return this.currentMask?this.currentMask.value:'';},set:function set$$1(value){_set(_getPrototypeOf(MaskedDynamic.prototype),"value",value,this,true);}/**
        @override
      */},{key:"unmaskedValue",get:function get$$1(){return this.currentMask?this.currentMask.unmaskedValue:'';},set:function set$$1(unmaskedValue){_set(_getPrototypeOf(MaskedDynamic.prototype),"unmaskedValue",unmaskedValue,this,true);}/**
        @override
      */},{key:"typedValue",get:function get$$1(){return this.currentMask?this.currentMask.typedValue:'';}// probably typedValue should not be used with dynamic
,set:function set$$1(value){var unmaskedValue=String(value);// double check it
if(this.currentMask){this.currentMask.typedValue=value;unmaskedValue=this.currentMask.unmaskedValue;}this.unmaskedValue=unmaskedValue;}/**
        @override
      */},{key:"isComplete",get:function get$$1(){return!!this.currentMask&&this.currentMask.isComplete;}},{key:"state",get:function get$$1(){return _objectSpread({},_get(_getPrototypeOf(MaskedDynamic.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(function(m){return m.state;}),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state});},set:function set$$1(state){var compiledMasks=state.compiledMasks,currentMaskRef=state.currentMaskRef,currentMask=state.currentMask,maskedState=_objectWithoutProperties(state,["compiledMasks","currentMaskRef","currentMask"]);this.compiledMasks.forEach(function(m,mi){return m.state=compiledMasks[mi];});if(currentMaskRef!=null){this.currentMask=currentMaskRef;this.currentMask.state=currentMask;}_set(_getPrototypeOf(MaskedDynamic.prototype),"state",maskedState,this,true);}}]);return MaskedDynamic;}(Masked);MaskedDynamic.DEFAULTS={dispatch:function dispatch(appended,masked,flags){if(!masked.compiledMasks.length)return;var inputValue=masked.rawInputValue;// simulate input
var inputs=masked.compiledMasks.map(function(m,index){var mState=m.state;m.rawInputValue=inputValue;m.append(appended,flags);var weight=m.rawInputValue.length;m.state=mState;return{weight:weight,index:index};});// pop masks with longer values first
inputs.sort(function(i1,i2){return i2.weight-i1.weight;});return masked.compiledMasks[inputs[0].index];}};/**
   * Applies mask on element.
   * @constructor
   * @param {HTMLInputElement|HTMLTextAreaElement|MaskElement} el - Element to apply mask
   * @param {Object} opts - Custom mask options
   * @return {InputMask}
   */function IMask(el){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};// currently available only for input-like elements
return new InputMask(el,opts);}/** {@link InputMask} */IMask.InputMask=InputMask;/** {@link Masked} */IMask.Masked=Masked;/** {@link MaskedPattern} */IMask.MaskedPattern=MaskedPattern;/** {@link MaskedEnum} */IMask.MaskedEnum=MaskedEnum;/** {@link MaskedRange} */IMask.MaskedRange=MaskedRange;/** {@link MaskedNumber} */IMask.MaskedNumber=MaskedNumber;/** {@link MaskedDate} */IMask.MaskedDate=MaskedDate;/** {@link MaskedRegExp} */IMask.MaskedRegExp=MaskedRegExp;/** {@link MaskedFunction} */IMask.MaskedFunction=MaskedFunction;/** {@link MaskedDynamic} */IMask.MaskedDynamic=MaskedDynamic;/** {@link createMask} */IMask.createMask=createMask;/** {@link MaskElement} */IMask.MaskElement=MaskElement;/** {@link HTMLMaskElement} */IMask.HTMLMaskElement=HTMLMaskElement;g.IMask=IMask;return IMask;});//# sourceMappingURL=imask.js.map;
function Events(){var _events={},_emitted=[];this.on=function(eventNames,fn){var priority=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;if(!$.isArray(eventNames)){eventNames=[eventNames];}eventNames.forEach(function(eventName){_events[eventName]=_events[eventName]||[];_events[eventName].push({fn:fn,priority:priority});if(_emitted[eventName]){fn(_emitted[eventName].data);}});};this.emit=function(eventName,data){if(!_emitted[eventName]){_emitted[eventName]={data:data};}if(_events[eventName]){_events[eventName].sort(function(a,b){return a.priority-b.priority;});var promises=[];_events[eventName].forEach(function(event){promises.push(Promise.resolve(event.fn(data)));});return Promise.all(promises);}return Promise.resolve();};this.debugEvents=function(key){console.log(key,_events,_emitted);};}var app=function($){var _scroll=void 0,_scrollLocked=void 0;function _bindEvents(){$('body').on('submit','form[data-ajax]',function(e){e.preventDefault();var $this=$(e.currentTarget);var values=new FormData(e.currentTarget);loader.show();$this.find('button, input[type="submit"]').attr('disabled',true).prop('disabled',true);$.ajax({type:$this.attr('method'),dataType:'html',processData:false,contentType:false,url:$this.attr('action'),data:values,success:function success(resp){var $resp=$(resp);if($resp.is('form[data-ajax]')){$resp=$resp.filter('form[data-ajax]').eq(0);$this.replaceWith($resp);}else{$resp.find('.modal__container').css('min-height',$this.closest('[data-id="replace-on-submit"]').find('.modal__container').outerHeight());$this.closest('[data-id="replace-on-submit"]').html($resp);}app.emit('ajaxFormSubmit',$resp);},complete:function complete(){loader.hide();}});});$('body').on('mousewheel','.fancybox-slide',function(ev){var fancybox=$.fancybox.getInstance();if(ev.deltaY>0)fancybox.next();else fancybox.previous();});}var _scales=[{name:'xs',size:320},{name:'sm',size:640},{name:'md',size:960},{name:'lg',size:1280},{name:'xl',size:1600},{name:'ml',size:1920}];function _getNewScale(){var viewportWidth=getViewportWidth();for(var i=1;i<_scales.length;i++){if(viewportWidth<_scales[i].size){return _scales[i-1];}}return _scales[_scales.length-1];}return $.extend({scales:_scales,currentScale:{},lazyLoad:{},getScaleSize:function getScaleSize(name){for(var i=1;i<_scales.length;i++){if(_scales[i].name===name){return _scales[i].size;}}},emitInit:function emitInit(){this.emit('init',{scale:this.currentScale});},init:function init(){var _this5=this;this.lazyLoad=new LazyLoad({class_loading:"lazy-loading",class_loaded:"lazy-loaded",class_error:"lazy-error",class_initial:"lazy-initial",data_src:'src'});_bindEvents();this.currentScale=_getNewScale();$(window).resize(function(){var newScale=_getNewScale();if(newScale!==_this5.currentScale){_this5.currentScale=newScale;_this5.emit('changeScale',newScale);}else{_this5.emit('changeViewport');}_this5.emit('resize',{scale:_this5.currentScale});});var resizeStop=debounce(function(data){_this5.emit('resizeStop',data);},500);this.on('resize',resizeStop);svg4everybody();if($('include[src]:empty').length){var interval=setInterval(function(){if($('include[src]:empty').lenght){return false;}clearInterval(interval);_this5.emitInit();},100);}else{this.emitInit();}},scrollLock:function scrollLock(){_scroll=scrollTop();this.emit('scrollLock');$('.body').css({top:-_scroll});$('html').addClass('scroll-locked');$('body').css('padding-right',$('body').hasScrollBar()?getScrollbarWidth():'');$('[data-id="scroll-lock"]').css('right',$('body').hasScrollBar()?getScrollbarWidth():'');_scrollLocked=true;},scrollUnlock:function scrollUnlock(){if(_scrollLocked){$('body').css('padding-right','');$('.body').css({top:''});$('[data-id="scroll-lock"]').css('right','');$('html').removeClass('scroll-locked');scrollTop(_scroll);_scrollLocked=false;this.emit('scrollUnlock');}}},new Events());}(jQuery);$(function(){app.init();});;var catalog=function($){var _uri=void 0,_prepare=[],$_this=void 0,_pagination=void 0,$_pages=void 0,$_separatorPrototype=void 0,$_currentPageNumber=void 0,_scrollOffset=0;function _replace(content){return new Promise(function(resolve){var $content=$(content);var display=$content.css('display');$content.hide();$_pages.css('min-height',$_pages.outerHeight());$_pages.children().velocity('fadeOut',{duration:200,complete:function complete(){$_pages.html($content);if(_pagination&&$_currentPageNumber.length){$_currentPageNumber.text(_pagination.getCurrent());}$content.velocity('fadeIn',{duration:200,display:display,complete:function complete(){$_pages.css('min-height','');resolve();}});}});});}function _addPage(content){return new Promise(function(resolve){var $separator=$_separatorPrototype.clone();$separator.show();$separator.find('[data-id="current"]').text(_pagination.getCurrent());var $newPage=$('<div style="display:none"></div>');$newPage.append($separator);$newPage.append(content);$_pages.append($newPage);$newPage.velocity('slideDown',{duration:400,complete:resolve});});}function _load(){var isPage=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var isMore=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var isPoped=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;loader.show();var scroll=isPage?new Promise(function(resolve){$_this.velocity('scroll',{duration:400,offset:_scrollOffset,complete:resolve});}):Promise.resolve();var ajax=new Promise(function(resolve){$.ajax({type:'get',dataType:'html',url:_uri.toString(),success:function success(resp){if(isMore){_addPage(resp).then(function(){resolve();});}else{_replace(resp).then(function(){resolve();});}if(!isPoped){window.history.pushState(_uri.toString(),document.title,this.url);}},error:resolve});});return Promise.all([scroll,ajax]).then(function(){loader.hide();});}return{setPrepare:function setPrepare(cb){if(cb&&typeof cb==='function')_prepare.push(cb);return this;},reset:function reset(params){params.forEach(function(param){_uri.removeQuery(param);});return this;},load:function load(params){if(params){_uri.setQuery(params);}_load();return this;},init:function init(){_uri=new URI();$_this=$('#catalog').eq(0);$_pages=$_this.find('[data-id="pages"]');$_separatorPrototype=$_this.find('[data-id="separator"]');$_currentPageNumber=$_this.find('[data-id="current-page-number"]');window.history.replaceState(_uri.toString(),'',location.pathname+location.search);window.onpopstate=function(ev){if(ev.state){_uri=new URI(ev.state);if(_pagination){if(_uri.hasQuery('page')){_pagination.setCurrent(_uri.search(true).page);}else{_pagination.setCurrent(1);}}_load(false,false,true);}else{ev.stopPropagation();}};_pagination=$('.pagination').eq(0).data('pagination-inst');if(_pagination){_pagination.setOnChange(function(pageNumber){_uri.removeQuery('page');if(pageNumber>1){_uri.setQuery('page',pageNumber);}return _load(true);});_pagination.setOnMore(function(pageNumber){_uri.removeQuery('page');if(pageNumber>1){_uri.setQuery('page',pageNumber);}return _load(false,true);});}},setScrollOffset:function setScrollOffset(offset){_scrollOffset=parseInt(offset);}};}(jQuery);app.on('init',function(){if($('#catalog').length){catalog.init();}},101);;function getImageSize(src){var newImg=new Image();return new Promise(function(resolve){newImg.onload=function(){resolve({width:newImg.width,height:newImg.height});};newImg.src=src;});}function debounce(func,wait,immediate){var timeout=void 0;return function(){var context=this,args=arguments;var later=function later(){timeout=null;if(!immediate)func.apply(context,args);};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args);};}function isInScales(scaleNames){return $.inArray(app.currentScale.name,scaleNames)!==-1;}var CallbackRegistry={};// реестр
function JSONP(url,callbackName){return new Promise(function(resolve,reject){var scriptOk=false;if(!callbackName){callbackName='cb'+String(Math.random()).slice(-6);}url+=~url.indexOf('?')?'&':'?';url+='callback=CallbackRegistry.'+callbackName;CallbackRegistry[callbackName]=function(data){scriptOk=true;delete CallbackRegistry[callbackName];resolve(data);};function checkCallback(){if(scriptOk)return;delete CallbackRegistry[callbackName];reject();}var script=document.createElement('script');script.onreadystatechange=function(){if(this.readyState==='complete'||this.readyState==='loaded'){this.onreadystatechange=null;setTimeout(checkCallback,0);}};script.onload=script.onerror=checkCallback;script.src=url;document.body.appendChild(script);});}function isAboveScale(scaleName){var target=app.scales.find(function(scale){return scale.name===scaleName;});if(!target)return;return app.currentScale.size>=target.size;}function getViewportWidth(){var width=void 0;if(window.innerWidth){width=window.innerWidth;}else if(document.documentElement&&document.documentElement.clientWidth){width=document.documentElement.clientWidth;}else{throw'Can not detect viewport width.';}return width;}function getScrollbarWidth(){var div1=void 0,div2=void 0;if(document.readyState==='loading'){return null;}div1=document.createElement('div');div2=document.createElement('div');div1.style.width=div2.style.width=div1.style.height=div2.style.height='100px';div1.style.overflow='scroll';div2.style.overflow='hidden';document.body.appendChild(div1);document.body.appendChild(div2);var scrollbarWidth=Math.abs(div1.scrollHeight-div2.scrollHeight);document.body.removeChild(div1);document.body.removeChild(div2);return scrollbarWidth;}function scrollTop(){var scroll=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var smooth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(scroll!==null){if(smooth){$('body').animate({scrollTop:scroll},smooth);$('html').animate({scrollTop:scroll},smooth);}else{document.body.scrollTop=scroll;document.documentElement.scrollTop=scroll;}}else{return document.body.scrollTop||document.documentElement.scrollTop;}}function executeFunctionByName(functionName,context/*, args */){var args=Array.prototype.slice.call(arguments,2);var namespaces=functionName.split(".");var func=namespaces.pop();for(var i=0;i<namespaces.length;i++){context=context[namespaces[i]];}return context[func].apply(context,args);}function addslashes(str){str=str.replace(/\\/g,'\\\\');str=str.replace(/\'/g,'\\\'');str=str.replace(/\"/g,'\\"');str=str.replace(/\0/g,'\\0');return str;}function getKeyCode(event){if(event.which==null){// IE
return event.keyCode;}if(event.which!=0&&event.charCode!=0){// все кроме IE
return event.which;}}function encodeQueryData(data){var ret=[];for(var i=0;i<data.length;i++){ret.push(encodeURIComponent(data[i].name)+'='+encodeURIComponent(data[i].value));}return ret.join('&');}function plural(quantity,f0,f1,f2){var text=f0;quantity=quantity||0;if(quantity%10==1&&quantity%100!=11){text=f1;}else if(quantity%10>=2&&quantity%10<=4&&(quantity%100<10||quantity%100>=20)){text=f2;}return text;}function getInterval(point,breakpoints){var strict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;for(var i=0;i<breakpoints.length;i++){if(point<breakpoints[i]||!strict&&point===breakpoints[i]){return i;}}return breakpoints.length;}function getContrastYIQ(hexcolor){var r=parseInt(hexcolor.substr(0,2),16);var g=parseInt(hexcolor.substr(2,2),16);var b=parseInt(hexcolor.substr(4,2),16);var yiq=(r*299+g*587+b*114)/1000;return yiq>=128?'black':'white';}(function($){$.fn.clicktouch=function(cb){if(Modernizr.touchevents){this.on('touchstart',cb);}else{this.on('click',cb);}};$.fn.columnizeCustom=function(itemClass,colClass,threshold,colNum){var columnizedClass=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'columnized';var wrapSingle=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;this.each(function(i,el){var $items=$(el).find("."+itemClass);if($items.length>threshold){var cols=[];var colSize=void 0;if(colNum){colSize=Math.ceil($items.length/colNum);}else{colSize=threshold;colNum=Math.ceil($items.length/colSize);}for(var _i2=0;_i2<colNum;_i2++){cols[_i2]=$([]);}$items.each(function(i,el){var colI=Math.floor(i/colSize);cols[colI]=cols[colI].add(el);});cols.forEach(function(col){col.wrapAll("<div class=\""+colClass+"\" />");});$(el).addClass(columnizedClass);}else if(wrapSingle){$items.wrapAll("<div class=\""+colClass+"\" />");$(el).addClass(columnizedClass);}});return this;};$.fn.handleTableMore=function($btn){var $this=this;var $table=$this.find('table');var $row=$table.find('tr[threshold]');var collapsed=$row.length?true:false;$btn.click(function(){if(collapsed){$this.animate({height:$this.get(0).scrollHeight},500,function(){$this.css('height','');});$btn.hide();collapsed=false;}});function update(){if(collapsed){var height=$row.offsetTop()+1;$this.height(height);$this.after($btn);}}update();$(window).on('resize',update);};$.fn.reduce=function(fnReduce,initialValue){var values=this,previousValue=initialValue;values.each(function(index,currentValue){previousValue=fnReduce.call(currentValue,previousValue,currentValue,index,values);});return previousValue;};$.fn.offsetLeft=function(){return this.get(0).offsetLeft;};$.fn.offsetRight=function(){return this.parent().innerWidth()-this.get(0).offsetLeft-this.outerWidth();};$.fn.offsetTop=function(){return this.get(0).offsetTop;};$.fn.scrollRight=function(){var el=this.get(0);return el.scrollWidth-this.scrollLeft()-this.innerWidth();};$.fn.scrollBottom=function(){var el=this.get(0);return el.scrollHeight-this.scrollTop()-this.innerHeight();};$.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height();};$.fn.serializeObject=function(){var result={};var extend=function extend(i,element){if(element.name.search(/\[.*]$/)!==-1){var name=element.name.replace(/\[.*]$/,'');if($.isArray(result[name])){result[name].push(element.value);}else{result[name]=[element.value];}}else{result[element.name]=element.value;}};$.each(this.serializeArray(),extend);return result;};})(jQuery);;var loader=function($){var $_this=void 0;var _promise=new Promise(function(resolve){resolve();});var _token=0;var timer=void 0;return{init:function init(){$_this=$('#loading');$_this=$('<div class="loading" id="loading"></div>');$('body').append($_this);this.hide();},showWhile:function showWhile(promise){var _this6=this;var i=++_token;this.show();_promise=Promise.all([promise,_promise]).then(function(){_this6.hide(i);});},show:function show(){clearTimeout(timer);timer=setTimeout(function(){$_this.show();},1000);},hide:function hide(){var token=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_token;if(token===_token){clearTimeout(timer);$_this.hide();}}};}(jQuery);app.on('init',loader.init.bind(loader));;var modal=function($){var $container=void 0,$content=void 0,$innerContainer=void 0;var modifier=void 0;return $.extend({opened:false,setModifier:function setModifier(localModifier){modifier=localModifier;},open:function open(content){var title=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';$content=$(content);if(modifier){$container.find('.modal').addClass(modifier);}this.emit('beforeOpen',$content);$innerContainer.html($content);app.scrollLock();$container.stop(true,false).fadeIn(300);this.emit('open',$content);this.opened=true;},close:function close(){var _this7=this;if(this.opened){$container.stop(true,false).fadeOut(300,function(){$innerContainer.empty();_this7.opened=false;if(modifier){$container.find('.modal').removeClass(modifier);modifier='';}app.scrollUnlock();});}},init:function init(){var _this8=this;$container=$('<div class="overlay overlay_modal">'+'<div class="modal">'+'<div class="modal__close"></div>'+'<div class="modal__container" data-id="replace-on-submit"></div>'+'</div>'+'</div>');$innerContainer=$container.find('.modal__container');$('body').append($container);$('body').on('click','.modal',function(ev){ev.stopImmediatePropagation();});$('body').on('click','.overlay_modal',function(){if(_this8.opened){_this8.close();}});$('body').on('click','.modal__close',function(){_this8.close();});$('body').keydown(function(e){if(e.keyCode===27){_this8.close();}});}},new Events());}(jQuery);app.on('init',function(){modal.init();$('body').on('click','a[data-ajax]',function(e){e.preventDefault();var $this=$(e.currentTarget);modal.setModifier($this.data('modal-modifier'));loader.show();$.ajax({type:$this.attr('method'),dataType:'html',url:$this.attr('href'),data:$this.data('post')?$this.data('post'):{},success:function success(resp){modal.open(resp);},complete:function complete(){loader.hide();}});});$('body').on('click','[data-modal-inline]',function(e){e.preventDefault();var $content=$($(this).data('modal-inline'));if(!$content.length){return false;}modal.setModifier($(this).data('modal-modifier'));modal.open($content[0].outerHTML,$(this).data('title'));});});;function Nav(_itemClass,_url,_iconHtml){var _config={};var _topLevelIDList=void 0;var self=this;function _prepare(source){var level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var parent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return source.map(function(el,i){_config[el.id]=$.extend({},el);_config[el.id].level=level;if(parent){_config[el.id].parents=[parent.id];if(parent.parents&&$.isArray(parent.parents)){_config[el.id].parents=_config[el.id].parents.concat(parent.parents);}}if(el.children&&$.isArray(el.children)&&el.children.length){_config[el.id]['children']=_prepare(el.children,level+1,_config[el.id]);}else{delete _config[el.id]['children'];}return el.id;});}function _buildJQuery(el){var $item=$("<li class=\""+_itemClass+" "+_itemClass+"_"+el.id+"\" data-id=\""+el.id+"\" data-level=\""+el.level+"\"></li>");if(el.span){$item.html("<span class=\"link\" onclick><span>"+el.title+"</span></span>");}else{$item.html("<a class=\"link\" href=\""+el.link+"\"><span>"+el.title+"</span></a>");}if(el.mod){$item.addClass(_itemClass+'_'+el.mod);}if(el.active){$item.addClass(_itemClass+'_active');}if(el.children){$item.addClass(_itemClass+'_parent');$item.find('.link').append(self.iconHtml);}return $item;}this.url=_url;this.iconHtml=_iconHtml;this.getList=function(id){var IDlist=void 0;if(id){var parent=_config[id];IDlist=parent.children;}else{IDlist=_topLevelIDList;}if(!IDlist)return false;var $list=$([]);IDlist.forEach(function(idx){$list=$list.add(_buildJQuery(_config[idx]));});return $list;};this.getParents=function(id){if(!id)return[];var item=_config[id];var parents=[];if(item&&item.parents){parents=item.parents.slice(0);}parents.reverse();return parents;};this.hasChildren=function(id){if(!id)return false;var item=_config[id];return item&&item.children&&item.children.length;};this.getCurrentParents=function(){var _this9=this;var result=[];$.each(_config,function(i,el){if(el.current){result=_this9.getParents(el.id);}});return result;};this.load=function(){var showLoading=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(typeof _topLevelIDList!=='undefined'){return Promise.resolve();}else{if(showLoading)loader.show();return navLoader.load(this.url).then(function(_treeConfig){_topLevelIDList=_prepare(_treeConfig);if(showLoading)loader.hide();},function(){if(showLoading)loader.hide();});}};this.debug=function(){console.log(_config);};}var navLoader=function($){var _loaded=void 0;var _loading=void 0;return{load:function load(url){if(typeof _loading==='undefined'){_loading=new Promise(function(resolve,reject){if(typeof _loaded!=='undefined'){resolve(_loaded);}else{if(!url){url='nav.json';}var uri=new URI(url);if(parseInt(window.currentPageID)){uri.setQuery('pageID',parseInt(window.currentPageID));}$.ajax(uri.toString(),{dataType:'json',success:function success(resp){_loaded=resp;resolve(_loaded);},error:reject});}});}return _loading;}};}(jQuery);;function owlCarouselFacade($_this,_options,_scales,$_prev,$_next){var _updateOnResize=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;return new Promise(function(resolve){var _enabled=false;if(!_scales){_scales=['xs','sm','md','lg','xl','ml'];}function _updateArrows(){var $_owlPrev=$_this.find('.owl-prev');var $_owlNext=$_this.find('.owl-next');if($_prev&&$_next&&$_owlPrev.length&&$_owlNext.length){$_prev.toggleClass('disabled',$_owlPrev.hasClass('disabled'));$_next.toggleClass('disabled',$_owlNext.hasClass('disabled'));if($_prev.hasClass('disabled')&&$_next.hasClass('disabled')){$_prev.hide();$_next.hide();}else{$_prev.show();$_next.show();}}}function _update(){if(isInScales(_scales)){if(!_enabled){var callbacks={onInitialized:function onInitialized(ev){$_this.find('.owl-nav').hide();_updateArrows();if(typeof _options.onInitialized==='function'){_options.onInitialized(ev);}resolve();},onChanged:function onChanged(ev){app.lazyLoad.update();_updateArrows();if(typeof _options.onChanged==='function'){_options.onChanged(ev);}},onRefresh:function onRefresh(ev){app.lazyLoad.update();_updateArrows();if(typeof _options.onRefresh==='function'){_options.onRefresh(ev);}}};$_this.addClass('owl-carousel').owlCarousel($.extend(callbacks,_options,{nav:true}));}_enabled=true;}else{if(_enabled){$_this.trigger('destroy.owl.carousel').removeClass('owl-carousel');}if($_prev&&$_next){$_prev.hide();$_next.hide();}_enabled=false;}}if($_prev&&$_next){$_prev.click(function(){if(_enabled){$_this.trigger('prev.owl.carousel');}});$_next.click(function(){if(_enabled){$_this.trigger('next.owl.carousel');}});}_update();if(_updateOnResize){app.on('changeScale',_update);}});};function Pagination($this){var locked=false;function onChange(pageNumber){var uri=new URI();uri.setQuery('page',pageNumber);//history.pushState({}, null, uri.href());
location.href=uri.href();return Promise.resolve();}var onMore=onChange;var max=parseInt($this.find('[data-id="max"]').text());var $input=$this.find('.pagination__input');$input.data('min',1).data('max',max);var input=new Spinner($input);function checkLimits(current){if(current>=max){if($more.length){$more.hide();}$next.addClass('pagination__arrow_disabled');current=max;}else{if($more.length){$more.show();}$next.removeClass('pagination__arrow_disabled');}if(current<=1){$prev.addClass('pagination__arrow_disabled');current=1;}else{$prev.removeClass('pagination__arrow_disabled');}return current;}input.on('change',function(val){if(locked)return;locked=true;currentValue=val;onChange(val).then(function(){if(currentValue>=max){if($more.length){$more.hide();}$next.addClass('pagination__arrow_disabled');}else{if($more.length){$more.show();}$next.removeClass('pagination__arrow_disabled');}if(currentValue<=1){$prev.addClass('pagination__arrow_disabled');}else{$prev.removeClass('pagination__arrow_disabled');}locked=false;});});var currentValue=input.getValue();var $more=$this.find('.pagination__more');var $prev=$this.find('.pagination__arrow_prev');var $next=$this.find('.pagination__arrow_next');checkLimits(currentValue);if($more.length){$more.click(function(ev){ev.preventDefault();if(locked)return;locked=true;onMore(++currentValue).then(function(){input.setValue(currentValue);checkLimits(currentValue);locked=false;});});}$prev.click(function(){if(currentValue>1&&!locked){locked=true;input.setValue(--currentValue);onChange(currentValue).then(function(){checkLimits(currentValue);locked=false;});}});$next.click(function(){if(currentValue<max&&!locked){locked=true;input.setValue(++currentValue);onChange(currentValue).then(function(){checkLimits(currentValue);locked=false;});}});this.setOnChange=function(cb){if(cb&&typeof cb==='function'){onChange=cb;}};this.setOnMore=function(cb){if(cb&&typeof cb==='function'){onMore=cb;}};this.setCurrent=function(pageNumber){currentValue=checkLimits(parseInt(pageNumber));input.setValue(currentValue);};this.getCurrent=function(){return currentValue;};}app.on('init',function(){$('.pagination').each(function(i,el){$(el).data('pagination-inst',new Pagination($(el)));});});;function Popover($this,$popover){Events.call(this);var _this=this;var opened=false;var effect=$popover.data('effect')||'fadeIn';$popover.hide();function open(ev){_this.emit('opening',ev);$popover.addClass('no-touch');$popover.velocity(effect,{duration:200,complete:function complete(){opened=true;$popover.removeClass('no-touch');_this.emit('open',ev);}});}function close(){if(opened){_this.emit('closing',$this);$popover.velocity('reverse',{duration:200,complete:function complete(){opened=false;$popover.hide();_this.emit('close',$this);}});}}$popover.find('[data-id="close"]').click(close);$this.click(function(ev){if(!opened){open(ev);}});$('.body,html').click(function(ev){if(opened&&!$popover.filter(ev.target).length&&!$popover.find(ev.target).length){close();}});app.on('changeScale',close);this.close=close;this.open=open;}function initPopovers($body){$body.find('[data-id="popover"]').each(function(i,el){var $popover=$(el);var id=$popover.data('name');var $el=$body.find("[data-popover=\""+id+"\"]");if($popover.length&&$el.length){if($popover.data('load-html')){$popover.html($($popover.data('load-html')).html());}var popover=new Popover($el,$popover);$popover.data('popover-inst',popover);$el.data('popover-inst',popover);}});}app.on('init',function(){initPopovers($('body'));$('body').on('touchstart submit','.no-touch',function(ev){ev.stopImmediatePropagation();ev.preventDefault();});});;app.on('init',function(){var _scroll=scrollTop();var _locked=false;$(window).scroll(function(){var newScroll=scrollTop();if(!_locked&&Math.abs(newScroll-_scroll)>=5){app.emit('scroll',{top:newScroll,delta:newScroll-_scroll});_scroll=newScroll;}});app.on('scrollLock',function(){_locked=true;});app.on('scrollUnlock',function(){_locked=false;});});;app.on('init',function(){$('table').each(function(i,el){var $this=$(el);$this.wrap('<div class="table"></div>');$this.tableHover({colClass:'table__active',rowClass:'table__active',cellClass:'table__hover'});$this.find('th').hover(function(ev){ev.stopImmediatePropagation();});});});;function Tabs($switchers,$contents,activeClass){var _this10=this;Events.call(this);var $activeTab=void 0;if(!$switchers.filter('.'+activeClass).length){$switchers.eq(0).addClass(activeClass);}this.toggle=function(tab){$switchers.each(function(i,el){$(el).removeClass(activeClass);});var $switcher=$switchers.filter('[href="'+tab+'"]');$switcher.addClass(activeClass);var $content=$contents.filter('[data-id="'+tab+'"]');$activeTab=$content;$contents.hide();$content.show();this.emit('afterToggle',$content.data('id'));};this.toggle($switchers.filter('.'+activeClass).attr('href'));this.getActiveTab=function(){return $activeTab;};this.getActive=function(){return $activeTab.data('id');};this.refresh=function(){this.toggle(this.getActive());};$switchers.click(function(ev){ev.preventDefault();_this10.toggle($(ev.currentTarget).attr('href'));});};function Toggle($title,$content){Events.call(this);var _this=this;var opened=false;$content.hide();function open(){_this.emit('opening',$content);$content.addClass('no-touch');$title.addClass('opened');$content.velocity('slideDown',{duration:400,complete:function complete(){opened=true;$content.removeClass('no-touch');_this.emit('open',$content);}});}function close(){if(opened){_this.emit('closing',$title);$content.velocity('slideUp',{duration:400,complete:function complete(){opened=false;$content.hide();$title.removeClass('opened');_this.emit('close',$title);}});}}$title.clicktouch(function(){if(!opened){open();}else{close();}});this.close=close;this.open=open;}function initToggles($body){$body.find('[data-id="toggle"]').each(function(i,el){console.log(el);var $content=$(el);var id=$content.data('name');var $el=$body.find("[data-toggle=\""+id+"\"]");if($content.length&&$el.length){var toggle=new Toggle($el,$content);$content.data('toggle-inst',toggle);$el.data('toggle-inst',toggle);}});}app.on('init',function(){initToggles($('body'));$('body').on('touchstart submit','.no-touch',function(ev){ev.stopImmediatePropagation();ev.preventDefault();});});;(function($){function init($body){$body.find('.upload-field').each(function(i,el){var $this=$(el);var $input=$this.find('input[type="file"]');var $link=$this.find('a');$input.hide();$this.siblings('.modal__input-title').hide();$link.click(function(ev){ev.preventDefault();$input.click();});$input.change(function(ev){var $row=$this.closest('.modal__row');var $error=$row.find('.modal__error');if(ev.currentTarget.files[0].size<=$input.data('max-size')){$link.html(ev.currentTarget.files[0].name);$input.data('files',ev.currentTarget.files);$error.remove();}else{if(!$error.length){$error=$('<div class="modal__error"></div>');$row.append($error);}$error.html('Превышен допустимый размер файла');}});});}modal.on('beforeOpen',function($modal){init($modal);});app.on('ajaxFormSubmit',function($form){init($form);});})(jQuery);;var GlobalOverlay=function($){var $this=void 0;return{enableClickClose:function enableClickClose(){$this.on('click',function(){GlobalOverlay.close();});},disableClickClose:function disableClickClose(){$this.unbind('click');},open:function open(){$(document).trigger('GlobalOverlay.beforeOpen');$this.velocity('fadeIn');$(document).trigger('GlobalOverlay.open');},close:function close(){$(document).trigger('GlobalOverlay.beforeClose');$this.velocity('fadeOut');$(document).trigger('GlobalOverlay.close');},init:function init(){$this=$('.global-overlay');if(!$this.length){return false;}this.enableClickClose();$(document).trigger('GlobalOverlay.init');}};}(jQuery);app.on('init',GlobalOverlay.init.bind(GlobalOverlay));;var InputMask=function($){return{init:function init(){$('input[data-mask]').each(function(){var maskInstance=void 0;var pattern=$(this).data('mask');if(typeof this[pattern]=='function'){maskInstance=new IMask(this,this[pattern]);}else{maskInstance=new IMask(this,{mask:pattern});}$(this).data('mask-instance',maskInstance);});}};}(jQuery);app.on('init',InputMask.init.bind(InputMask));;var mobileToolbar=function($){var $this=void 0,$burger=void 0,$search=void 0,$parea=void 0,$cart=void 0,delta=0;;return{show:function show(){if(!$this.data('is-visible')){$this.data('is-visible',true);$this.stop(true,false).fadeIn(250);}},hide:function hide(){if($this.data('is-visible')){$this.data('is-visible',false);$this.stop(true,false).fadeOut(250);}},autoShow:function autoShow(){var result=false;if($(window).scrollTop()<$(window).height()){mobileToolbar.show();result=true;}return result;},init:function init(){$this=$('#mobile-toolbar');$this.data('is-visible',true);if(!mobileToolbar.autoShow()){mobileToolbar.hide();}app.on('scroll',function(data){if(!isInScales(['xs'])){return;}if(mobileToolbar.autoShow()){return true;}if(data.delta<=0){delta+=Math.abs(data.delta);if(delta>200){mobileToolbar.show();}}else{delta=0;mobileToolbar.hide();}});app.on('changeScale',function(){$this.removeAttr('style');});$('body').on('click','.mobile-toolbar__link:not(.active)',function(){$('.mobile-toolbar__link.active').trigger('click');});$(document).on('mobileNav.opened',function(){$('.mobile-toolbar__link-nav').addClass('active');});$(document).on('mobileNav.closed',function(){$('.mobile-toolbar__link-nav').removeClass('active');});var searchPopover=$('[data-popover="search-popover-1"]').data('popover-inst');if(searchPopover){searchPopover.on('open',function(){$('.mobile-toolbar__link-search').addClass('active');});searchPopover.on('close',function(){$('.mobile-toolbar__link-search').removeClass('active');});}var contactsPopover=$('[data-popover="contacts-popover-2"]').data('popover-inst');if(contactsPopover){contactsPopover.on('open',function(){$('.mobile-toolbar__link-contacts').addClass('active');});contactsPopover.on('close',function(){$('.mobile-toolbar__link-contacts').removeClass('active');});}$(document).on('ViewedList.open',function(){$('.mobile-toolbar__link-viewed').addClass('active');});$(document).on('ViewedList.close',function(){$('.mobile-toolbar__link-viewed').removeClass('active');});}};}(jQuery);app.on('init',mobileToolbar.init.bind(mobileToolbar),102);;var mobileNav=function($){var $_this=void 0,$_container=void 0,_isOpened=false,_nav=void 0,_opened=[];var wrapperEl='mobile-menu',listEl=wrapperEl+'__list',subMenuEl=wrapperEl+'__submenu',itemEl=wrapperEl+'__item';function _handleOne($this){var duration=arguments.length>1&&arguments[1]!==undefined?arguments[1]:330;var id=$this.data('id');var promise=$.Deferred();var promiseSiblings=$.Deferred();var promiseSubmenu=$.Deferred();if($this.find('>.'+subMenuEl).length){var $submenu=$this.find('>.'+subMenuEl);$submenu.velocity('slideUp',{duration:duration,complete:function complete(){$submenu.remove();$this.removeClass(itemEl+'_header');promiseSubmenu.resolve();}});$this.siblings('.'+itemEl).velocity('slideDown',{duration:duration,complete:function complete(){promiseSiblings.resolve();}});_opened.pop();}else{var _$submenu=$('<ul class="'+subMenuEl+'" style="display:none"></ul>');_$submenu.html(_nav.getList(id));$this.append(_$submenu);$this.siblings('.'+itemEl).velocity('slideUp',{duration:duration,complete:function complete(){promiseSiblings.resolve();}});_$submenu.velocity('slideDown',{duration:duration,complete:function complete(){promiseSubmenu.resolve();}});$this.addClass(itemEl+'_header');_opened.push(id);if($this.data('level')%2!==1){_$submenu.addClass(subMenuEl+'_odd');}}$.when(promiseSubmenu,promiseSiblings).done(function(){promise.resolve();});return promise;}function _handleMany(ids){return _handleOne($_this.find("[data-id=\""+ids.shift()+"\"]"),100).done(function(){if(ids.length){return _handleMany(ids);}});}return{close:function close(){var promise=$.Deferred();if(_isOpened){$_container.velocity('fadeOut',{duration:330,complete:function complete(){$_this.empty();var lastID=_opened[_opened.length-1];_opened=[];promise.resolve(lastID);}});_isOpened=false;promise.done(function(){app.scrollUnlock();});}else{promise.resolve(_opened[_opened.length-1]);}promise.then(function(){$(document).trigger('mobileNav.closed');});return promise;},open:function open(){var id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var loadCurrent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(_isOpened)this.close().done(open);else open();function open(){_nav.load().then(function(){app.scrollLock();$_this.empty();$_this.append(_nav.getList());var parentIDs=_nav.getParents(id);parentIDs.push(id);$_container.velocity('fadeIn',{duration:330,complete:function complete(){if(loadCurrent){var current=_nav.getCurrentParents();if(current.length){_handleMany(current);}}else if(parentIDs.length){_handleMany(parentIDs).done(function(){var current=_nav.getCurrentParents();current.shift();if(current.length){_handleMany(current);}});}$(document).trigger('mobileNav.opened');}});_isOpened=true;});}},init:function init(){var _this11=this;$_this=$('.'+listEl);$_container=$('.'+wrapperEl);_nav=new Nav(itemEl,'/nav.json','<svg class="icon icon-arrow-down"><use xlink:href="/assets/build/sprites/global.svg#icon-arrow-down"></use></svg>');var $body=$('body');$body.on('click','.'+itemEl+'_parent>.link',function(ev){ev.preventDefault();_nav.load().then(function(){_handleOne($(ev.currentTarget).closest('.'+itemEl));});});$body.on('click','.'+wrapperEl+'__close',function(ev){_this11.close();});$body.on('click','.mobile-toolbar__link-nav:not(.link-disabled)',function(){if(_isOpened){mobileNav.close();}else{mobileNav.open(0,true);}$(this).addClass('link-disabled');});$(document).on('mobileNav.opened mobileNav.closed',function(){$('.mobile-toolbar__link-nav').removeClass('link-disabled');});}};}(jQuery);app.on('init',mobileNav.init.bind(mobileNav));;